import{ax as P,a5 as i,o as m,c as b,X as n,R as u,a as f,Z as p,Q as E,V as v,W as T,ay as R,az as j,aa as q,a0 as M,aA as N,aB as H,aC as z,aD as K,at as W,aE as Y}from"./vendor-vue.e07d7f7e.js";import{Q}from"./element-icon.bb5f2c38.js";import{a as I,b as X}from"./vendor-lib.bb870261.js";import{E as w,i as G}from"./element-plus.93c2f37e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var Z={name:"zh-cn",el:{colorpicker:{confirm:"\u786E\u5B9A",clear:"\u6E05\u7A7A"},datepicker:{now:"\u6B64\u523B",today:"\u4ECA\u5929",cancel:"\u53D6\u6D88",clear:"\u6E05\u7A7A",confirm:"\u786E\u5B9A",selectDate:"\u9009\u62E9\u65E5\u671F",selectTime:"\u9009\u62E9\u65F6\u95F4",startDate:"\u5F00\u59CB\u65E5\u671F",startTime:"\u5F00\u59CB\u65F6\u95F4",endDate:"\u7ED3\u675F\u65E5\u671F",endTime:"\u7ED3\u675F\u65F6\u95F4",prevYear:"\u524D\u4E00\u5E74",nextYear:"\u540E\u4E00\u5E74",prevMonth:"\u4E0A\u4E2A\u6708",nextMonth:"\u4E0B\u4E2A\u6708",year:"\u5E74",month1:"1 \u6708",month2:"2 \u6708",month3:"3 \u6708",month4:"4 \u6708",month5:"5 \u6708",month6:"6 \u6708",month7:"7 \u6708",month8:"8 \u6708",month9:"9 \u6708",month10:"10 \u6708",month11:"11 \u6708",month12:"12 \u6708",weeks:{sun:"\u65E5",mon:"\u4E00",tue:"\u4E8C",wed:"\u4E09",thu:"\u56DB",fri:"\u4E94",sat:"\u516D"},months:{jan:"\u4E00\u6708",feb:"\u4E8C\u6708",mar:"\u4E09\u6708",apr:"\u56DB\u6708",may:"\u4E94\u6708",jun:"\u516D\u6708",jul:"\u4E03\u6708",aug:"\u516B\u6708",sep:"\u4E5D\u6708",oct:"\u5341\u6708",nov:"\u5341\u4E00\u6708",dec:"\u5341\u4E8C\u6708"}},select:{loading:"\u52A0\u8F7D\u4E2D",noMatch:"\u65E0\u5339\u914D\u6570\u636E",noData:"\u65E0\u6570\u636E",placeholder:"\u8BF7\u9009\u62E9"},cascader:{noMatch:"\u65E0\u5339\u914D\u6570\u636E",loading:"\u52A0\u8F7D\u4E2D",placeholder:"\u8BF7\u9009\u62E9",noData:"\u6682\u65E0\u6570\u636E"},pagination:{goto:"\u524D\u5F80",pagesize:"\u6761/\u9875",total:"\u5171 {total} \u6761",pageClassifier:"\u9875",deprecationWarning:"\u4F60\u4F7F\u7528\u4E86\u4E00\u4E9B\u5DF2\u88AB\u5E9F\u5F03\u7684\u7528\u6CD5\uFF0C\u8BF7\u53C2\u8003 el-pagination \u7684\u5B98\u65B9\u6587\u6863"},messagebox:{title:"\u63D0\u793A",confirm:"\u786E\u5B9A",cancel:"\u53D6\u6D88",error:"\u8F93\u5165\u7684\u6570\u636E\u4E0D\u5408\u6CD5!"},upload:{deleteTip:"\u6309 delete \u952E\u53EF\u5220\u9664",delete:"\u5220\u9664",preview:"\u67E5\u770B\u56FE\u7247",continue:"\u7EE7\u7EED\u4E0A\u4F20"},table:{emptyText:"\u6682\u65E0\u6570\u636E",confirmFilter:"\u7B5B\u9009",resetFilter:"\u91CD\u7F6E",clearFilter:"\u5168\u90E8",sumText:"\u5408\u8BA1"},tree:{emptyText:"\u6682\u65E0\u6570\u636E"},transfer:{noMatch:"\u65E0\u5339\u914D\u6570\u636E",noData:"\u65E0\u6570\u636E",titles:["\u5217\u8868 1","\u5217\u8868 2"],filterPlaceholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",noCheckedFormat:"\u5171 {total} \u9879",hasCheckedFormat:"\u5DF2\u9009 {checked}/{total} \u9879"},image:{error:"\u52A0\u8F7D\u5931\u8D25"},pageHeader:{title:"\u8FD4\u56DE"},popconfirm:{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}}};const J={login:"/login",getDomainList:"/getDomainList",addDomain:"/addDomain",getDomainById:"/getDomainById",deleteDomainById:"/deleteDomainById",updateDomainById:"/updateDomainById",updateDomainCertInfoById:"/updateDomainCertInfoById",updateAllDomainCertInfoOfUser:"/updateAllDomainCertInfoOfUser",importDomainFromFile:"/importDomainFromFile",getAllDomainListOfUser:"/getAllDomainListOfUser",sendDomainInfoListEmail:"/sendDomainInfoListEmail",checkDomainCert:"/checkDomainCert",getAllSystemConfig:"/getAllSystemConfig",updateSystemConfig:"/updateSystemConfig",getSystemVersion:"/getSystemVersion",getUserInfo:"/getUserInfo",updateUserInfo:"/updateUserInfo",updateUserPassword:"/updateUserPassword",getUserList:"/getUserList",addUser:"/addUser",deleteUser:"/deleteUser",updateUserStatus:"/updateUserStatus",getLogSchedulerList:"/getLogSchedulerList"},V="token";function ee(e){I.set(V,e,{expires:7})}function A(){return I.get(V)}function te(){I.remove(V)}const S="/api",k=X.create({baseURL:S});k.interceptors.request.use(e=>{let t=A();return t&&(e.headers["X-Token"]=t),e},e=>{console.log(e)});k.interceptors.response.use(e=>e.data,e=>{console.log(e)});function oe(e){return async function(t={},r){let c=null;t instanceof FormData,c=t;const o=await k.post(e,c,r);return o.code!=0&&w.error(o.msg),o}}function se(){let e={};for(let[t,r]of Object.entries(J))e[t]=oe(r);return e}const $=se();function ot(e){return S+e}class ne{static message(t){return w.closeAll(),w(t)}static success(t){return this.message({message:t,type:"success"})}static warning(t){return this.message({message:t,type:"warning"})}static info(t){return this.message({message:t,type:"info"})}static error(t){return this.message({message:t,type:"error"})}static closeAll(){w.closeAll()}}const re="modulepreload",ae=function(e){return"/"+e},U={},y=function(t,r,c){return!r||r.length===0?t():Promise.all(r.map(o=>{if(o=ae(o),o in U)return;U[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":re,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((d,g)=>{l.addEventListener("load",d),l.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},F=P({id:"user-store",state:()=>({_userInfo:null}),getters:{hasUserInfo:e=>e._userInfo!=null,isAdmin:e=>{if(e._userInfo)return e._userInfo.username=="admin"},userInfo:e=>e._userInfo},actions:{async updateUserInfo(){const e=await $.getUserInfo();e.code==0&&(this._userInfo=e.data)},removeUserInfo(){this._userInfo=null}}}),ue={password:[{message:"\u65E7\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}],new_password:[{message:"\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",required:!0,trigger:"blur"}]},h=(e,t)=>{const r=e.__vccOpts||e;for(const[c,o]of t)r[c]=o;return r},ie={name:"",props:{row:{type:Object,default:null}},components:{},data(){return{form:{password:"",new_password:""},rules:ue}},computed:{},methods:{async getData(){if(this.row){let e={id:this.row.id};const t=await this.$http.function(e);if(t.code!=0)return;let r=t.data;this.form.password=r.password,this.form.new_password=r.new_password}},handleCancel(){this.$emit("on-cancel")},handleSubmit(){this.$refs.form.validate(e=>{if(e)this.confirmSubmit();else return!1})},async confirmSubmit(){let e=this.$loading({fullscreen:!0}),t={password:this.form.password,new_password:this.form.new_password};const r=await this.$http.updateUserPassword(t);r.code==0?(this.$msg.success("\u64CD\u4F5C\u6210\u529F"),this.$emit("on-success")):this.$msg.error(r.msg),this.$nextTick(()=>{e.close()})}},created(){this.getData()}},le={class:"text-center"};function ce(e,t,r,c,o,s){const a=i("el-input"),l=i("el-form-item"),d=i("el-form"),g=i("el-button");return m(),b("div",null,[n(d,{ref:"form",model:o.form,rules:o.rules,"label-width":"80px"},{default:u(()=>[n(l,{label:"\u65E7\u5BC6\u7801",prop:"password"},{default:u(()=>[n(a,{type:"text",modelValue:o.form.password,"onUpdate:modelValue":t[0]||(t[0]=_=>o.form.password=_),placeholder:"\u8BF7\u8F93\u5165\u65E7\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),n(l,{label:"\u65B0\u5BC6\u7801",prop:"new_password"},{default:u(()=>[n(a,{type:"text",modelValue:o.form.new_password,"onUpdate:modelValue":t[1]||(t[1]=_=>o.form.new_password=_),placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),f("div",le,[n(g,{onClick:s.handleCancel},{default:u(()=>[p("\u53D6 \u6D88")]),_:1},8,["onClick"]),n(g,{type:"primary",onClick:s.handleSubmit},{default:u(()=>[p("\u786E \u5B9A")]),_:1},8,["onClick"])])])}const de=h(ie,[["render",ce]]),me={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:de},data(){return{}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91":"\u6DFB\u52A0"},dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{handleClose(){this.dialogVisible=!1},handleOpen(){},handleSuccess(){this.$emit("on-success")}},created(){}};function pe(e,t,r,c,o,s){const a=i("DataForm"),l=i("el-dialog");return m(),E(l,{title:"\u4FEE\u6539\u767B\u5F55\u5BC6\u7801",modelValue:s.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=d=>s.dialogVisible=d),width:"400px",center:"","lock-scroll":!1,"append-to-body":""},{default:u(()=>[s.dialogVisible?(m(),E(a,{key:0,row:r.row,onOnCancel:s.handleClose,onOnSuccess:s.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):v("",!0)]),_:1},8,["modelValue"])}const fe=h(me,[["render",pe]]);const _e={name:"",props:{},components:{},data(){return{version:""}},computed:{},methods:{async getData(){const e=await this.$http.getSystemVersion();this.version=e.data.version}},created(){this.getData()}},he={class:"mo-form-detail about-system"},ge=f("a",{href:"https://pypi.org/project/domain-admin/",target:"_blank"},[f("img",{alt:"Version",src:"https://img.shields.io/pypi/v/domain-admin.svg"})],-1),Ee=f("a",{class:"inline-block",href:"https://github.com/mouday/domain-admin",target:"_blank"},[f("img",{alt:"GitHub stars",src:"https://img.shields.io/github/stars/mouday/domain-admin.svg?style=social"})],-1);function De(e,t,r,c,o,s){const a=i("el-form-item"),l=i("el-form");return m(),b("div",he,[n(l,{ref:"form",model:e.form,"label-width":"130px"},{default:u(()=>[n(a,{label:"\u5F53\u524D\u7248\u672C",prop:"domain"},{default:u(()=>[p(T(o.version),1)]),_:1}),n(a,{label:"\u6700\u65B0\u7248\u672C",prop:"ip"},{default:u(()=>[ge]),_:1}),n(a,{label:"\u7ED9\u6211\u4EEC\u70B9\u8D5E",prop:"connect_status"},{default:u(()=>[Ee]),_:1})]),_:1},8,["model"])])}const be=h(_e,[["render",De]]),ye={name:"",props:{row:{type:Object,default:null},visible:{type:Boolean,default:!1}},emits:["update:visible"],components:{DataForm:be},data(){return{dialogVisible:!1}},computed:{dialogTitle(){return this.row?"\u7F16\u8F91":"\u6DFB\u52A0"},dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{handleClose(){this.dialogVisible=!1},handleOpen(){this.dialogVisible=!0},handleSuccess(){this.handleClose(),this.$emit("on-success")}},created(){}};function we(e,t,r,c,o,s){const a=i("DataForm"),l=i("el-dialog");return m(),E(l,{title:"\u5173\u4E8E Domain Admin",modelValue:s.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=d=>s.dialogVisible=d),width:"400px",center:"","append-to-body":"","lock-scroll":!1},{default:u(()=>[s.dialogVisible?(m(),E(a,{key:0,row:r.row,onOnCancel:s.handleClose,onOnSuccess:s.handleSuccess},null,8,["row","onOnCancel","onOnSuccess"])):v("",!0)]),_:1},8,["modelValue"])}const ve=h(ye,[["render",we]]),Ce={name:"Menu",props:{},components:{UserPaswordEditDataFormDailog:fe,AboutDataFormDailig:ve},data(){return{activeIndex:"",dialogVisible:!1,aboutDialogVisible:!1}},computed:{...R(F,{userInfo:"userInfo",isAdmin:"isAdmin"})},methods:{...j(F,{updateUserInfo:"updateUserInfo",removeUserInfo:"removeUserInfo"}),async getData(){},handleSelect(e){},handleLogoutClick(e){this.removeUserInfo(),te(),this.$router.push({path:"/login"})},handleUpdatePasswordClick(){this.dialogVisible=!0},handleUserPaswordEditClose(){this.dialogVisible=!1},handleUserPaswordEditSuccess(){this.dialogVisible=!1},handleAboutClick(){this.aboutDialogVisible=!0}},created(){this.activeIndex=this.$route.name,this.getData()}},Fe={class:""},Ie={class:"self-center margin-left--auto flex items-center"},Ve=f("img",{src:"https://api.multiavatar.com/domain-admin.png"},null,-1);function ke(e,t,r,c,o,s){const a=i("el-menu-item"),l=i("el-avatar"),d=i("el-dropdown-item"),g=i("el-dropdown-menu"),_=i("el-dropdown"),x=i("el-menu"),O=i("UserPaswordEditDataFormDailog"),L=i("AboutDataFormDailig");return m(),b("div",Fe,[n(x,{"default-active":o.activeIndex,ellipsis:!1,class:"el-menu-demo",mode:"horizontal",router:"","menu-trigger":"click",onSelect:s.handleSelect},{default:u(()=>[n(a,{index:"domain-list"},{default:u(()=>[p("\u57DF\u540D\u7BA1\u7406")]),_:1}),n(a,{index:"user-edit"},{default:u(()=>[p("\u4E2A\u4EBA\u8BBE\u7F6E")]),_:1}),e.isAdmin?(m(),E(a,{key:0,index:"user-admin-list"},{default:u(()=>[p("\u7528\u6237\u7BA1\u7406")]),_:1})):v("",!0),e.isAdmin?(m(),E(a,{key:1,index:"system-list"},{default:u(()=>[p("\u7CFB\u7EDF\u8BBE\u7F6E")]),_:1})):v("",!0),n(a,{index:"log-scheduler-list"},{default:u(()=>[p("\u76D1\u6D4B\u65E5\u5FD7")]),_:1}),f("div",Ie,[n(_,{trigger:"hover"},{dropdown:u(()=>[n(g,null,{default:u(()=>[n(d,{onClick:s.handleUpdatePasswordClick,class:"justify-center"},{default:u(()=>[p("\u4FEE\u6539\u5BC6\u7801")]),_:1},8,["onClick"]),n(d,{onClick:s.handleAboutClick,class:"justify-center"},{default:u(()=>[p("\u5173\u4E8E")]),_:1},8,["onClick"]),n(d,{onClick:s.handleLogoutClick,class:"justify-center"},{default:u(()=>[p("\u9000\u51FA")]),_:1},8,["onClick"])]),_:1})]),default:u(()=>[n(l,{src:e.userInfo&&e.userInfo.avatar_url},{default:u(()=>[Ve]),_:1},8,["src"])]),_:1})])]),_:1},8,["default-active","onSelect"]),n(O,{visible:o.dialogVisible,"onUpdate:visible":t[0]||(t[0]=C=>o.dialogVisible=C),onOnSuccess:s.handleUserPaswordEditSuccess,onOnCancel:s.handleUserPaswordEditClose},null,8,["visible","onOnSuccess","onOnCancel"]),n(L,{visible:o.aboutDialogVisible,"onUpdate:visible":t[1]||(t[1]=C=>o.aboutDialogVisible=C)},null,8,["visible"])])}const Ue=h(Ce,[["render",ke]]),Ae={name:"Footer",props:{},components:{},data(){return{}},computed:{},methods:{async getData(){}},created(){this.getData()}},Se={class:"footer"};function $e(e,t,r,c,o,s){return m(),b("div",Se)}const Be=h(Ae,[["render",$e]]);const xe={name:"index",props:{},components:{Menu:Ue,Footer:Be},data(){return{}},computed:{},methods:{async getData(){}},created(){this.getData()}},Oe={class:"app-layout"};function Le(e,t,r,c,o,s){const a=i("Menu"),l=i("router-view"),d=i("Footer");return m(),b("div",Oe,[n(a),f("div",null,[n(l)]),n(d)])}const Pe=h(xe,[["render",Le]]);const Te={name:"Login",props:{},components:{},data(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}},computed:{},methods:{async getData(){},onSubmit(){this.$refs.form.validate(e=>{if(e)this.confirmSubmit();else return!1})},async confirmSubmit(){const e=await this.$http.login({username:this.form.username,password:this.form.password});if(console.log(e),e.code==0){ee(e.data.token),this.$msg.success("\u767B\u5F55\u6210\u529F");let t="/";this.$route.query.redirect&&(t=this.$route.query.redirect),this.$router.push({path:t})}}},created(){this.getData()}},Re=e=>(N("data-v-5e777eed"),e=e(),H(),e),je={class:"login-container"},qe=Re(()=>f("h3",{class:"title"},"\u767B\u5F55",-1));function Me(e,t,r,c,o,s){const a=i("el-input"),l=i("el-form-item"),d=i("el-form"),g=i("el-button");return m(),b("div",je,[qe,n(d,{class:"",ref:"form",model:o.form,rules:o.rules,"label-width":"auto"},{default:u(()=>[n(l,{label:"",prop:"username"},{default:u(()=>[n(a,{modelValue:o.form.username,"onUpdate:modelValue":t[0]||(t[0]=_=>o.form.username=_),"auto-complete":"off",placeholder:"\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),n(l,{label:"",prop:"password"},{default:u(()=>[n(a,{modelValue:o.form.password,"onUpdate:modelValue":t[1]||(t[1]=_=>o.form.password=_),type:"password","auto-complete":"off",placeholder:"\u5BC6\u7801",onKeypress:q(s.onSubmit,["enter"])},null,8,["modelValue","onKeypress"])]),_:1})]),_:1},8,["model","rules"]),f("div",null,[n(g,{class:"w-full",type:"primary",size:"large",onClick:M(s.onSubmit,["prevent"])},{default:u(()=>[p("\u767B \u5F55")]),_:1},8,["onClick"])])])}const Ne=h(Te,[["render",Me],["__scopeId","data-v-5e777eed"]]),He=[{path:"/login",component:Ne},{path:"/",component:Pe,redirect:"/domain-list",children:[{path:"/domain-list",name:"domain-list",component:()=>y(()=>import("./index.5e17e13d.js"),["js/index.5e17e13d.js","js/vendor-vue.e07d7f7e.js","js/ConnectStatus.c5c1db1b.js","js/vendor-lib.bb870261.js","js/element-plus.93c2f37e.js","js/element-icon.bb5f2c38.js"])},{path:"/system-list",name:"system-list",component:()=>y(()=>import("./index.106187fb.js"),["js/index.106187fb.js","js/vendor-vue.e07d7f7e.js","js/element-icon.bb5f2c38.js","js/vendor-lib.bb870261.js","js/element-plus.93c2f37e.js"])},{path:"/user-edit",name:"user-edit",component:()=>y(()=>import("./index.df476dae.js"),["js/index.df476dae.js","js/vendor-vue.e07d7f7e.js","js/element-icon.bb5f2c38.js","js/vendor-lib.bb870261.js","js/element-plus.93c2f37e.js"])},{path:"/user-admin-list",name:"user-admin-list",component:()=>y(()=>import("./index.e6b8e850.js"),["js/index.e6b8e850.js","js/vendor-vue.e07d7f7e.js","js/element-icon.bb5f2c38.js","js/vendor-lib.bb870261.js","js/element-plus.93c2f37e.js"])},{path:"/log-scheduler-list",name:"log-scheduler-list",component:()=>y(()=>import("./index.44610d76.js"),["js/index.44610d76.js","js/ConnectStatus.c5c1db1b.js","js/vendor-vue.e07d7f7e.js","js/element-icon.bb5f2c38.js","js/vendor-lib.bb870261.js","js/element-plus.93c2f37e.js"])}]}],ze=["/login"];function Ke(e){e.beforeEach(async(t,r,c)=>{let o=A();const s=F();o&&!s.hasUserInfo&&await s.updateUserInfo(),ze.includes(t.path)||s.hasUserInfo?c():c({path:"/login",query:{redirect:t.fullPath}})})}const B=z({history:K(),routes:He});Ke(B);const We=B;const Ye={name:"app",props:{},components:{},data(){return{}},computed:{},methods:{},created(){}};function Qe(e,t,r,c,o,s){const a=i("router-view");return m(),E(a)}const Xe=h(Ye,[["render",Qe]]),D=W(Xe);D.config.globalProperties.$http=$;D.config.globalProperties.$msg=ne;D.use(We);D.use(G,{locale:Z});for(const[e,t]of Object.entries(Q))D.component(e,t);const Ge=Y();D.use(Ge);D.mount("#app");export{h as _,J as d,ot as r,F as u};
