{"version":4,"artifacts":[{"module":{"file":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/index.js","base":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib","base_path":"index.js","canonical":"index","resolution":"ESM","id":"82ab290c02","hash":"82ab290c02105a9550c47c9884f2a054c1a40bb602c4ca3e4befbca0bbe75333","source":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PanelChemistryExtensions = void 0;\nconst tslib_1 = require(\"tslib\");\nconst PanelChemistryExtensions = (0, tslib_1.__importStar)(require(\"./bokeh_extensions/\"));\nexports.PanelChemistryExtensions = PanelChemistryExtensions;\nconst base_1 = require(\"@bokehjs/base\");\n(0, base_1.register_models)(PanelChemistryExtensions);\n//# sourceMappingURL=index.js.map\n","type":"js","dependency_paths":[["./bokeh_extensions/","/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/bokeh_extensions/index.js"]],"dependency_map":[],"exported":[],"externals":[],"shims":[]},"code":{"source":"/* index.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    const tslib_1 = require(\"tslib\");\n    const PanelChemistryExtensions = (0, tslib_1.__importStar)(require(\"86de82b1ae\") /* ./bokeh_extensions/ */);\n    exports.PanelChemistryExtensions = PanelChemistryExtensions;\n    const base_1 = require(\"@bokehjs/base\");\n    (0, base_1.register_models)(PanelChemistryExtensions);\n}\n","min_source":"function _(e,s,t,i,n){i();const o=(0,e(\"tslib\").__importStar)(e(\"86de82b1ae\"));t.PanelChemistryExtensions=o;(0,e(\"@bokehjs/base\").register_models)(o)}\n//# sourceMappingURL=index.min.js.map","min_map":"{\"version\":3,\"sources\":[\"0\"],\"names\":[\"_\",\"require\",\"module\",\"exports\",\"__esModule\",\"__esExport\",\"PanelChemistryExtensions\",\"__importStar\",\"register_models\"],\"mappings\":\"AAAe,SAASA,EAAEC,EAASC,EAAQC,EAASC,EAAYC,GAC5DD,IACA,MACME,GAA2B,EADjBL,EAAQ,SACqBM,cAAcN,EAAQ,eACnEE,EAAQG,yBAA2BA,GAEnC,EADeL,EAAQ,iBACZO,iBAAiBF\",\"file\":\"index.min.js\"}"}},{"module":{"file":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/bokeh_extensions/index.js","base":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib","base_path":"bokeh_extensions/index.js","canonical":"bokeh_extensions/index","resolution":"ESM","id":"86de82b1ae","hash":"86de82b1aecb52bd376eb2196171180926f00db2b15d8ee4f94d97e426837af0","source":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NGLViewer = exports.JSMEEditor = void 0;\nvar jsme_editor_1 = require(\"./jsme_editor\");\nObject.defineProperty(exports, \"JSMEEditor\", { enumerable: true, get: function () { return jsme_editor_1.JSMEEditor; } });\nvar ngl_viewer_1 = require(\"./ngl_viewer\");\nObject.defineProperty(exports, \"NGLViewer\", { enumerable: true, get: function () { return ngl_viewer_1.NGLViewer; } });\n//# sourceMappingURL=index.js.map\n","type":"js","dependency_paths":[["./jsme_editor","/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/bokeh_extensions/jsme_editor.js"],["./ngl_viewer","/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/bokeh_extensions/ngl_viewer.js"]],"dependency_map":[],"exported":[{"type":"bindings","bindings":[[null,"JSMEEditor"]],"module":"./jsme_editor"},{"type":"bindings","bindings":[[null,"NGLViewer"]],"module":"./ngl_viewer"}],"externals":[],"shims":[]},"code":{"source":"/* bokeh_extensions/index.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    var jsme_editor_1 = require(\"62a5ef401e\") /* ./jsme_editor */;\n    __esExport(\"JSMEEditor\", jsme_editor_1.JSMEEditor);\n    var ngl_viewer_1 = require(\"19eceeedfd\") /* ./ngl_viewer */;\n    __esExport(\"NGLViewer\", ngl_viewer_1.NGLViewer);\n}\n","min_source":"function _(e,i,d,r,E){r(),E(\"JSMEEditor\",e(\"62a5ef401e\").JSMEEditor),E(\"NGLViewer\",e(\"19eceeedfd\").NGLViewer)}\n//# sourceMappingURL=index.min.js.map","min_map":"{\"version\":3,\"sources\":[\"0\"],\"names\":[\"_\",\"require\",\"module\",\"exports\",\"__esModule\",\"__esExport\",\"JSMEEditor\",\"NGLViewer\"],\"mappings\":\"AAAgC,SAASA,EAAEC,EAASC,EAAQC,EAASC,EAAYC,GAC7ED,IAEAC,EAAW,aADSJ,EAAQ,cACWK,YAEvCD,EAAW,YADQJ,EAAQ,cACUM\",\"file\":\"index.min.js\"}"}},{"module":{"file":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/bokeh_extensions/jsme_editor.js","base":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib","base_path":"bokeh_extensions/jsme_editor.js","canonical":"bokeh_extensions/jsme_editor","resolution":"ESM","id":"62a5ef401e","hash":"62a5ef401e39bc2cda0f684b17ad24b8cb398af1f23e9f20a4130d67fd1db52f","source":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JSMEEditor = exports.JSMEEditorView = void 0;\n// See https://docs.bokeh.org/en/latest/docs/reference/models/layouts.html\nconst html_box_1 = require(\"@bokehjs/models/layouts/html_box\");\nconst dom_1 = require(\"@bokehjs/core/dom\");\nfunction uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\nconst notSubscribed = \"Not Subscribed\";\nfunction readSDFValue(jsmeElement) {\n    var data = jsmeElement.getMultiSDFstack();\n    var output = \"No multirecords SDF was pasted into the editor \";\n    if (data.length > 0) {\n        output = data.join(\"$$$$\\n\") + \"$$$$\\n\";\n    }\n    return output;\n}\nfunction setModelValue(model, jsmeElement) {\n    console.log(\"setValue - start\", model.value);\n    var value = model.value;\n    if (model.format === \"smiles\") {\n        console.log(\"getting smiles\");\n        value = jsmeElement.smiles();\n        console.log(\"got smiles\");\n    }\n    else if (model.format === \"mol\") {\n        value = jsmeElement.molFile(false);\n    }\n    else if (model.format === \"mol3000\") {\n        value = jsmeElement.molFile(true);\n    }\n    else if (model.format === \"sdf\") {\n        value = readSDFValue(jsmeElement);\n    }\n    else {\n        value = jsmeElement.jmeFile();\n    }\n    if (model.value !== value && value !== null) {\n        console.log(\"setting value\", value);\n        model.value = value;\n    }\n    console.log(\"setValue - end\", model.value);\n}\nfunction setModelValues(model, jsmeElement) {\n    console.log(\"setValues - start\");\n    setModelValue(model, jsmeElement);\n    setOtherModelValues(model, jsmeElement);\n    console.log(\"setValues - end\");\n}\nfunction resetOtherModelValues(model, jsmeElement) {\n    if (!model.subscriptions.includes(\"jme\")) {\n        model.jme = notSubscribed;\n    }\n    if (!model.subscriptions.includes(\"smiles\")) {\n        model.smiles = notSubscribed;\n    }\n    if (!model.subscriptions.includes(\"mol\")) {\n        model.mol = notSubscribed;\n    }\n    if (!model.subscriptions.includes(\"mol3000\")) {\n        model.mol3000 = notSubscribed;\n    }\n    if (!model.subscriptions.includes(\"sdf\")) {\n        model.sdf = notSubscribed;\n    }\n    setModelValues(model, jsmeElement);\n}\nfunction cleanValue(value) {\n    if (value === null) {\n        return \"null\";\n    }\n    else {\n        return value;\n    }\n}\nfunction setOtherModelValues(model, jsmeElement) {\n    console.log(\"setOtherValues - start\");\n    if (model.subscriptions.includes(\"jme\")) {\n        model.jme = cleanValue(jsmeElement.jmeFile());\n    }\n    if (model.subscriptions.includes(\"smiles\")) {\n        model.smiles = cleanValue(jsmeElement.smiles());\n    }\n    if (model.subscriptions.includes(\"mol\")) {\n        model.mol = cleanValue(jsmeElement.molFile(false));\n    }\n    if (model.subscriptions.includes(\"mol3000\")) {\n        model.mol3000 = cleanValue(jsmeElement.molFile(true));\n    }\n    if (model.subscriptions.includes(\"sdf\")) {\n        model.sdf = cleanValue(readSDFValue(jsmeElement));\n    }\n    console.log(\"setOtherValues - end\");\n}\n// The view of the Bokeh extension/ HTML element\n// Here you can define how to render the model as well as react to model changes or View events.\nclass JSMEEditorView extends html_box_1.HTMLBoxView {\n    constructor() {\n        super(...arguments);\n        this.JSME = window.JSApplet.JSME;\n        this.valueChanging = true;\n    }\n    connect_signals() {\n        super.connect_signals();\n        this.connect(this.model.properties.value.change, () => {\n            console.log(\"value change\", this.model.value);\n            if (!this.valueChanging) {\n                if (this.model.value === \"\") {\n                    this.jsmeElement.reset();\n                }\n                else {\n                    this.jsmeElement.readGenericMolecularInput(this.model.value);\n                }\n            }\n        });\n        this.connect(this.model.properties.format.change, () => {\n            console.log(\"format change\", this.model.format);\n            setModelValue(this.model, this.jsmeElement);\n        });\n        this.connect(this.model.properties.subscriptions.change, () => {\n            console.log(\"subscriptions change\", this.model.subscriptions);\n            resetOtherModelValues(this.model, this.jsmeElement);\n        });\n        this.connect(this.model.properties.options.change, () => {\n            console.log(\"options change\", this.model.options);\n            this.setJSMEOptions();\n        });\n        this.connect(this.model.properties.guicolor.change, () => {\n            console.log(\"options change\", this.model.options);\n            this.setGUIColor();\n        });\n    }\n    render() {\n        console.log(\"render - start\");\n        super.render();\n        const id = \"jsme-\" + uuidv4();\n        const container = (0, dom_1.div)({ class: \"jsme-editor\", id: id });\n        this.el.appendChild(container);\n        this.jsmeElement = new this.JSME(id, this.getHeight(), this.getWidth(), {\n            \"options\": this.model.options.join(\",\"),\n            \"guicolor\": this.model.guicolor\n        });\n        this.jsmeElement.readGenericMolecularInput(this.model.value);\n        resetOtherModelValues(this.model, this.jsmeElement);\n        setModelValues(this.model, this.jsmeElement);\n        const this_ = this;\n        function showEvent(event) {\n            console.log(\"event\", event);\n            this_.valueChanging = true;\n            setModelValues(this_.model, this_.jsmeElement);\n            this_.valueChanging = false;\n        }\n        this.jsmeElement.setAfterStructureModifiedCallback(showEvent);\n        console.log(\"render - end\");\n    }\n    setGUIColor() {\n        console.log(\"setGUIColor\", this.model.guicolor);\n        this.jsmeElement.setUserInterfaceBackgroundColor(this.model.guicolor);\n    }\n    setJSMEOptions() {\n        const options = this.model.options.join(\",\");\n        console.log(\"setJSMEOptions\", options);\n        this.jsmeElement.options(options);\n    }\n    getHeight() {\n        if ((this.model.sizing_mode === \"stretch_height\" || this.model.sizing_mode === \"stretch_both\") && this.el.style.height) {\n            return this.el.style.height;\n        }\n        else if (this.model.height) {\n            return this.model.height.toString() + \"px\";\n        }\n        else {\n            return \"100px\";\n        }\n    }\n    getWidth() {\n        if ((this.model.sizing_mode === \"stretch_width\" || this.model.sizing_mode === \"stretch_both\") && this.el.style.width) {\n            return this.el.style.width;\n        }\n        else if (this.model.width) {\n            return this.model.width.toString() + \"px\";\n        }\n        else {\n            return \"100px\";\n        }\n    }\n    resizeJSMEElement() {\n        this.jsmeElement.setSize(this.getWidth(), this.getHeight());\n    }\n    after_layout() {\n        super.after_layout();\n        this.resizeJSMEElement();\n    }\n}\nexports.JSMEEditorView = JSMEEditorView;\nJSMEEditorView.__name__ = \"JSMEEditorView\";\n// The Bokeh .ts model corresponding to the Bokeh .py model\nclass JSMEEditor extends html_box_1.HTMLBox {\n    constructor(attrs) {\n        super(attrs);\n    }\n    static init_JSMEEditor() {\n        this.prototype.default_view = JSMEEditorView;\n        this.define(({ String, Array }) => ({\n            value: [String, \"\"],\n            format: [String, \"\"],\n            options: [Array(String), []],\n            jme: [String, \"\"],\n            smiles: [String, \"\"],\n            mol: [String, \"\"],\n            mol3000: [String, \"\"],\n            sdf: [String, \"\"],\n            subscriptions: [Array(String), []],\n            guicolor: [String, \"#c0c0c0\"],\n        }));\n    }\n}\nexports.JSMEEditor = JSMEEditor;\nJSMEEditor.__name__ = \"JSMEEditor\";\nJSMEEditor.__module__ = \"panel_chemistry.bokeh_extensions.jsme_editor\";\nJSMEEditor.init_JSMEEditor();\n//# sourceMappingURL=jsme_editor.js.map\n","type":"js","dependency_paths":[],"dependency_map":[],"exported":[{"type":"named","name":"JSMEEditorView"},{"type":"named","name":"JSMEEditor"}],"externals":[],"shims":[]},"code":{"source":"/* bokeh_extensions/jsme_editor.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    // See https://docs.bokeh.org/en/latest/docs/reference/models/layouts.html\n    const html_box_1 = require(\"@bokehjs/models/layouts/html_box\");\n    const dom_1 = require(\"@bokehjs/core/dom\");\n    function uuidv4() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n    const notSubscribed = \"Not Subscribed\";\n    function readSDFValue(jsmeElement) {\n        var data = jsmeElement.getMultiSDFstack();\n        var output = \"No multirecords SDF was pasted into the editor \";\n        if (data.length > 0) {\n            output = data.join(\"$$$$\\n\") + \"$$$$\\n\";\n        }\n        return output;\n    }\n    function setModelValue(model, jsmeElement) {\n        console.log(\"setValue - start\", model.value);\n        var value = model.value;\n        if (model.format === \"smiles\") {\n            console.log(\"getting smiles\");\n            value = jsmeElement.smiles();\n            console.log(\"got smiles\");\n        }\n        else if (model.format === \"mol\") {\n            value = jsmeElement.molFile(false);\n        }\n        else if (model.format === \"mol3000\") {\n            value = jsmeElement.molFile(true);\n        }\n        else if (model.format === \"sdf\") {\n            value = readSDFValue(jsmeElement);\n        }\n        else {\n            value = jsmeElement.jmeFile();\n        }\n        if (model.value !== value && value !== null) {\n            console.log(\"setting value\", value);\n            model.value = value;\n        }\n        console.log(\"setValue - end\", model.value);\n    }\n    function setModelValues(model, jsmeElement) {\n        console.log(\"setValues - start\");\n        setModelValue(model, jsmeElement);\n        setOtherModelValues(model, jsmeElement);\n        console.log(\"setValues - end\");\n    }\n    function resetOtherModelValues(model, jsmeElement) {\n        if (!model.subscriptions.includes(\"jme\")) {\n            model.jme = notSubscribed;\n        }\n        if (!model.subscriptions.includes(\"smiles\")) {\n            model.smiles = notSubscribed;\n        }\n        if (!model.subscriptions.includes(\"mol\")) {\n            model.mol = notSubscribed;\n        }\n        if (!model.subscriptions.includes(\"mol3000\")) {\n            model.mol3000 = notSubscribed;\n        }\n        if (!model.subscriptions.includes(\"sdf\")) {\n            model.sdf = notSubscribed;\n        }\n        setModelValues(model, jsmeElement);\n    }\n    function cleanValue(value) {\n        if (value === null) {\n            return \"null\";\n        }\n        else {\n            return value;\n        }\n    }\n    function setOtherModelValues(model, jsmeElement) {\n        console.log(\"setOtherValues - start\");\n        if (model.subscriptions.includes(\"jme\")) {\n            model.jme = cleanValue(jsmeElement.jmeFile());\n        }\n        if (model.subscriptions.includes(\"smiles\")) {\n            model.smiles = cleanValue(jsmeElement.smiles());\n        }\n        if (model.subscriptions.includes(\"mol\")) {\n            model.mol = cleanValue(jsmeElement.molFile(false));\n        }\n        if (model.subscriptions.includes(\"mol3000\")) {\n            model.mol3000 = cleanValue(jsmeElement.molFile(true));\n        }\n        if (model.subscriptions.includes(\"sdf\")) {\n            model.sdf = cleanValue(readSDFValue(jsmeElement));\n        }\n        console.log(\"setOtherValues - end\");\n    }\n    // The view of the Bokeh extension/ HTML element\n    // Here you can define how to render the model as well as react to model changes or View events.\n    class JSMEEditorView extends html_box_1.HTMLBoxView {\n        constructor() {\n            super(...arguments);\n            this.JSME = window.JSApplet.JSME;\n            this.valueChanging = true;\n        }\n        connect_signals() {\n            super.connect_signals();\n            this.connect(this.model.properties.value.change, () => {\n                console.log(\"value change\", this.model.value);\n                if (!this.valueChanging) {\n                    if (this.model.value === \"\") {\n                        this.jsmeElement.reset();\n                    }\n                    else {\n                        this.jsmeElement.readGenericMolecularInput(this.model.value);\n                    }\n                }\n            });\n            this.connect(this.model.properties.format.change, () => {\n                console.log(\"format change\", this.model.format);\n                setModelValue(this.model, this.jsmeElement);\n            });\n            this.connect(this.model.properties.subscriptions.change, () => {\n                console.log(\"subscriptions change\", this.model.subscriptions);\n                resetOtherModelValues(this.model, this.jsmeElement);\n            });\n            this.connect(this.model.properties.options.change, () => {\n                console.log(\"options change\", this.model.options);\n                this.setJSMEOptions();\n            });\n            this.connect(this.model.properties.guicolor.change, () => {\n                console.log(\"options change\", this.model.options);\n                this.setGUIColor();\n            });\n        }\n        render() {\n            console.log(\"render - start\");\n            super.render();\n            const id = \"jsme-\" + uuidv4();\n            const container = (0, dom_1.div)({ class: \"jsme-editor\", id: id });\n            this.el.appendChild(container);\n            this.jsmeElement = new this.JSME(id, this.getHeight(), this.getWidth(), {\n                \"options\": this.model.options.join(\",\"),\n                \"guicolor\": this.model.guicolor\n            });\n            this.jsmeElement.readGenericMolecularInput(this.model.value);\n            resetOtherModelValues(this.model, this.jsmeElement);\n            setModelValues(this.model, this.jsmeElement);\n            const this_ = this;\n            function showEvent(event) {\n                console.log(\"event\", event);\n                this_.valueChanging = true;\n                setModelValues(this_.model, this_.jsmeElement);\n                this_.valueChanging = false;\n            }\n            this.jsmeElement.setAfterStructureModifiedCallback(showEvent);\n            console.log(\"render - end\");\n        }\n        setGUIColor() {\n            console.log(\"setGUIColor\", this.model.guicolor);\n            this.jsmeElement.setUserInterfaceBackgroundColor(this.model.guicolor);\n        }\n        setJSMEOptions() {\n            const options = this.model.options.join(\",\");\n            console.log(\"setJSMEOptions\", options);\n            this.jsmeElement.options(options);\n        }\n        getHeight() {\n            if ((this.model.sizing_mode === \"stretch_height\" || this.model.sizing_mode === \"stretch_both\") && this.el.style.height) {\n                return this.el.style.height;\n            }\n            else if (this.model.height) {\n                return this.model.height.toString() + \"px\";\n            }\n            else {\n                return \"100px\";\n            }\n        }\n        getWidth() {\n            if ((this.model.sizing_mode === \"stretch_width\" || this.model.sizing_mode === \"stretch_both\") && this.el.style.width) {\n                return this.el.style.width;\n            }\n            else if (this.model.width) {\n                return this.model.width.toString() + \"px\";\n            }\n            else {\n                return \"100px\";\n            }\n        }\n        resizeJSMEElement() {\n            this.jsmeElement.setSize(this.getWidth(), this.getHeight());\n        }\n        after_layout() {\n            super.after_layout();\n            this.resizeJSMEElement();\n        }\n    }\n    exports.JSMEEditorView = JSMEEditorView;\n    JSMEEditorView.__name__ = \"JSMEEditorView\";\n    // The Bokeh .ts model corresponding to the Bokeh .py model\n    class JSMEEditor extends html_box_1.HTMLBox {\n        constructor(attrs) {\n            super(attrs);\n        }\n        static init_JSMEEditor() {\n            this.prototype.default_view = JSMEEditorView;\n            this.define(({ String, Array }) => ({\n                value: [String, \"\"],\n                format: [String, \"\"],\n                options: [Array(String), []],\n                jme: [String, \"\"],\n                smiles: [String, \"\"],\n                mol: [String, \"\"],\n                mol3000: [String, \"\"],\n                sdf: [String, \"\"],\n                subscriptions: [Array(String), []],\n                guicolor: [String, \"#c0c0c0\"],\n            }));\n        }\n    }\n    exports.JSMEEditor = JSMEEditor;\n    JSMEEditor.__name__ = \"JSMEEditor\";\n    JSMEEditor.__module__ = \"panel_chemistry.bokeh_extensions.jsme_editor\";\n    JSMEEditor.init_JSMEEditor();\n}\n","min_source":"function _(e,s,t,o,i){o();const l=e(\"@bokehjs/models/layouts/html_box\"),n=e(\"@bokehjs/core/dom\");const r=\"Not Subscribed\";function h(e){var s=e.getMultiSDFstack(),t=\"No multirecords SDF was pasted into the editor \";return s.length>0&&(t=s.join(\"$$$$\\n\")+\"$$$$\\n\"),t}function c(e,s){console.log(\"setValue - start\",e.value);var t=e.value;\"smiles\"===e.format?(console.log(\"getting smiles\"),t=s.smiles(),console.log(\"got smiles\")):t=\"mol\"===e.format?s.molFile(!1):\"mol3000\"===e.format?s.molFile(!0):\"sdf\"===e.format?h(s):s.jmeFile(),e.value!==t&&null!==t&&(console.log(\"setting value\",t),e.value=t),console.log(\"setValue - end\",e.value)}function m(e,s){console.log(\"setValues - start\"),c(e,s),function(e,s){console.log(\"setOtherValues - start\"),e.subscriptions.includes(\"jme\")&&(e.jme=u(s.jmeFile()));e.subscriptions.includes(\"smiles\")&&(e.smiles=u(s.smiles()));e.subscriptions.includes(\"mol\")&&(e.mol=u(s.molFile(!1)));e.subscriptions.includes(\"mol3000\")&&(e.mol3000=u(s.molFile(!0)));e.subscriptions.includes(\"sdf\")&&(e.sdf=u(h(s)));console.log(\"setOtherValues - end\")}(e,s),console.log(\"setValues - end\")}function d(e,s){e.subscriptions.includes(\"jme\")||(e.jme=r),e.subscriptions.includes(\"smiles\")||(e.smiles=r),e.subscriptions.includes(\"mol\")||(e.mol=r),e.subscriptions.includes(\"mol3000\")||(e.mol3000=r),e.subscriptions.includes(\"sdf\")||(e.sdf=r),m(e,s)}function u(e){return null===e?\"null\":e}class a extends l.HTMLBoxView{constructor(){super(...arguments),this.JSME=window.JSApplet.JSME,this.valueChanging=!0}connect_signals(){super.connect_signals(),this.connect(this.model.properties.value.change,(()=>{console.log(\"value change\",this.model.value),this.valueChanging||(\"\"===this.model.value?this.jsmeElement.reset():this.jsmeElement.readGenericMolecularInput(this.model.value))})),this.connect(this.model.properties.format.change,(()=>{console.log(\"format change\",this.model.format),c(this.model,this.jsmeElement)})),this.connect(this.model.properties.subscriptions.change,(()=>{console.log(\"subscriptions change\",this.model.subscriptions),d(this.model,this.jsmeElement)})),this.connect(this.model.properties.options.change,(()=>{console.log(\"options change\",this.model.options),this.setJSMEOptions()})),this.connect(this.model.properties.guicolor.change,(()=>{console.log(\"options change\",this.model.options),this.setGUIColor()}))}render(){console.log(\"render - start\"),super.render();const e=\"jsme-\"+\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,(function(e){var s=16*Math.random()|0;return(\"x\"==e?s:3&s|8).toString(16)})),s=(0,n.div)({class:\"jsme-editor\",id:e});this.el.appendChild(s),this.jsmeElement=new this.JSME(e,this.getHeight(),this.getWidth(),{options:this.model.options.join(\",\"),guicolor:this.model.guicolor}),this.jsmeElement.readGenericMolecularInput(this.model.value),d(this.model,this.jsmeElement),m(this.model,this.jsmeElement);const t=this;this.jsmeElement.setAfterStructureModifiedCallback((function(e){console.log(\"event\",e),t.valueChanging=!0,m(t.model,t.jsmeElement),t.valueChanging=!1})),console.log(\"render - end\")}setGUIColor(){console.log(\"setGUIColor\",this.model.guicolor),this.jsmeElement.setUserInterfaceBackgroundColor(this.model.guicolor)}setJSMEOptions(){const e=this.model.options.join(\",\");console.log(\"setJSMEOptions\",e),this.jsmeElement.options(e)}getHeight(){return\"stretch_height\"!==this.model.sizing_mode&&\"stretch_both\"!==this.model.sizing_mode||!this.el.style.height?this.model.height?this.model.height.toString()+\"px\":\"100px\":this.el.style.height}getWidth(){return\"stretch_width\"!==this.model.sizing_mode&&\"stretch_both\"!==this.model.sizing_mode||!this.el.style.width?this.model.width?this.model.width.toString()+\"px\":\"100px\":this.el.style.width}resizeJSMEElement(){this.jsmeElement.setSize(this.getWidth(),this.getHeight())}after_layout(){super.after_layout(),this.resizeJSMEElement()}}t.JSMEEditorView=a,a.__name__=\"JSMEEditorView\";class g extends l.HTMLBox{constructor(e){super(e)}static init_JSMEEditor(){this.prototype.default_view=a,this.define((({String:e,Array:s})=>({value:[e,\"\"],format:[e,\"\"],options:[s(e),[]],jme:[e,\"\"],smiles:[e,\"\"],mol:[e,\"\"],mol3000:[e,\"\"],sdf:[e,\"\"],subscriptions:[s(e),[]],guicolor:[e,\"#c0c0c0\"]})))}}t.JSMEEditor=g,g.__name__=\"JSMEEditor\",g.__module__=\"panel_chemistry.bokeh_extensions.jsme_editor\",g.init_JSMEEditor()}\n//# sourceMappingURL=jsme_editor.min.js.map","min_map":"{\"version\":3,\"sources\":[\"0\"],\"names\":[\"_\",\"require\",\"module\",\"exports\",\"__esModule\",\"__esExport\",\"html_box_1\",\"dom_1\",\"notSubscribed\",\"readSDFValue\",\"jsmeElement\",\"data\",\"getMultiSDFstack\",\"output\",\"length\",\"join\",\"setModelValue\",\"model\",\"console\",\"log\",\"value\",\"format\",\"smiles\",\"molFile\",\"jmeFile\",\"setModelValues\",\"subscriptions\",\"includes\",\"jme\",\"cleanValue\",\"mol\",\"mol3000\",\"sdf\",\"setOtherModelValues\",\"resetOtherModelValues\",\"JSMEEditorView\",\"HTMLBoxView\",\"constructor\",\"super\",\"arguments\",\"this\",\"JSME\",\"window\",\"JSApplet\",\"valueChanging\",\"connect_signals\",\"connect\",\"properties\",\"change\",\"reset\",\"readGenericMolecularInput\",\"options\",\"setJSMEOptions\",\"guicolor\",\"setGUIColor\",\"render\",\"id\",\"replace\",\"c\",\"r\",\"Math\",\"random\",\"toString\",\"container\",\"div\",\"class\",\"el\",\"appendChild\",\"getHeight\",\"getWidth\",\"this_\",\"setAfterStructureModifiedCallback\",\"event\",\"setUserInterfaceBackgroundColor\",\"sizing_mode\",\"style\",\"height\",\"width\",\"resizeJSMEElement\",\"setSize\",\"after_layout\",\"__name__\",\"JSMEEditor\",\"HTMLBox\",\"attrs\",\"static\",\"prototype\",\"default_view\",\"define\",\"String\",\"Array\",\"__module__\",\"init_JSMEEditor\"],\"mappings\":\"AAAsC,SAASA,EAAEC,EAASC,EAAQC,EAASC,EAAYC,GACnFD,IAEA,MAAME,EAAaL,EAAQ,oCACrBM,EAAQN,EAAQ,qBAOtB,MAAMO,EAAgB,iBACtB,SAASC,EAAaC,GAClB,IAAIC,EAAOD,EAAYE,mBACnBC,EAAS,kDAIb,OAHIF,EAAKG,OAAS,IACdD,EAASF,EAAKI,KAAK,UAAY,UAE5BF,EAEX,SAASG,EAAcC,EAAOP,GAC1BQ,QAAQC,IAAI,mBAAoBF,EAAMG,OACtC,IAAIA,EAAQH,EAAMG,MACG,WAAjBH,EAAMI,QACNH,QAAQC,IAAI,kBACZC,EAAQV,EAAYY,SACpBJ,QAAQC,IAAI,eAGZC,EADsB,QAAjBH,EAAMI,OACHX,EAAYa,SAAQ,GAEN,YAAjBN,EAAMI,OACHX,EAAYa,SAAQ,GAEN,QAAjBN,EAAMI,OACHZ,EAAaC,GAGbA,EAAYc,UAEpBP,EAAMG,QAAUA,GAAmB,OAAVA,IACzBF,QAAQC,IAAI,gBAAiBC,GAC7BH,EAAMG,MAAQA,GAElBF,QAAQC,IAAI,iBAAkBF,EAAMG,OAExC,SAASK,EAAeR,EAAOP,GAC3BQ,QAAQC,IAAI,qBACZH,EAAcC,EAAOP,GA8BzB,SAA6BO,EAAOP,GAChCQ,QAAQC,IAAI,0BACRF,EAAMS,cAAcC,SAAS,SAC7BV,EAAMW,IAAMC,EAAWnB,EAAYc,YAEnCP,EAAMS,cAAcC,SAAS,YAC7BV,EAAMK,OAASO,EAAWnB,EAAYY,WAEtCL,EAAMS,cAAcC,SAAS,SAC7BV,EAAMa,IAAMD,EAAWnB,EAAYa,SAAQ,KAE3CN,EAAMS,cAAcC,SAAS,aAC7BV,EAAMc,QAAUF,EAAWnB,EAAYa,SAAQ,KAE/CN,EAAMS,cAAcC,SAAS,SAC7BV,EAAMe,IAAMH,EAAWpB,EAAaC,KAExCQ,QAAQC,IAAI,wBA9CZc,CAAoBhB,EAAOP,GAC3BQ,QAAQC,IAAI,mBAEhB,SAASe,EAAsBjB,EAAOP,GAC7BO,EAAMS,cAAcC,SAAS,SAC9BV,EAAMW,IAAMpB,GAEXS,EAAMS,cAAcC,SAAS,YAC9BV,EAAMK,OAASd,GAEdS,EAAMS,cAAcC,SAAS,SAC9BV,EAAMa,IAAMtB,GAEXS,EAAMS,cAAcC,SAAS,aAC9BV,EAAMc,QAAUvB,GAEfS,EAAMS,cAAcC,SAAS,SAC9BV,EAAMe,IAAMxB,GAEhBiB,EAAeR,EAAOP,GAE1B,SAASmB,EAAWT,GAChB,OAAc,OAAVA,EACO,OAGAA,EAwBf,MAAMe,UAAuB7B,EAAW8B,YACpCC,cACIC,SAASC,WACTC,KAAKC,KAAOC,OAAOC,SAASF,KAC5BD,KAAKI,eAAgB,EAEzBC,kBACIP,MAAMO,kBACNL,KAAKM,QAAQN,KAAKvB,MAAM8B,WAAW3B,MAAM4B,QAAQ,KAC7C9B,QAAQC,IAAI,eAAgBqB,KAAKvB,MAAMG,OAClCoB,KAAKI,gBACmB,KAArBJ,KAAKvB,MAAMG,MACXoB,KAAK9B,YAAYuC,QAGjBT,KAAK9B,YAAYwC,0BAA0BV,KAAKvB,MAAMG,WAIlEoB,KAAKM,QAAQN,KAAKvB,MAAM8B,WAAW1B,OAAO2B,QAAQ,KAC9C9B,QAAQC,IAAI,gBAAiBqB,KAAKvB,MAAMI,QACxCL,EAAcwB,KAAKvB,MAAOuB,KAAK9B,gBAEnC8B,KAAKM,QAAQN,KAAKvB,MAAM8B,WAAWrB,cAAcsB,QAAQ,KACrD9B,QAAQC,IAAI,uBAAwBqB,KAAKvB,MAAMS,eAC/CQ,EAAsBM,KAAKvB,MAAOuB,KAAK9B,gBAE3C8B,KAAKM,QAAQN,KAAKvB,MAAM8B,WAAWI,QAAQH,QAAQ,KAC/C9B,QAAQC,IAAI,iBAAkBqB,KAAKvB,MAAMkC,SACzCX,KAAKY,oBAETZ,KAAKM,QAAQN,KAAKvB,MAAM8B,WAAWM,SAASL,QAAQ,KAChD9B,QAAQC,IAAI,iBAAkBqB,KAAKvB,MAAMkC,SACzCX,KAAKc,iBAGbC,SACIrC,QAAQC,IAAI,kBACZmB,MAAMiB,SACN,MAAMC,EAAK,QApIR,uCAAuCC,QAAQ,SAAS,SAAUC,GACrE,IAAIC,EAAoB,GAAhBC,KAAKC,SAAgB,EAC7B,OADyC,KAALH,EAAWC,EAAS,EAAJA,EAAU,GACrDG,SAAS,OAmIZC,GAAY,EAAIxD,EAAMyD,KAAK,CAAEC,MAAO,cAAeT,GAAIA,IAC7DhB,KAAK0B,GAAGC,YAAYJ,GACpBvB,KAAK9B,YAAc,IAAI8B,KAAKC,KAAKe,EAAIhB,KAAK4B,YAAa5B,KAAK6B,WAAY,CACpElB,QAAWX,KAAKvB,MAAMkC,QAAQpC,KAAK,KACnCsC,SAAYb,KAAKvB,MAAMoC,WAE3Bb,KAAK9B,YAAYwC,0BAA0BV,KAAKvB,MAAMG,OACtDc,EAAsBM,KAAKvB,MAAOuB,KAAK9B,aACvCe,EAAee,KAAKvB,MAAOuB,KAAK9B,aAChC,MAAM4D,EAAQ9B,KAOdA,KAAK9B,YAAY6D,mCANjB,SAAmBC,GACftD,QAAQC,IAAI,QAASqD,GACrBF,EAAM1B,eAAgB,EACtBnB,EAAe6C,EAAMrD,MAAOqD,EAAM5D,aAClC4D,EAAM1B,eAAgB,KAG1B1B,QAAQC,IAAI,gBAEhBmC,cACIpC,QAAQC,IAAI,cAAeqB,KAAKvB,MAAMoC,UACtCb,KAAK9B,YAAY+D,gCAAgCjC,KAAKvB,MAAMoC,UAEhED,iBACI,MAAMD,EAAUX,KAAKvB,MAAMkC,QAAQpC,KAAK,KACxCG,QAAQC,IAAI,iBAAkBgC,GAC9BX,KAAK9B,YAAYyC,QAAQA,GAE7BiB,YACI,MAAgC,mBAA3B5B,KAAKvB,MAAMyD,aAA+D,iBAA3BlC,KAAKvB,MAAMyD,cAAmClC,KAAK0B,GAAGS,MAAMC,OAGvGpC,KAAKvB,MAAM2D,OACTpC,KAAKvB,MAAM2D,OAAOd,WAAa,KAG/B,QANAtB,KAAK0B,GAAGS,MAAMC,OAS7BP,WACI,MAAgC,kBAA3B7B,KAAKvB,MAAMyD,aAA8D,iBAA3BlC,KAAKvB,MAAMyD,cAAmClC,KAAK0B,GAAGS,MAAME,MAGtGrC,KAAKvB,MAAM4D,MACTrC,KAAKvB,MAAM4D,MAAMf,WAAa,KAG9B,QANAtB,KAAK0B,GAAGS,MAAME,MAS7BC,oBACItC,KAAK9B,YAAYqE,QAAQvC,KAAK6B,WAAY7B,KAAK4B,aAEnDY,eACI1C,MAAM0C,eACNxC,KAAKsC,qBAGb3E,EAAQgC,eAAiBA,EACzBA,EAAe8C,SAAW,iBAE1B,MAAMC,UAAmB5E,EAAW6E,QAChC9C,YAAY+C,GACR9C,MAAM8C,GAEVC,yBACI7C,KAAK8C,UAAUC,aAAepD,EAC9BK,KAAKgD,QAAO,EAAGC,OAAAA,EAAQC,MAAAA,MAAY,CAC/BtE,MAAO,CAACqE,EAAQ,IAChBpE,OAAQ,CAACoE,EAAQ,IACjBtC,QAAS,CAACuC,EAAMD,GAAS,IACzB7D,IAAK,CAAC6D,EAAQ,IACdnE,OAAQ,CAACmE,EAAQ,IACjB3D,IAAK,CAAC2D,EAAQ,IACd1D,QAAS,CAAC0D,EAAQ,IAClBzD,IAAK,CAACyD,EAAQ,IACd/D,cAAe,CAACgE,EAAMD,GAAS,IAC/BpC,SAAU,CAACoC,EAAQ,gBAI/BtF,EAAQ+E,WAAaA,EACrBA,EAAWD,SAAW,aACtBC,EAAWS,WAAa,+CACxBT,EAAWU\",\"file\":\"jsme_editor.min.js\"}"}},{"module":{"file":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib/bokeh_extensions/ngl_viewer.js","base":"/home/jovyan/repos/private/awesome-panel/panel-chemistry/src/panel_chemistry/dist/lib","base_path":"bokeh_extensions/ngl_viewer.js","canonical":"bokeh_extensions/ngl_viewer","resolution":"ESM","id":"19eceeedfd","hash":"19eceeedfd1f51cd358536f22f955b6abf7952745a7c75287dc23071042f3e59","source":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NGLViewer = exports.NGLViewerView = void 0;\nconst html_box_1 = require(\"@bokehjs/models/layouts/html_box\");\nclass NGLViewerView extends html_box_1.HTMLBoxView {\n    connect_signals() {\n        super.connect_signals();\n        this.connect(this.model.properties.object.change, this.updateStage);\n        this.connect(this.model.properties.extension.change, this.updateStage);\n        this.connect(this.model.properties.representation.change, this.updateStage);\n        this.connect(this.model.properties.color_scheme.change, this.updateParameters);\n        this.connect(this.model.properties.custom_color_scheme.change, this.updateParameters);\n        this.connect(this.model.properties.effect.change, this.updateEffect);\n        this.connect(this.model.properties.background.change, this.setBackgroundcolor);\n    }\n    render() {\n        super.render();\n        this.el.id = \"viewport\";\n        const wn = window;\n        const ngl = wn.NGL;\n        this._stage = new ngl.Stage(this.el);\n        this.setBackgroundcolor();\n        const stage = this._stage;\n        this.updateStage();\n        window.addEventListener(\"resize\", function () {\n            stage.handleResize();\n        }, false);\n    }\n    setBackgroundcolor() {\n        console.log(this.model.background);\n        this._stage.setParameters({ backgroundColor: this.model.background });\n    }\n    after_layout() {\n        super.after_layout();\n        this._stage.handleResize();\n    }\n    updateEffect() {\n        if (this.model.effect === \"spin\") {\n            this._stage.setSpin(true);\n        }\n        else if (this.model.effect === \"rock\") {\n            this._stage.setRock(true);\n        }\n        else {\n            this._stage.setSpin(false);\n            this._stage.setRock(false);\n        }\n    }\n    getParameters() {\n        if (this.model.color_scheme === \"custom\") {\n            var list = this.model.custom_color_scheme;\n            var scheme = NGL.ColormakerRegistry.addSelectionScheme(list, \"new scheme\");\n            return { color: scheme };\n        }\n        else {\n            return { colorScheme: this.model.color_scheme };\n        }\n    }\n    updateParameters() {\n        const parameters = this.getParameters();\n        try {\n            this._stage.compList[0].reprList[0].setParameters(parameters);\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n    updateStage() {\n        const model = this.model;\n        this._stage.removeAllComponents();\n        if (model.object === \"\") {\n            return;\n        }\n        const parameters = this.getParameters();\n        function finish(o) {\n            o.addRepresentation(model.representation, parameters);\n            o.autoView();\n        }\n        if (model.extension !== \"\") {\n            this._stage.loadFile(new Blob([model.object], { type: 'text/plain' }), { ext: model.extension }).then(finish);\n        }\n        else if (model.object.includes(\"://\")) {\n            this._stage.loadFile(model.object).then(finish);\n        }\n        else {\n            this._stage.loadFile(\"rcsb://\" + model.object).then(finish);\n        }\n        // this.updateColor()\n        this.updateEffect();\n    }\n}\nexports.NGLViewerView = NGLViewerView;\nNGLViewerView.__name__ = \"NGLViewerView\";\nclass NGLViewer extends html_box_1.HTMLBox {\n    constructor(attrs) {\n        super(attrs);\n    }\n    static init_NGLViewer() {\n        this.prototype.default_view = NGLViewerView;\n        this.define(({ String, Any }) => ({\n            object: [String, \"\"],\n            extension: [String, \"\"],\n            representation: [String, \"ribbon\"],\n            color_scheme: [String, \"chainid\"],\n            custom_color_scheme: [Any, \"chainid\"],\n            effect: [String, \"\"],\n        }));\n        this.override({\n            height: 400,\n            width: 600\n        });\n    }\n}\nexports.NGLViewer = NGLViewer;\nNGLViewer.__name__ = \"NGLViewer\";\nNGLViewer.__module__ = \"panel_chemistry.bokeh_extensions.ngl_viewer\";\nNGLViewer.init_NGLViewer();\n//# sourceMappingURL=ngl_viewer.js.map\n","type":"js","dependency_paths":[],"dependency_map":[],"exported":[{"type":"named","name":"NGLViewerView"},{"type":"named","name":"NGLViewer"}],"externals":[],"shims":[]},"code":{"source":"/* bokeh_extensions/ngl_viewer.js */ function _(require, module, exports, __esModule, __esExport) {\n    __esModule();\n    const html_box_1 = require(\"@bokehjs/models/layouts/html_box\");\n    class NGLViewerView extends html_box_1.HTMLBoxView {\n        connect_signals() {\n            super.connect_signals();\n            this.connect(this.model.properties.object.change, this.updateStage);\n            this.connect(this.model.properties.extension.change, this.updateStage);\n            this.connect(this.model.properties.representation.change, this.updateStage);\n            this.connect(this.model.properties.color_scheme.change, this.updateParameters);\n            this.connect(this.model.properties.custom_color_scheme.change, this.updateParameters);\n            this.connect(this.model.properties.effect.change, this.updateEffect);\n            this.connect(this.model.properties.background.change, this.setBackgroundcolor);\n        }\n        render() {\n            super.render();\n            this.el.id = \"viewport\";\n            const wn = window;\n            const ngl = wn.NGL;\n            this._stage = new ngl.Stage(this.el);\n            this.setBackgroundcolor();\n            const stage = this._stage;\n            this.updateStage();\n            window.addEventListener(\"resize\", function () {\n                stage.handleResize();\n            }, false);\n        }\n        setBackgroundcolor() {\n            console.log(this.model.background);\n            this._stage.setParameters({ backgroundColor: this.model.background });\n        }\n        after_layout() {\n            super.after_layout();\n            this._stage.handleResize();\n        }\n        updateEffect() {\n            if (this.model.effect === \"spin\") {\n                this._stage.setSpin(true);\n            }\n            else if (this.model.effect === \"rock\") {\n                this._stage.setRock(true);\n            }\n            else {\n                this._stage.setSpin(false);\n                this._stage.setRock(false);\n            }\n        }\n        getParameters() {\n            if (this.model.color_scheme === \"custom\") {\n                var list = this.model.custom_color_scheme;\n                var scheme = NGL.ColormakerRegistry.addSelectionScheme(list, \"new scheme\");\n                return { color: scheme };\n            }\n            else {\n                return { colorScheme: this.model.color_scheme };\n            }\n        }\n        updateParameters() {\n            const parameters = this.getParameters();\n            try {\n                this._stage.compList[0].reprList[0].setParameters(parameters);\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        updateStage() {\n            const model = this.model;\n            this._stage.removeAllComponents();\n            if (model.object === \"\") {\n                return;\n            }\n            const parameters = this.getParameters();\n            function finish(o) {\n                o.addRepresentation(model.representation, parameters);\n                o.autoView();\n            }\n            if (model.extension !== \"\") {\n                this._stage.loadFile(new Blob([model.object], { type: 'text/plain' }), { ext: model.extension }).then(finish);\n            }\n            else if (model.object.includes(\"://\")) {\n                this._stage.loadFile(model.object).then(finish);\n            }\n            else {\n                this._stage.loadFile(\"rcsb://\" + model.object).then(finish);\n            }\n            // this.updateColor()\n            this.updateEffect();\n        }\n    }\n    exports.NGLViewerView = NGLViewerView;\n    NGLViewerView.__name__ = \"NGLViewerView\";\n    class NGLViewer extends html_box_1.HTMLBox {\n        constructor(attrs) {\n            super(attrs);\n        }\n        static init_NGLViewer() {\n            this.prototype.default_view = NGLViewerView;\n            this.define(({ String, Any }) => ({\n                object: [String, \"\"],\n                extension: [String, \"\"],\n                representation: [String, \"ribbon\"],\n                color_scheme: [String, \"chainid\"],\n                custom_color_scheme: [Any, \"chainid\"],\n                effect: [String, \"\"],\n            }));\n            this.override({\n                height: 400,\n                width: 600\n            });\n        }\n    }\n    exports.NGLViewer = NGLViewer;\n    NGLViewer.__name__ = \"NGLViewer\";\n    NGLViewer.__module__ = \"panel_chemistry.bokeh_extensions.ngl_viewer\";\n    NGLViewer.init_NGLViewer();\n}\n","min_source":"function _(e,t,s,o,i){o();const n=e(\"@bokehjs/models/layouts/html_box\");class r extends n.HTMLBoxView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.object.change,this.updateStage),this.connect(this.model.properties.extension.change,this.updateStage),this.connect(this.model.properties.representation.change,this.updateStage),this.connect(this.model.properties.color_scheme.change,this.updateParameters),this.connect(this.model.properties.custom_color_scheme.change,this.updateParameters),this.connect(this.model.properties.effect.change,this.updateEffect),this.connect(this.model.properties.background.change,this.setBackgroundcolor)}render(){super.render(),this.el.id=\"viewport\";const e=window.NGL;this._stage=new e.Stage(this.el),this.setBackgroundcolor();const t=this._stage;this.updateStage(),window.addEventListener(\"resize\",(function(){t.handleResize()}),!1)}setBackgroundcolor(){console.log(this.model.background),this._stage.setParameters({backgroundColor:this.model.background})}after_layout(){super.after_layout(),this._stage.handleResize()}updateEffect(){\"spin\"===this.model.effect?this._stage.setSpin(!0):\"rock\"===this.model.effect?this._stage.setRock(!0):(this._stage.setSpin(!1),this._stage.setRock(!1))}getParameters(){if(\"custom\"===this.model.color_scheme){var e=this.model.custom_color_scheme;return{color:NGL.ColormakerRegistry.addSelectionScheme(e,\"new scheme\")}}return{colorScheme:this.model.color_scheme}}updateParameters(){const e=this.getParameters();try{this._stage.compList[0].reprList[0].setParameters(e)}catch(e){console.log(e)}}updateStage(){const e=this.model;if(this._stage.removeAllComponents(),\"\"===e.object)return;const t=this.getParameters();function s(s){s.addRepresentation(e.representation,t),s.autoView()}\"\"!==e.extension?this._stage.loadFile(new Blob([e.object],{type:\"text/plain\"}),{ext:e.extension}).then(s):e.object.includes(\"://\")?this._stage.loadFile(e.object).then(s):this._stage.loadFile(\"rcsb://\"+e.object).then(s),this.updateEffect()}}s.NGLViewerView=r,r.__name__=\"NGLViewerView\";class c extends n.HTMLBox{constructor(e){super(e)}static init_NGLViewer(){this.prototype.default_view=r,this.define((({String:e,Any:t})=>({object:[e,\"\"],extension:[e,\"\"],representation:[e,\"ribbon\"],color_scheme:[e,\"chainid\"],custom_color_scheme:[t,\"chainid\"],effect:[e,\"\"]}))),this.override({height:400,width:600})}}s.NGLViewer=c,c.__name__=\"NGLViewer\",c.__module__=\"panel_chemistry.bokeh_extensions.ngl_viewer\",c.init_NGLViewer()}\n//# sourceMappingURL=ngl_viewer.min.js.map","min_map":"{\"version\":3,\"sources\":[\"0\"],\"names\":[\"_\",\"require\",\"module\",\"exports\",\"__esModule\",\"__esExport\",\"html_box_1\",\"NGLViewerView\",\"HTMLBoxView\",\"connect_signals\",\"super\",\"this\",\"connect\",\"model\",\"properties\",\"object\",\"change\",\"updateStage\",\"extension\",\"representation\",\"color_scheme\",\"updateParameters\",\"custom_color_scheme\",\"effect\",\"updateEffect\",\"background\",\"setBackgroundcolor\",\"render\",\"el\",\"id\",\"ngl\",\"window\",\"NGL\",\"_stage\",\"Stage\",\"stage\",\"addEventListener\",\"handleResize\",\"console\",\"log\",\"setParameters\",\"backgroundColor\",\"after_layout\",\"setSpin\",\"setRock\",\"getParameters\",\"list\",\"color\",\"ColormakerRegistry\",\"addSelectionScheme\",\"colorScheme\",\"parameters\",\"compList\",\"reprList\",\"e\",\"removeAllComponents\",\"finish\",\"o\",\"addRepresentation\",\"autoView\",\"loadFile\",\"Blob\",\"type\",\"ext\",\"then\",\"includes\",\"__name__\",\"NGLViewer\",\"HTMLBox\",\"constructor\",\"attrs\",\"static\",\"prototype\",\"default_view\",\"define\",\"String\",\"Any\",\"override\",\"height\",\"width\",\"__module__\",\"init_NGLViewer\"],\"mappings\":\"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\",\"file\":\"ngl_viewer.min.js\"}"}}]}