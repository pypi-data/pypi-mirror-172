# Granian benchmarks

Run at: 2022-07-27T16:19:11.937614

CPUs: 32

## RSGI response types

| Type | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| bytes small (c2048) | 8582968 | 568433 | 4.162ms | 58.402ms |
| str small (c2048) | 8601133 | 569615 | 3.95ms | 65.22ms |
| bytes big (c2048) | 141535 | 9412 | 215.568ms | 619.148ms |
| str big (c512) | 3106552 | 205737 | 2.694ms | 36.319ms |

## RSGI vs ASGI

| Request | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| RSGI bytes (c2048) | 8668159 | 574106 | 3.875ms | 53.988ms |
| RSGI str (c2048) | 8617110 | 571345 | 3.896ms | 56.525ms |
| ASGI bytes (c4096) | 5216381 | 345709 | 12.268ms | 123.565ms |
| ASGI str (c4096) | 5164532 | 342115 | 12.5ms | 144.001ms |

## vs Uvicorn

| Mode | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| Granian ASGI (c4096) | 5216339 | 345529 | 12.315ms | 163.342ms |
| Granian RSGI (c2048) | 8514415 | 565443 | 4.052ms | 59.007ms |
| Uvicorn H11 (c4096) | 1458966 | 97111 | 42.092ms | 168.117ms |
| Uvicorn http-tools (c2048) | 5851211 | 387494 | 6.094ms | 158.943ms |

## Threading

### ASGI

| Threading mode | Procs | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| runtime (c4096) | 1 | 1 | 238849 | 15817 | 245.771ms | 530.285ms |
| workers (c256) | 1 | 1 | 297145 | 19679 | 12.979ms | 28.557ms |
| runtime (c16384) | 1 | 2 | 145992 | 9667 | 1340.103ms | 1848.703ms |
| workers (c256) | 1 | 2 | 249183 | 16503 | 15.522ms | 37.779ms |
| runtime (c256) | 1 | 4 | 199931 | 13240 | 19.3ms | 47.591ms |
| workers (c8192) | 1 | 4 | 145412 | 9631 | 801.207ms | 1717.472ms |
| runtime (c256) | 1 | 8 | 147309 | 9755 | 26.21ms | 71.867ms |
| workers (c4096) | 1 | 8 | 132800 | 8794 | 442.583ms | 887.918ms |
| runtime (c256) | 1 | 16 | 115332 | 7638 | 33.529ms | 100.54ms |
| workers (c512) | 1 | 16 | 117439 | 7777 | 71.907ms | 435.025ms |
| runtime (c256) | 1 | 32 | 109189 | 7231 | 35.389ms | 111.812ms |
| workers (c2048) | 1 | 32 | 106735 | 7068 | 290.233ms | 925.254ms |
| runtime (c256) | 1 | 33 | 109547 | 7254 | 35.266ms | 110.414ms |
| workers (c1024) | 1 | 33 | 106075 | 7025 | 151.135ms | 586.684ms |
| runtime (c1024) | 2 | 1 | 554177 | 36704 | 27.782ms | 55.898ms |
| workers (c256) | 2 | 1 | 520858 | 34516 | 7.413ms | 12.794ms |
| runtime (c2048) | 2 | 2 | 469205 | 31100 | 65.566ms | 136.299ms |
| workers (c1024) | 2 | 2 | 403548 | 26730 | 38.93ms | 113.211ms |
| runtime (c256) | 2 | 4 | 390392 | 25857 | 9.92ms | 34.367ms |
| workers (c512) | 2 | 4 | 386443 | 25595 | 20.719ms | 90.936ms |
| runtime (c512) | 2 | 8 | 307416 | 20361 | 25.157ms | 75.056ms |
| workers (c1024) | 2 | 8 | 314608 | 20834 | 56.694ms | 286.223ms |
| runtime (c256) | 2 | 16 | 248070 | 16432 | 15.583ms | 62.051ms |
| workers (c1024) | 2 | 16 | 221635 | 14678 | 77.286ms | 439.918ms |
| runtime (c512) | 2 | 32 | 240009 | 15900 | 32.219ms | 101.876ms |
| workers (c1024) | 2 | 32 | 229344 | 15188 | 67.431ms | 253.346ms |
| runtime (c512) | 2 | 33 | 239932 | 15889 | 32.199ms | 95.758ms |
| workers (c2048) | 2 | 33 | 222992 | 14800 | 138.007ms | 424.311ms |
| runtime (c256) | 4 | 1 | 995551 | 65997 | 3.875ms | 8.21ms |
| workers (c4096) | 4 | 1 | 1034817 | 68593 | 59.48ms | 98.54ms |
| runtime (c256) | 4 | 2 | 748613 | 49598 | 5.162ms | 21.059ms |
| workers (c4096) | 4 | 2 | 901862 | 59766 | 69.257ms | 239.557ms |
| runtime (c256) | 4 | 4 | 694874 | 46044 | 5.57ms | 17.909ms |
| workers (c512) | 4 | 4 | 718239 | 47587 | 10.972ms | 38.733ms |
| runtime (c512) | 4 | 8 | 638208 | 42301 | 12.266ms | 51.427ms |
| workers (c1024) | 4 | 8 | 613938 | 40658 | 25.632ms | 91.426ms |
| runtime (c1024) | 4 | 16 | 629881 | 41714 | 24.599ms | 114.686ms |
| workers (c1024) | 4 | 16 | 590628 | 39297 | 27.597ms | 131.418ms |
| runtime (c1024) | 4 | 32 | 667722 | 44250 | 23.111ms | 84.669ms |
| workers (c2048) | 4 | 32 | 611358 | 40537 | 50.961ms | 208.708ms |
| runtime (c1024) | 4 | 33 | 647047 | 42889 | 23.941ms | 102.076ms |
| workers (c2048) | 4 | 33 | 608770 | 40329 | 51.745ms | 238.931ms |
| runtime (c256) | 8 | 1 | 1503866 | 99597 | 2.571ms | 23.256ms |
| workers (c256) | 8 | 1 | 1497800 | 99296 | 2.578ms | 8.171ms |
| runtime (c512) | 8 | 2 | 1158618 | 76774 | 6.666ms | 17.806ms |
| workers (c512) | 8 | 2 | 1195726 | 79245 | 6.478ms | 17.85ms |
| runtime (c4096) | 8 | 4 | 1105812 | 73232 | 55.732ms | 139.741ms |
| workers (c4096) | 8 | 4 | 1093082 | 72691 | 56.109ms | 148.835ms |
| runtime (c1024) | 8 | 8 | 1203060 | 79673 | 13.193ms | 72.569ms |
| workers (c2048) | 8 | 8 | 1176709 | 78143 | 27.158ms | 131.45ms |
| runtime (c1024) | 8 | 16 | 1328219 | 87964 | 11.636ms | 40.891ms |
| workers (c2048) | 8 | 16 | 1275342 | 84461 | 24.552ms | 115.045ms |
| runtime (c2048) | 8 | 32 | 1399959 | 92713 | 22.136ms | 104.828ms |
| workers (c4096) | 8 | 32 | 1324763 | 87766 | 48.105ms | 404.495ms |
| runtime (c2048) | 8 | 33 | 1390581 | 92092 | 22.378ms | 117.7ms |
| workers (c4096) | 8 | 33 | 1286032 | 85208 | 49.398ms | 255.54ms |
| runtime (c1024) | 16 | 1 | 2200810 | 145750 | 7.023ms | 22.197ms |
| workers (c1024) | 16 | 1 | 2128492 | 140965 | 7.292ms | 28.238ms |
| runtime (c2048) | 16 | 2 | 1796311 | 118958 | 17.181ms | 47.164ms |
| workers (c2048) | 16 | 2 | 1860216 | 123189 | 16.62ms | 52.316ms |
| runtime (c4096) | 16 | 4 | 1747307 | 115726 | 35.149ms | 90.558ms |
| workers (c256) | 16 | 4 | 1497056 | 99142 | 2.602ms | 15.177ms |
| runtime (c1024) | 16 | 8 | 2021254 | 133862 | 7.681ms | 39.427ms |
| workers (c256) | 16 | 8 | 1467700 | 97227 | 2.763ms | 23.739ms |
| runtime (c2048) | 16 | 16 | 2314120 | 153253 | 13.362ms | 55.5ms |
| workers (c256) | 16 | 16 | 1425529 | 94496 | 2.737ms | 27.509ms |
| runtime (c2048) | 16 | 32 | 2340271 | 154984 | 13.16ms | 48.682ms |
| workers (c16384) | 16 | 32 | 1446938 | 95884 | 128.907ms | 1999.473ms |
| runtime (c4096) | 16 | 33 | 2346876 | 155492 | 26.317ms | 132.41ms |
| workers (c256) | 16 | 33 | 1399095 | 92661 | 2.815ms | 74.013ms |
| runtime (c4096) | 32 | 1 | 5122856 | 339300 | 12.964ms | 177.898ms |
| workers (c4096) | 32 | 1 | 4995922 | 331634 | 13.178ms | 130.978ms |
| runtime (c8192) | 32 | 2 | 4927522 | 326290 | 24.948ms | 116.402ms |
| workers (c8192) | 32 | 2 | 4756386 | 314939 | 25.727ms | 121.29ms |
| runtime (c8192) | 32 | 4 | 4296465 | 284675 | 28.418ms | 105.194ms |
| workers (c8192) | 32 | 4 | 4055242 | 268515 | 29.349ms | 265.939ms |
| runtime (c16384) | 32 | 8 | 3769978 | 249731 | 64.168ms | 194.127ms |
| workers (c8192) | 32 | 8 | 3225143 | 213556 | 36.79ms | 245.755ms |
| runtime (c8192) | 32 | 16 | 3247549 | 215037 | 37.636ms | 141.467ms |
| workers (c4096) | 32 | 16 | 2533848 | 167825 | 23.966ms | 418.804ms |
| runtime (c4096) | 32 | 32 | 2754942 | 182774 | 22.274ms | 94.048ms |
| workers (c8192) | 32 | 32 | 1476273 | 97808 | 65.367ms | 1997.865ms |
| runtime (c4096) | 32 | 33 | 2733055 | 181320 | 22.465ms | 141.922ms |
| workers (c16384) | 32 | 33 | 835333 | 43989 | 47.193ms | 1998.866ms |
| runtime (c4096) | 33 | 1 | 4995025 | 330935 | 13.269ms | 164.883ms |
| workers (c2048) | 33 | 1 | 5086989 | 337008 | 6.539ms | 95.094ms |
| runtime (c4096) | 33 | 2 | 4616836 | 306023 | 13.488ms | 90.239ms |
| workers (c4096) | 33 | 2 | 4574725 | 302960 | 13.41ms | 66.885ms |
| runtime (c8192) | 33 | 4 | 4294452 | 284453 | 28.412ms | 98.165ms |
| workers (c8192) | 33 | 4 | 3983256 | 263772 | 30.282ms | 116.769ms |
| runtime (c8192) | 33 | 8 | 3657237 | 242257 | 33.354ms | 116.815ms |
| workers (c8192) | 33 | 8 | 3231733 | 213994 | 36.667ms | 193.863ms |
| runtime (c8192) | 33 | 16 | 3210989 | 212686 | 38.036ms | 145.806ms |
| workers (c4096) | 33 | 16 | 2643907 | 175099 | 22.84ms | 312.444ms |
| runtime (c8192) | 33 | 32 | 2816719 | 186539 | 43.389ms | 177.24ms |
| workers (c16384) | 33 | 32 | 839753 | 48966 | 59.07ms | 1998.266ms |
| runtime (c8192) | 33 | 33 | 2780869 | 184153 | 43.839ms | 143.959ms |
| workers (c8192) | 33 | 33 | 1395265 | 92399 | 61.7ms | 1998.937ms |

### RSGI

| Threading mode | Procs | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| runtime (c4096) | 1 | 1 | 439828 | 29127 | 133.798ms | 351.39ms |
| workers (c4096) | 1 | 1 | 462236 | 30620 | 129.923ms | 336.471ms |
| runtime (c256) | 1 | 2 | 474713 | 31441 | 8.133ms | 21.103ms |
| workers (c4096) | 1 | 2 | 444807 | 29459 | 136.544ms | 358.086ms |
| runtime (c2048) | 1 | 4 | 455229 | 30173 | 66.819ms | 258.631ms |
| workers (c256) | 1 | 4 | 497233 | 32943 | 7.796ms | 22.646ms |
| runtime (c256) | 1 | 8 | 489922 | 32446 | 8.053ms | 36.156ms |
| workers (c1024) | 1 | 8 | 519409 | 34401 | 31.172ms | 124.339ms |
| runtime (c256) | 1 | 16 | 302100 | 20014 | 12.936ms | 54.683ms |
| workers (c512) | 1 | 16 | 312611 | 20706 | 26.522ms | 148.609ms |
| runtime (c256) | 1 | 32 | 296089 | 19617 | 13.137ms | 55.77ms |
| workers (c4096) | 1 | 32 | 300377 | 19979 | 203.255ms | 536.684ms |
| runtime (c256) | 1 | 33 | 294163 | 19481 | 13.218ms | 62.205ms |
| workers (c8192) | 1 | 33 | 296486 | 19678 | 410.991ms | 1370.019ms |
| runtime (c256) | 2 | 1 | 852700 | 56478 | 4.526ms | 20.263ms |
| workers (c1024) | 2 | 1 | 897314 | 59458 | 17.224ms | 41.58ms |
| runtime (c4096) | 2 | 2 | 875553 | 57984 | 69.191ms | 265.551ms |
| workers (c8192) | 2 | 2 | 997928 | 66089 | 121.331ms | 334.269ms |
| runtime (c8192) | 2 | 4 | 855153 | 56633 | 136.459ms | 634.37ms |
| workers (c256) | 2 | 4 | 910508 | 60299 | 4.381ms | 18.98ms |
| runtime (c1024) | 2 | 8 | 791254 | 52402 | 19.534ms | 92.208ms |
| workers (c8192) | 2 | 8 | 850921 | 56408 | 143.755ms | 251.686ms |
| runtime (c512) | 2 | 16 | 597721 | 39604 | 13.073ms | 61.148ms |
| workers (c1024) | 2 | 16 | 640638 | 42426 | 24.56ms | 92.185ms |
| runtime (c512) | 2 | 32 | 656736 | 43515 | 11.803ms | 49.401ms |
| workers (c8192) | 2 | 32 | 635061 | 42062 | 192.971ms | 744.496ms |
| runtime (c512) | 2 | 33 | 667833 | 44254 | 11.638ms | 48.084ms |
| workers (c1024) | 2 | 33 | 627630 | 41565 | 27.728ms | 179.994ms |
| runtime (c16384) | 4 | 1 | 1377055 | 91197 | 172.946ms | 1859.212ms |
| workers (c8192) | 4 | 1 | 1504497 | 99633 | 81.726ms | 131.837ms |
| runtime (c2048) | 4 | 2 | 1479935 | 98009 | 20.823ms | 49.042ms |
| workers (c2048) | 4 | 2 | 1483094 | 98305 | 20.901ms | 57.89ms |
| runtime (c512) | 4 | 4 | 1472714 | 97609 | 5.322ms | 24.689ms |
| workers (c256) | 4 | 4 | 1471383 | 97523 | 2.668ms | 13.153ms |
| runtime (c8192) | 4 | 8 | 1937411 | 128301 | 62.709ms | 560.13ms |
| workers (c8192) | 4 | 8 | 1855629 | 123345 | 66.058ms | 135.713ms |
| runtime (c8192) | 4 | 16 | 1960331 | 129821 | 62.062ms | 520.662ms |
| workers (c8192) | 4 | 16 | 1851372 | 122601 | 66.175ms | 220.723ms |
| runtime (c16384) | 4 | 32 | 2020101 | 133790 | 124.979ms | 1998.917ms |
| workers (c256) | 4 | 32 | 1475524 | 97717 | 2.755ms | 20.19ms |
| runtime (c8192) | 4 | 33 | 1982293 | 131285 | 63.078ms | 877.968ms |
| workers (c256) | 4 | 33 | 1470446 | 97427 | 2.74ms | 22.391ms |
| runtime (c512) | 8 | 1 | 2459963 | 162918 | 3.171ms | 10.68ms |
| workers (c512) | 8 | 1 | 2546254 | 168626 | 3.038ms | 9.652ms |
| runtime (c16384) | 8 | 2 | 2723889 | 180863 | 88.067ms | 531.381ms |
| workers (c16384) | 8 | 2 | 2722970 | 181057 | 89.23ms | 320.429ms |
| runtime (c16384) | 8 | 4 | 2975507 | 197096 | 81.454ms | 328.888ms |
| workers (c16384) | 8 | 4 | 2950179 | 195470 | 82.552ms | 378.136ms |
| runtime (c16384) | 8 | 8 | 3204938 | 212568 | 75.391ms | 540.131ms |
| workers (c16384) | 8 | 8 | 3219906 | 213231 | 77.48ms | 259.855ms |
| runtime (c16384) | 8 | 16 | 3499999 | 231881 | 69.654ms | 382.936ms |
| workers (c16384) | 8 | 16 | 3411170 | 226055 | 70.518ms | 241.902ms |
| runtime (c8192) | 8 | 32 | 3489458 | 231816 | 36.542ms | 298.022ms |
| workers (c8192) | 8 | 32 | 3470002 | 229855 | 36.747ms | 319.024ms |
| runtime (c8192) | 8 | 33 | 3486799 | 231615 | 36.53ms | 296.112ms |
| workers (c8192) | 8 | 33 | 3549038 | 235076 | 37.122ms | 490.812ms |
| runtime (c2048) | 16 | 1 | 4073674 | 269785 | 7.582ms | 22.223ms |
| workers (c8192) | 16 | 1 | 4157593 | 275310 | 29.653ms | 243.624ms |
| runtime (c16384) | 16 | 2 | 4704334 | 311784 | 52.071ms | 260.119ms |
| workers (c16384) | 16 | 2 | 4759406 | 315645 | 51.606ms | 167.361ms |
| runtime (c16384) | 16 | 4 | 4533926 | 300270 | 53.978ms | 144.44ms |
| workers (c16384) | 16 | 4 | 4355426 | 289238 | 55.622ms | 185.328ms |
| runtime (c1024) | 16 | 8 | 4808577 | 318489 | 3.213ms | 15.512ms |
| workers (c2048) | 16 | 8 | 4708901 | 311846 | 6.739ms | 39.824ms |
| runtime (c2048) | 16 | 16 | 5173480 | 342634 | 6.005ms | 31.608ms |
| workers (c4096) | 16 | 16 | 4957928 | 328358 | 12.83ms | 127.433ms |
| runtime (c2048) | 16 | 32 | 5355555 | 354683 | 5.795ms | 33.927ms |
| workers (c8192) | 16 | 32 | 4510417 | 298664 | 27.051ms | 462.217ms |
| runtime (c4096) | 16 | 33 | 5313190 | 351979 | 11.706ms | 62.649ms |
| workers (c8192) | 16 | 33 | 4381378 | 290135 | 28.869ms | 1072.743ms |
| runtime (c2048) | 32 | 1 | 8353155 | 554091 | 3.982ms | 53.417ms |
| workers (c2048) | 32 | 1 | 8558712 | 567500 | 3.916ms | 47.649ms |
| runtime (c4096) | 32 | 2 | 9179128 | 607882 | 6.621ms | 51.212ms |
| workers (c4096) | 32 | 2 | 8866696 | 587843 | 6.932ms | 58.818ms |
| runtime (c8192) | 32 | 4 | 7616883 | 504415 | 15.639ms | 90.506ms |
| workers (c8192) | 32 | 4 | 7159042 | 474186 | 16.548ms | 354.601ms |
| runtime (c8192) | 32 | 8 | 7115490 | 471365 | 16.828ms | 89.642ms |
| workers (c8192) | 32 | 8 | 6122407 | 405599 | 19.449ms | 387.216ms |
| runtime (c8192) | 32 | 16 | 6536698 | 432849 | 18.412ms | 117.808ms |
| workers (c8192) | 32 | 16 | 5112613 | 338762 | 22.6ms | 591.087ms |
| runtime (c8192) | 32 | 32 | 5940589 | 393391 | 20.274ms | 110.696ms |
| workers (c2048) | 32 | 32 | 4417223 | 292553 | 7.682ms | 568.722ms |
| runtime (c8192) | 32 | 33 | 5933263 | 392879 | 20.241ms | 100.338ms |
| workers (c1024) | 32 | 33 | 4487356 | 297258 | 6.967ms | 931.277ms |
| runtime (c2048) | 33 | 1 | 8210194 | 543903 | 4.117ms | 50.043ms |
| workers (c2048) | 33 | 1 | 8518781 | 565936 | 3.987ms | 56.273ms |
| runtime (c2048) | 33 | 2 | 9143022 | 605691 | 3.333ms | 35.039ms |
| workers (c4096) | 33 | 2 | 8829957 | 584822 | 6.875ms | 61.088ms |
| runtime (c8192) | 33 | 4 | 7565907 | 500992 | 15.745ms | 97.796ms |
| workers (c8192) | 33 | 4 | 7025061 | 465388 | 16.839ms | 98.509ms |
| runtime (c8192) | 33 | 8 | 6933741 | 459184 | 17.298ms | 124.21ms |
| workers (c8192) | 33 | 8 | 6084434 | 402934 | 19.132ms | 193.498ms |
| runtime (c8192) | 33 | 16 | 6674503 | 442055 | 17.944ms | 104.602ms |
| workers (c2048) | 33 | 16 | 5054378 | 334834 | 6.182ms | 231.333ms |
| runtime (c8192) | 33 | 32 | 6023106 | 398874 | 19.875ms | 100.327ms |
| workers (c16384) | 33 | 32 | 1849966 | 65885 | 13.696ms | 1999.941ms |
| runtime (c8192) | 33 | 33 | 5922053 | 392203 | 20.254ms | 113.752ms |
| workers (c16384) | 33 | 33 | 2044734 | 74372 | 17.293ms | 1995.773ms |

