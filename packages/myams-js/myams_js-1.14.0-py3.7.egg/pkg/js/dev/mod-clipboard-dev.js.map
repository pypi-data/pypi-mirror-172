{"version":3,"file":"mod-clipboard-dev.js","names":["$","MyAMS","doCopy","text","copied","window","clipboardData","setData","document","queryCommandSupported","textarea","val","css","appendTo","dom","root","get","select","execCommand","e","console","warn","remove","require","then","alert","smallBox","status","message","length","i18n","CLIPBOARD_TEXT_COPY_OK","CLIPBOARD_CHARACTER_COPY_OK","icon","timeout","prompt","CLIPBOARD_COPY","clipboard","copy","source","parents","removeClass","env","bundle","config","modules","push","debug"],"sources":["mod-clipboard.js"],"sourcesContent":["/* global MyAMS, clipboardData */\n/**\n * MyAMS i18n translations\n */\n\nconst $ = MyAMS.$;\n\n\n/**\n * Internal function used to copy text to clipboard\n *\n * @param text: text to be copied\n */\nfunction doCopy(text) {\n\tlet copied = false;\n\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t// IE specific code\n\t\tcopied = clipboardData.setData(\"Text\", text);\n\t} else if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n\t\tconst textarea = $('<textarea>');\n\t\ttextarea.val(text)\n\t\t\t.css('position', 'fixed')  // prevent scrolling to bottom of page in Edge\n\t\t\t.appendTo(MyAMS.dom.root);\n\t\ttextarea.get(0).select();\n\t\ttry {\n\t\t\tdocument.execCommand('copy');  // security exception may be thrown by some browsers!\n\t\t\tcopied = true;\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Clipboard copy failed!\", e);\n\t\t} finally {\n\t\t\ttextarea.remove();\n\t\t}\n\t}\n\tif (copied) {\n\t\tMyAMS.require('i18n', 'alert').then(() => {\n\t\t\tMyAMS.alert.smallBox({\n\t\t\t\tstatus: 'success',\n\t\t\t\tmessage: text.length > 1 ? MyAMS.i18n.CLIPBOARD_TEXT_COPY_OK\n\t\t\t\t\t: MyAMS.i18n.CLIPBOARD_CHARACTER_COPY_OK,\n\t\t\t\ticon: 'fa-info-circle',\n\t\t\t\ttimeout: 3000\n\t\t\t});\n\t\t});\n\t} else {\n\t\tMyAMS.require('i18n').then(() => {\n\t\t\tprompt(MyAMS.i18n.CLIPBOARD_COPY, text);\n\t\t});\n\t}\n}\n\n\nexport const clipboard = {\n\n\t/**\n\t * Copy given text to system's clipboard\n\t *\n\t * @param text: text to be copied\n\t */\n\tcopy: (text) => {\n\t\tif (typeof text === 'undefined') {\n\t\t\treturn function() {\n\t\t\t\tconst\n\t\t\t\t\tsource = $(this),\n\t\t\t\t\ttext = source.text();\n\t\t\t\tsource.parents('.btn-group').removeClass('open');\n\t\t\t\tdoCopy(text);\n\t\t\t};\n\t\t} else {\n\t\t\tdoCopy(text);\n\t\t}\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('clipboard');\n\t} else {\n\t\tMyAMS.clipboard = clipboard;\n\t\tconsole.debug(\"MyAMS: clipboard module loaded...\");\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;EAAA;;EACA;AACA;AACA;EAEA,MAAMA,CAAC,GAAGC,KAAK,CAACD,CAAhB;EAGA;AACA;AACA;AACA;AACA;;EACA,SAASE,MAAT,CAAgBC,IAAhB,EAAsB;IACrB,IAAIC,MAAM,GAAG,KAAb;;IACA,IAAIC,MAAM,CAACC,aAAP,IAAwBD,MAAM,CAACC,aAAP,CAAqBC,OAAjD,EAA0D;MACzD;MACAH,MAAM,GAAGE,aAAa,CAACC,OAAd,CAAsB,MAAtB,EAA8BJ,IAA9B,CAAT;IACA,CAHD,MAGO,IAAIK,QAAQ,CAACC,qBAAT,IAAkCD,QAAQ,CAACC,qBAAT,CAA+B,MAA/B,CAAtC,EAA8E;MACpF,MAAMC,QAAQ,GAAGV,CAAC,CAAC,YAAD,CAAlB;MACAU,QAAQ,CAACC,GAAT,CAAaR,IAAb,EACES,GADF,CACM,UADN,EACkB,OADlB,EAC4B;MAD5B,CAEEC,QAFF,CAEWZ,KAAK,CAACa,GAAN,CAAUC,IAFrB;MAGAL,QAAQ,CAACM,GAAT,CAAa,CAAb,EAAgBC,MAAhB;;MACA,IAAI;QACHT,QAAQ,CAACU,WAAT,CAAqB,MAArB,EADG,CAC4B;;QAC/Bd,MAAM,GAAG,IAAT;MACA,CAHD,CAGE,OAAOe,CAAP,EAAU;QACXC,OAAO,CAACC,IAAR,CAAa,wBAAb,EAAuCF,CAAvC;MACA,CALD,SAKU;QACTT,QAAQ,CAACY,MAAT;MACA;IACD;;IACD,IAAIlB,MAAJ,EAAY;MACXH,KAAK,CAACsB,OAAN,CAAc,MAAd,EAAsB,OAAtB,EAA+BC,IAA/B,CAAoC,MAAM;QACzCvB,KAAK,CAACwB,KAAN,CAAYC,QAAZ,CAAqB;UACpBC,MAAM,EAAE,SADY;UAEpBC,OAAO,EAAEzB,IAAI,CAAC0B,MAAL,GAAc,CAAd,GAAkB5B,KAAK,CAAC6B,IAAN,CAAWC,sBAA7B,GACN9B,KAAK,CAAC6B,IAAN,CAAWE,2BAHM;UAIpBC,IAAI,EAAE,gBAJc;UAKpBC,OAAO,EAAE;QALW,CAArB;MAOA,CARD;IASA,CAVD,MAUO;MACNjC,KAAK,CAACsB,OAAN,CAAc,MAAd,EAAsBC,IAAtB,CAA2B,MAAM;QAChCW,MAAM,CAAClC,KAAK,CAAC6B,IAAN,CAAWM,cAAZ,EAA4BjC,IAA5B,CAAN;MACA,CAFD;IAGA;EACD;;EAGM,MAAMkC,SAAS,GAAG;IAExB;AACD;AACA;AACA;AACA;IACCC,IAAI,EAAGnC,IAAD,IAAU;MACf,IAAI,OAAOA,IAAP,KAAgB,WAApB,EAAiC;QAChC,OAAO,YAAW;UACjB,MACCoC,MAAM,GAAGvC,CAAC,CAAC,IAAD,CADX;UAAA,MAECG,IAAI,GAAGoC,MAAM,CAACpC,IAAP,EAFR;UAGAoC,MAAM,CAACC,OAAP,CAAe,YAAf,EAA6BC,WAA7B,CAAyC,MAAzC;UACAvC,MAAM,CAACC,IAAD,CAAN;QACA,CAND;MAOA,CARD,MAQO;QACND,MAAM,CAACC,IAAD,CAAN;MACA;IACD;EAnBuB,CAAlB;EAuBP;AACA;AACA;;;;EACA,IAAIE,MAAM,CAACJ,KAAX,EAAkB;IACjB,IAAIA,KAAK,CAACyC,GAAN,CAAUC,MAAd,EAAsB;MACrB1C,KAAK,CAAC2C,MAAN,CAAaC,OAAb,CAAqBC,IAArB,CAA0B,WAA1B;IACA,CAFD,MAEO;MACN7C,KAAK,CAACoC,SAAN,GAAkBA,SAAlB;MACAjB,OAAO,CAAC2B,KAAR,CAAc,mCAAd;IACA;EACD"}