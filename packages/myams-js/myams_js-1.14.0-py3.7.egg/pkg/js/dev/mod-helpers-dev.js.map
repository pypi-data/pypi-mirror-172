{"version":3,"file":"mod-helpers-dev.js","names":["$","MyAMS","helpers","clearValue","evt","target","currentTarget","data","val","clearDatetimeValue","picker","date","scrollTo","parent","anchor","props","exists","require","then","ajax","check","fn","env","baseURL","extext","setLoginHash","form","hash","window","location","setSEOStatus","input","progress","siblings","children","length","Math","min","status","removeClassPrefix","addClass","css","select2ChangeHelper","source","amsSelect2HelperTarget","amsSelect2HelperType","html","params","amsSelect2HelperArgument","get","amsSelect2HelperUrl","result","callback","core","getFunctionByName","amsSelect2HelperCallback","initContent","empty","catch","executeFunctionByName","refreshElement","options","Promise","resolve","reject","element","object_id","config","clearContent","document","replaceWith","content","parents","first","refreshWidget","widget","widget_id","group","addTableRow","selector","table_id","table","dtTable","DataTable","newRow","rows","add","draw","row_id","refreshTableRow","row","remove","refreshImage","image","image_id","attr","src","moveElementToParentEnd","detach","appendTo","addElementToParent","scrollParent","hideDropdown","closest","dropdown","bundle","modules","push","console","debug"],"sources":["mod-helpers.js"],"sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic helpers\n */\n\nconst $ = MyAMS.$;\n\n\nexport const helpers = {\n\n\t/**\n\t * Click handler used to clear input\n\t */\n\tclearValue: (evt) => {\n\t\tconst target = $(evt.currentTarget).data('target');\n\t\tif (target) {\n\t\t\t$(target).val(null);\n\t\t}\n\t},\n\n\t/**\n\t * Click handler used to clear datetime input\n\t */\n\tclearDatetimeValue: (evt) => {\n\t\tconst\n\t\t\ttarget = $(evt.currentTarget).data('target'),\n\t\t\tpicker = $(target).data('datetimepicker');\n\t\tif (picker) {\n\t\t\tpicker.date(null);\n\t\t}\n\t},\n\n\t/**\n\t * Scroll anchor parent element to given anchor\n\t *\n\t * @param anchor: scroll target\n\t * @param parent: scroll parent\n\t * @param props: scroll properties\n\t */\n\tscrollTo: (parent='#content', anchor, {...props}) => {\n\t\tif (typeof anchor === 'string') {\n\t\t\tanchor = $(anchor);\n\t\t}\n\t\tif (anchor.exists()) {\n\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t$(parent).scrollTo(anchor, props);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Store location hash when redirecting to log in form\n\t */\n\tsetLoginHash: () => {\n\t\tconst\n\t\t\tform = $('#login_form'),\n\t\t\thash = $(`input[name=\"login_form.widgets.hash\"]`, form);\n\t\thash.val(window.location.hash);\n\t},\n\n\t/**\n\t * SEO input helper\n\t */\n\tsetSEOStatus: (evt) => {\n\t\tconst\n\t\t\tinput = $(evt.target),\n\t\t\tprogress = input.siblings('.progress').children('.progress-bar'),\n\t\t\tlength = Math.min(input.val().length, 100);\n\t\tlet status = 'success';\n\t\tif (length < 20 || length > 80) {\n\t\t\tstatus = 'danger';\n\t\t} else if (length < 40 || length > 66) {\n\t\t\tstatus = 'warning';\n\t\t}\n\t\tprogress.removeClassPrefix('bg-')\n\t\t\t\t.addClass('bg-' + status)\n\t\t\t\t.css('width', length + '%');\n\t},\n\n\t/**\n\t * Select2 change helper\n\t */\n\tselect2ChangeHelper: (evt) => {\n\t\tconst\n\t\t\tsource = $(evt.currentTarget),\n\t\t\tdata = source.data(),\n\t\t\ttarget = $(data.amsSelect2HelperTarget);\n\n\t\tswitch (data.amsSelect2HelperType) {\n\n\t\t\tcase 'html':\n\t\t\t\ttarget.html('<div class=\"text-center\"><i class=\"fas fa-2x fa-spinner fa-spin\"></i></div>');\n\t\t\t\tconst params = {};\n\t\t\t\tparams[data.amsSelect2HelperArgument || 'value'] = source.val();\n\t\t\t\t$.get(data.amsSelect2HelperUrl, params).then((result) => {\n\t\t\t\t\tconst callback = MyAMS.core.getFunctionByName(data.amsSelect2HelperCallback) || ((result) => {\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\ttarget.html(result);\n\t\t\t\t\t\t\tMyAMS.core.initContent(target).then();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tcallback(result);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\ttarget.empty();\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconst callback = data.amsSelect2HelperCallback;\n\t\t\t\tif (callback) {\n\t\t\t\t\tMyAMS.core.executeFunctionByName(callback, source, data);\n\t\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Refresh a DOM element with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - object_id: ID of the refreshed element\n\t *   - content: new element content\n\t */\n\trefreshElement: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet element = $(`[id=\"${options.object_id}\"]`);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, element).then(() => {\n\t\t\t\telement.replaceWith($(options.content));\n\t\t\t\telement = $(`[id=\"${options.object_id}\"]`);\n\t\t\t\tconst parent = element.parents().first();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, parent).then(() => {\n\t\t\t\t\tresolve(element);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a form widget with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated widget properties:\n\t *   - widget_id: ID of the refreshed widget\n\t *   - content: new element content\n\t */\n\trefreshWidget: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet widget = $(`[id=\"${options.widget_id}\"]`),\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, group).then(() => {\n\t\t\t\tgroup.replaceWith($(options.content));\n\t\t\t\twidget = $(`[id=\"${options.widget_id}\"]`);\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, group).then(() => {\n\t\t\t\t\tresolve(widget);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Add new row to table\n\t *\n\t * @param form: optional parent form\n\t * @param options: added row properties:\n\t *  - content: new row content\n\t */\n\taddTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `table[id=\"${options.table_id}\"]`,\n\t\t\t\ttable = $(selector),\n\t\t\t\tdtTable = table.DataTable();\n\t\t\tlet newRow;\n\t\t\tif (options.data) {\n\t\t\t\tdtTable.rows.add(options.data).draw();\n\t\t\t\tnewRow = $(`tr[id=\"${options.row_id}\"]`, table);\n\t\t\t\tresolve(newRow);\n\t\t\t} else {\n\t\t\t\tnewRow = $(options.content);\n\t\t\t\tdtTable.rows.add(newRow).draw();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a table row with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated row properties:\n\t *   - row_id: ID of the refreshed row\n\t *   - content: new row content\n\t */\n\trefreshTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif (options.data) {\n\t\t\t\tif ($.fn.DataTable) {\n\t\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\t\tif (typeof options.data === 'string') {\n\t\t\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\t\t\tdtTable.row.add($(options.data)).draw();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdtTable.row(selector).data(options.data).draw();\n\t\t\t\t\t}\n\t\t\t\t\tresolve(row);\n\t\t\t\t} else {\n\t\t\t\t\treject('No DataTable plug-in available!');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newRow = $(options.content);\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a single image with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: image properties:\n\t *   - image_id: ID of the refreshed image\n\t *   - src: new image source URL\n\t */\n\trefreshImage: (form, options) => {\n\t\tconst image = $(`[id=\"${options.image_id}\"]`);\n\t\timage.attr('src', options.src);\n\t},\n\n\t/**\n\t * Move given element to the end of it's parent\n\t *\n\t * @param element: the element to be moved\n\t * @returns {*}\n\t */\n\tmoveElementToParentEnd: (element) => {\n\t\tconst parent = element.parent();\n\t\treturn element.detach()\n\t\t\t.appendTo(parent);\n\t},\n\n\t/**\n\t * Add given element to the end of specified parent\n\t *\n\t * @param source: event source\n\t * @param element: the provided element\n\t * @param parent: the parent to which element should be added\n\t * @param props: additional props\n\t * @returns {*}\n\t */\n\taddElementToParent: (source, {element, parent, ...props}) => {\n\t\telement = $(element);\n\t\tparent = $(parent);\n\t\tconst result = element.appendTo(parent);\n\t\tif (props.scrollTo) {\n\t\t\tMyAMS.helpers.scrollTo(props.scrollParent, element);\n\t\t}\n\t\treturn result;\n\t},\n\n\t/**\n\t * Toggle dropdown associated with given event target\n\t *\n\t * @param evt: source event\n\t */\n\thideDropdown: (evt) => {\n\t\t$(evt.target).closest('.dropdown-menu').dropdown('hide');\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('helpers');\n\t} else {\n\t\tMyAMS.helpers = helpers;\n\t\tconsole.debug(\"MyAMS: helpers module loaded...\");\n\t}\n}\n"],"mappings":"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"}