"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupEvents_tsx"],{"./app/components/acl/role.tsx":(e,t,i)=>{i.d(t,{u:()=>o}),i("../node_modules/core-js/modules/es.array.includes.js");var n=i("../node_modules/react/index.js"),s=i("./app/stores/configStore.tsx"),a=i("./app/utils/isActiveSuperuser.tsx"),r=i("./app/utils/isRenderFunc.tsx");const o=(0,i("./app/utils/withOrganization.tsx").Z)((function(e){let{role:t,organization:i,children:o}=e;const d=s.Z.get("user"),c=(0,n.useMemo)((()=>function(e,t,i){if(!e)return!1;if((0,a.M)())return!0;if(!Array.isArray(t.orgRoleList))return!1;const n=t.orgRoleList.map((e=>e.id));if(!n.includes(i)||!n.includes(t.role??""))return!1;const s=n.indexOf(i);return n.indexOf(t.role??"")>=s}(d,i,t)),[i,t,d]);return(0,r.l)(o)?o({hasRole:c}):c?o:null}))},"./app/components/attachmentUrl.tsx":(e,t,i)=>{i.d(t,{Z:()=>d});var n=i("../node_modules/react/index.js"),s=i("./app/components/acl/role.tsx"),a=i("./app/utils/withOrganization.tsx"),r=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{attachment:t,organization:i,eventId:n,projectId:a,children:o}=e;return(0,r.tZ)(s.u,{role:i.attachmentsRole,children:e=>{let{hasRole:s}=e;return o(s?`/api/0/projects/${i.slug}/${a}/events/${n}/attachments/${t.id}/`:null)}})}o.displayName="AttachmentUrl";const d=(0,a.Z)((0,n.memo)(o))},"./app/components/deviceName.tsx":(e,t,i)=>{i.d(t,{H:()=>o,q:()=>r});var n=i("../node_modules/react/index.js");const s={"iPod1,1":"iPod touch","iPod2,1":"iPod touch (2nd generation)","iPod3,1":"iPod touch (3rd generation)","iPod4,1":"iPod touch (4th generation)","iPod5,1":"iPod touch (5th generation)","iPod7,1":"iPod touch (6th generation)","iPod9,1":"iPod touch (7th generation)","iPhone1,1":"iPhone","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4","iPhone3,2":"iPhone 4","iPhone3,3":"iPhone 4","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5","iPhone5,2":"iPhone 5","iPhone5,3":"iPhone 5c","iPhone5,4":"iPhone 5c","iPhone6,1":"iPhone 5s","iPhone6,2":"iPhone 5s","iPhone8,4":"iPhone SE (1st generation)","iPhone7,2":"iPhone 6","iPhone7,1":"iPhone 6 Plus","iPhone8,1":"iPhone 6s","iPhone8,2":"iPhone 6s Plus","iPhone9,1":"iPhone 7","iPhone9,3":"iPhone 7","iPhone9,2":"iPhone 7 Plus","iPhone9,4":"iPhone 7 Plus","iPhone10,1":"iPhone 8","iPhone10,4":"iPhone 8","iPhone10,2":"iPhone 8 Plus","iPhone10,5":"iPhone 8 Plus","iPhone10,3":"iPhone X","iPhone10,6":"iPhone X","iPhone11,8":"iPhone XR","iPhone11,2":"iPhone XS","iPhone11,4":"iPhone XS Max","iPhone11,6":"iPhone XS Max","iPhone12,1":"iPhone 11","iPhone12,3":"iPhone 11 Pro","iPhone12,5":"iPhone 11 Pro Max","iPhone12,8":"iPhone SE (2nd generation)","iPhone13,1":"iPhone 12 mini","iPhone13,2":"iPhone 12","iPhone13,3":"iPhone 12 Pro","iPhone13,4":"iPhone 12 Pro Max","iPad6,7":"iPad Pro (12.9-inch)","iPad6,8":"iPad Pro (12.9-inch)","iPad6,3":"iPad Pro (9.7-inch)","iPad6,4":"iPad Pro (9.7-inch)","iPad7,1":"iPad Pro (12.9-inch, 2nd generation)","iPad7,2":"iPad Pro (12.9-inch, 2nd generation)","iPad7,3":"iPad Pro (10.5-inch)","iPad7,4":"iPad Pro (10.5-inch)","iPad8,1":"iPad Pro (11-inch)","iPad8,2":"iPad Pro (11-inch)","iPad8,3":"iPad Pro (11-inch)","iPad8,4":"iPad Pro (11-inch)","iPad8,5":"iPad Pro (12.9-inch) (3rd generation)","iPad8,6":"iPad Pro (12.9-inch) (3rd generation)","iPad8,7":"iPad Pro (12.9-inch) (3rd generation)","iPad8,8":"iPad Pro (12.9-inch) (3rd generation)","iPad8,9":"iPad Pro (11-inch) (2nd generation)","iPad8,10":"iPad Pro (11-inch) (2nd generation)","iPad8,11":"iPad Pro (12.9-inch) (4th generation)","iPad8,12":"iPad Pro (12.9-inch) (4th generation)","iPad2,5":"iPad mini","iPad2,6":"iPad mini","iPad2,7":"iPad mini","iPad4,4":"iPad mini 2","iPad4,5":"iPad mini 2","iPad4,6":"iPad mini 2","iPad4,7":"iPad mini 3","iPad4,8":"iPad mini 3","iPad4,9":"iPad mini 3","iPad5,1":"iPad mini 4","iPad5,2":"iPad mini 4","iPad11,1":"iPad mini (5th generation)","iPad11,2":"iPad mini (5th generation)","iPad4,1":"iPad Air","iPad4,2":"iPad Air","iPad4,3":"iPad Air","iPad5,3":"iPad Air 2","iPad5,4":"iPad Air 2","iPad11,3":"iPad Air (3rd generation)","iPad11,4":"iPad Air (3rd generation)","iPad13,1":"iPad Air (4th generation)","iPad13,2":"iPad Air (4th generation)","iPad1,1":"iPad","iPad2,1":"iPad 2","iPad2,2":"iPad 2","iPad2,3":"iPad 2","iPad2,4":"iPad 2","iPad3,1":"iPad (3rd generation)","iPad3,2":"iPad (3rd generation)","iPad3,3":"iPad (3rd generation)","iPad3,4":"iPad (4th generation)","iPad3,5":"iPad (4th generation)","iPad3,6":"iPad (4th generation)","iPad6,11":"iPad (5th generation)","iPad6,12":"iPad (5th generation)","iPad7,5":"iPad (6th generation)","iPad7,6":"iPad (6th generation)","iPad7,11":"iPad (7th generation)","iPad7,12":"iPad (7th generation)","iPad11,6":"iPad (8th generation)","iPad11,7":"iPad (8th generation)","AudioAccessory1,1":"HomePod","AudioAccessory1,2":"HomePod","AudioAccessory5,1":"HomePod mini","Watch1,1":"Apple Watch (1st generation)","Watch1,2":"Apple Watch (1st generation)","Watch2,6":"Apple Watch Series 1","Watch2,7":"Apple Watch Series 1","Watch2,3":"Apple Watch Series 2","Watch2,4":"Apple Watch Series 2","Watch3,1":"Apple Watch Series 3","Watch3,2":"Apple Watch Series 3","Watch3,3":"Apple Watch Series 3","Watch3,4":"Apple Watch Series 3","Watch4,1":"Apple Watch Series 4","Watch4,2":"Apple Watch Series 4","Watch4,3":"Apple Watch Series 4","Watch4,4":"Apple Watch Series 4","Watch5,1":"Apple Watch Series 5","Watch5,2":"Apple Watch Series 5","Watch5,3":"Apple Watch Series 5","Watch5,4":"Apple Watch Series 5","Watch5,9":"Apple Watch SE","Watch5,10":"Apple Watch SE","Watch5,11":"Apple Watch SE","Watch5,12":"Apple Watch SE","Watch6,1":"Apple Watch Series 6","Watch6,2":"Apple Watch Series 6","Watch6,3":"Apple Watch Series 6","Watch6,4":"Apple Watch Series 6","AppleTV1,1":"Apple TV (1st generation)","AppleTV2,1":"Apple TV (2nd generation)","AppleTV3,1":"Apple TV (3rd generation)","AppleTV3,2":"Apple TV (3rd generation)","AppleTV5,3":"Apple TV (4th generation)","AppleTV6,2":"Apple TV 4K","AirPods1,1":"AirPods (1st generation)","AirPods2,1":"AirPods (2nd generation)","iProd8,1":"AirPods Pro"};var a=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(t){if("string"!=typeof t)return null;if(null===e)return t;const[i,...n]=t.split(" "),a=s[i];return void 0===a?t:`${a} ${n.join(" ")}`}function o(e){let{value:t,children:i}=e;const s=(0,n.useMemo)((()=>r(t)),[t]);return s?(0,a.tZ)("span",{"data-test-id":"loaded-device-name",children:i?i(s):s}):null}e=i.hmd(e)},"./app/components/events/searchBar.tsx":(e,t,i)=>{i.d(t,{Z:()=>W}),i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/core-js/modules/es.error.cause.js");var n=i("../node_modules/react/index.js"),s=i("../node_modules/lodash/assign.js"),a=i.n(s),r=i("../node_modules/lodash/flatten.js"),o=i.n(r),d=i("../node_modules/lodash/memoize.js"),c=i.n(d),h=i("../node_modules/lodash/omit.js"),p=i.n(h),l=i("./app/actionCreators/tags.tsx"),u=i("./app/components/smartSearchBar/index.tsx"),P=i("./app/constants/index.tsx"),m=i("./app/types/index.tsx"),g=i("./app/utils.tsx"),y=i("./app/utils/discover/fields.tsx"),v=i("./app/utils/fields/index.ts"),x=i("./app/utils/measurements/measurements.tsx"),Z=i("./app/utils/useApi.tsx"),A=i("./app/utils/withTags.tsx"),f=i("./app/views/dashboardsV2/utils.tsx"),S=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j=new RegExp(`^${P.c$}|\\${P.ir}`,"g");function b(e){const{maxSearchItems:t,organization:i,tags:s,omitTags:r,fields:d,projectIds:h,includeSessionTagsValues:P,maxMenuHeight:A,customMeasurements:b}=e,W=(0,Z.Z)();(0,n.useEffect)((()=>{E.cache.clear?.()}),[h]);const E=c()(((e,t,n)=>{const s=h?.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,l.Fo)(W,i.slug,e.key,t,s,n,!0,P).then((e=>o()(e.filter((e=>{let{name:t}=e;return(0,g.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:i}=e;return`${i}-${t}`})),T=e=>{const t=(e=>Object.fromEntries(e.filter((e=>!Object.keys(y.wZ).includes(e.field)&&!(0,y.GO)(e.field)&&!(0,f.nk)(e.field))).map((e=>[e.field,{key:e.field,name:e.field,kind:v.IV.FUNCTION}]))))(d??[]),n=Object.fromEntries(Object.keys(y.wZ).map((e=>[e,{...y.wZ[e],kind:v.IV.FIELD}]))),o=(e=>Object.fromEntries(Object.keys(e).map((t=>[t,{...e[t],kind:v.IV.MEASUREMENT}]))))(e),c=Object.fromEntries(y.$4.map((e=>[e,{key:e,name:e,kind:v.IV.METRICS}]))),h=Object.fromEntries(Object.keys(y.jg).map((e=>[e,{...y.jg[e],kind:v.IV.FIELD}]))),l=i.features.includes("performance-view")?Object.assign({},o,c,n,t):p()(n,y.J8),u=Object.fromEntries(Object.keys(s).map((e=>[e,{...s[e],kind:v.IV.TAG}])));a()(l,u,n,h);const P=Object.keys(l);return P.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),l.has={key:v.Sh.HAS,name:"Has property",values:P,predefined:!0,kind:v.IV.FIELD},p()(l,r??[])};return(0,S.tZ)(x.Z,{children:i=>{let{measurements:n}=i;return(0,S.tZ)(u.Z,{hasRecentSearches:!0,savedSearchType:m.L4.EVENT,onGetTagValues:E,supportedTags:T({...n,...b??{}}),prepareQuery:e=>e.replace(j,""),maxSearchItems:t,excludedTags:["environment"],maxMenuHeight:A??300,customPerformanceMetrics:b,...e})}})}b.displayName="SearchBar";const W=(0,A.Z)(b)},"./app/utils/withTags.tsx":(e,t,i)=>{i.d(t,{Z:()=>d});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../node_modules/react/index.js"),a=i("./app/stores/tagStore.tsx"),r=i("./app/utils/getDisplayName.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=function(e){class t extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{tags:a.Z.getState()}),(0,n.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...i}=this.props;return(0,o.tZ)(e,{tags:t??this.state.tags,...i})}}return t.displayName="WithTags",(0,n.Z)(t,"displayName",`withTags(${(0,r.Z)(e)})`),t}},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,t,i)=>{i.r(t),i.d(t,{GroupEvents:()=>z,default:()=>M});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/react/index.js")),r=i("../node_modules/react-router/es/index.js"),o=i("../node_modules/lodash/pick.js"),d=i.n(o),c=i("./app/components/emptyStateWarning.tsx"),h=i("./app/components/environmentPageFilter.tsx"),p=i("./app/components/events/searchBar.tsx"),l=i("./app/components/attachmentUrl.tsx"),u=i("./app/components/avatar/userAvatar.tsx"),P=i("./app/components/dateTime.tsx"),m=i("./app/components/deviceName.tsx"),g=i("./app/components/fileSize.tsx"),y=i("./app/components/globalSelectionLink.tsx"),v=i("./app/utils/withOrganization.tsx"),x=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){let{className:t,event:i,projectId:n,orgId:s,groupId:a,tagList:r,hasUser:o}=e;const d=i.crashFile?(0,x.tZ)(l.Z,{projectId:n,eventId:i.id,attachment:i.crashFile,children:e=>e?(0,x.BX)("small",{children:["event.minidump"===i.crashFile?.type?"Minidump":"Crash file",":"," ",(0,x.tZ)("a",{href:`${e}?download=1`,children:i.crashFile?.name})," (",(0,x.tZ)(g.Z,{bytes:i.crashFile?.size||0}),")"]}):null}):null,c=Object.fromEntries(i.tags.map((e=>[e.key,e.value])));return(0,x.BX)("tr",{className:t,children:[(0,x.tZ)("td",{children:(0,x.BX)("h5",{children:[(0,x.tZ)(y.Z,{to:`/organizations/${s}/issues/${a}/events/${i.id}/`,children:(0,x.tZ)(P.Z,{date:i.dateCreated,year:!0,seconds:!0,timeZone:!0})}),(0,x.tZ)("small",{children:i.title.substr(0,100)}),d]})}),o&&(0,x.tZ)("td",{className:"event-user table-user-info",children:i.user?(0,x.BX)("div",{children:[(0,x.tZ)(u.Z,{user:i.user,size:24,className:"avatar",gravatar:!1}),i.user.email]}):(0,x.tZ)("span",{children:"—"})}),r.map((e=>(0,x.tZ)("td",{children:(0,x.tZ)("div",{children:"device"===e.key?(0,x.tZ)(m.H,{value:c[e.key]}):c[e.key]})},e.key)))]},i.id)}Z.displayName="EventsTableRow";const A=(0,v.Z)(Z);var f=i("./app/locale.tsx");class S extends a.Component{render(){const{events:e,tagList:t,orgId:i,projectId:n,groupId:s}=this.props,a=!!e.find((e=>e.user));return(0,x.BX)("table",{className:"table events-table",children:[(0,x.tZ)("thead",{children:(0,x.BX)("tr",{children:[(0,x.tZ)("th",{children:(0,f.t)("ID")}),a&&(0,x.tZ)("th",{children:(0,f.t)("User")}),t.map((e=>(0,x.tZ)("th",{children:e.name},e.key)))]})}),(0,x.tZ)("tbody",{children:e.map((e=>(0,x.tZ)(A,{event:e,orgId:i,projectId:n,groupId:s,tagList:t,hasUser:a},e.id)))})]})}}S.displayName="EventsTable";const j=S;var b=i("./app/components/layouts/thirds.tsx"),W=i("./app/components/loadingError.tsx"),E=i("./app/components/loadingIndicator.tsx"),T=i("./app/components/pagination.tsx"),I=i("./app/components/panels/index.tsx"),k=i("./app/components/searchBar.tsx"),w=i("./app/styles/space.tsx"),N=i("./app/types/index.tsx"),_=i("./app/utils/parseApiError.tsx"),q=i("./app/utils/withApi.tsx"),V=i("./app/utils/discover/eventView.tsx"),$=i("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx");const L=e=>{const{location:t,organization:i,issueId:n,isPerfIssue:s,excludedTags:r,projectId:o,totalEventCount:d}=e,[c,h]=(0,a.useState)(""),p=["id","transaction","trace","release","environment","user.display",...s?["transaction.duration"]:[],"timestamp","attachments","minidump"],l=V.ZP.fromLocation(e.location);l.fields=p.map((e=>({field:e}))),l.sorts=(0,V.GT)(t).filter((e=>p.includes(e.field))),l.sorts.length||(l.sorts=[{field:"timestamp",kind:"desc"}]);const u=s?`performance.issue_ids:${n}`:`issue.id:${n}`;l.query=`${u} ${e.location.query.query||""}`,l.statsPeriod="90d";const P=[(0,f.t)("event id"),(0,f.t)("transaction"),(0,f.t)("trace id"),(0,f.t)("release"),(0,f.t)("environment"),(0,f.t)("user"),...s?[(0,f.t)("total duration")]:[],(0,f.t)("timestamp"),(0,f.t)("attachments"),(0,f.t)("minidump")];return c?(0,x.tZ)(W.Z,{message:c}):(0,x.tZ)($.Z,{eventView:l,location:t,issueId:n,organization:i,excludedTags:r,projectId:o,totalEventCount:d,setError:()=>{},transactionName:"",columnTitles:P.slice()})};L.displayName="AllEventsTable";const O=L,R=["environment","issue","issue.id","performance.issues_ids"];class z extends a.Component{constructor(e){super(e),(0,n.Z)(this,"handleSearch",(e=>{const t={...this.props.location.query};t.query=e;const{groupId:i,orgId:n}=this.props.params;r.browserHistory.push({pathname:`/organizations/${n}/issues/${i}/events/`,query:t})})),(0,n.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1});const e={...d()(this.props.location.query,["cursor","environment"]),limit:50,query:this.state.query};this.state.renderNewAllEventsTab||this.props.api.request(`/issues/${this.props.params.groupId}/events/`,{query:e,method:"GET",success:(e,t,i)=>{this.setState({eventList:e,error:!1,loading:!1,pageLinks:i?.getResponseHeader("Link")??""})},error:e=>{this.setState({error:(0,_.Z)(e),loading:!1})}})}));const t=this.props.location.query,i=!!this.props.group.id&&this.props.organization.features.includes("performance-issues-all-events-tab");this.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:t.query||"",renderNewAllEventsTab:i}}UNSAFE_componentWillMount(){this.fetchData()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.search!==e.location.search){const t=e.location.query;this.setState({query:t.query},this.fetchData)}}renderNoQueryResults(){return(0,x.tZ)(c.Z,{children:(0,x.tZ)("p",{children:(0,f.t)("Sorry, no events match your search query.")})})}renderEmpty(){return(0,x.tZ)(c.Z,{children:(0,x.tZ)("p",{children:(0,f.t)("There don't seem to be any events yet.")})})}renderNewAllEventsTab(){return(0,x.tZ)(O,{issueId:this.props.group.id,isPerfIssue:this.props.group.issueCategory===N.qE.PERFORMANCE,location:this.props.location,organization:this.props.organization,projectId:this.props.group.project.slug,totalEventCount:this.props.group.count,excludedTags:R})}renderSearchBar(){const{renderNewAllEventsTab:e}=this.state;return e?(0,x.tZ)(p.Z,{organization:this.props.organization,defaultQuery:"",onSearch:this.handleSearch,excludedTags:R,query:this.state.query,hasRecentSearches:!1}):(0,x.tZ)(k.Z,{defaultQuery:"",placeholder:(0,f.t)("Search events by id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})}renderResults(){const{group:e,params:t}=this.props,i=e.tags.filter((e=>"user"!==e.key))||[];return(0,x.tZ)(j,{tagList:i,events:this.state.eventList,orgId:t.orgId,projectId:e.project.slug,groupId:t.groupId})}renderBody(){const{renderNewAllEventsTab:e}=this.state;let t;return e?this.renderNewAllEventsTab():(t=this.state.loading?(0,x.tZ)(E.Z,{}):this.state.error?(0,x.tZ)(W.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty(),(0,x.BX)(a.Fragment,{children:[(0,x.tZ)(I.s_,{className:"event-list",children:(0,x.tZ)(I.N,{children:t})}),(0,x.tZ)(T.Z,{pageLinks:this.state.pageLinks})]}))}render(){return(0,x.tZ)(b.uT,{children:(0,x.tZ)(b.or,{fullWidth:!0,children:(0,x.BX)(C,{children:[(0,x.BX)(B,{children:[(0,x.tZ)(h.Z,{}),this.renderSearchBar()]}),this.renderBody()]})})})}}z.displayName="GroupEvents";const B=(0,s.Z)("div",{target:"etd8qom1"})("display:grid;gap:",(0,w.Z)(1),";grid-template-columns:max-content 1fr;"),C=(0,s.Z)("div",{target:"etd8qom0"})("display:grid;gap:",(0,w.Z)(2),";"),M=(0,v.Z)((0,q.Z)(z))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupEvents_tsx.19c46b59bfcd4b6860e04d49385051f3.js.map