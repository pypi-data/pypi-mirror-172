"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{Cm:()=>u,PX:()=>i,s:()=>d,tT:()=>m,um:()=>c,z_:()=>l});var r=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),a=s("./app/stores/teamStore.tsx");const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,r=new Array(s>2?s-2:0),o=2;o<s;o++)r[o-2]=arguments[o];return e[t]?.(...r)};async function i(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);a.Z.loadUserTeams(s)}function l(e,t){a.Z.onUpdateSuccess(e,t)}function c(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(r,{method:"POST",success:e=>{a.Z.onUpdateSuccess(t.teamId,e),n(s,"success",e)},error:e=>{n(s,"error",e)}})}function d(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(r,{method:"DELETE",success:e=>{a.Z.onUpdateSuccess(t.teamId,e),n(s,"success",e)},error:e=>{n(s,"error",e)}})}function u(e,t,s){return e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(a.Z.onCreateSuccess(e),(0,r.S9)((0,o._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw(0,r.Iw)((0,o._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function m(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(a.Z.onRemoveSuccess(t.teamId),(0,r.S9)((0,o._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,r.Iw)((0,o._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{s.d(t,{Z:()=>d}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/@sentry/core/esm/exports.js"),o=s("./app/components/avatar/teamAvatar.tsx"),a=s("./app/components/avatar/userAvatar.tsx"),n=s("./app/components/loadingIndicator.tsx"),i=s("./app/stores/memberListStore.tsx"),l=s("./app/utils/teams.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=function(e){let{size:t=24,hasTooltip:s=!0,actor:d,...u}=e;const m={size:t,hasTooltip:s,...u};if("user"===d.type){const e=d.id?i.Z.getById(d.id)??d:d;return(0,c.tZ)(a.Z,{user:e,...m})}return"team"===d.type?(0,c.tZ)(l.Z,{ids:[d.id],children:e=>{let{initiallyLoaded:t,teams:s}=e;return t?(0,c.tZ)(o.Z,{team:s[0],...m}):(0,c.tZ)(n.Z,{mini:!0})}}):(r.$e((e=>{e.setExtra("actor",d),r.Tb(new Error("Unknown avatar type"))})),null)}},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>v,Z:()=>w});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),a=s("./app/components/button.tsx"),n=s("./app/components/links/externalLink.tsx"),i=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),c=s("./app/icons/index.tsx"),d=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),m=s("./app/utils.tsx"),p=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x="20px";function f(e){let{type:t="default",icon:s,tooltipText:r,to:a,onClick:u,href:x,onDismiss:f,children:w,textMaxWidth:S=150,..._}=e;const z={size:"11px",color:h.ZP.tag[t].iconColor},I=(0,g.tZ)(l.Z,{title:r,containerDisplayMode:"inline-flex",children:(0,g.BX)(v,{type:t,children:[(0,o.isValidElement)(s)?(0,g.tZ)(y,{children:(0,o.cloneElement)(s,{...z})}):((0,m.ri)(x)||(0,m.ri)(a))&&void 0===s?(0,g.tZ)(y,{children:(0,g.tZ)(c.V$,{...z})}):null,(0,g.tZ)(b,{type:t,maxWidth:S,children:w}),(0,m.ri)(f)&&(0,g.tZ)(j,{onClick:function(e){e.preventDefault(),f?.()},size:"zero",priority:"link","aria-label":(0,d.t)("Dismiss"),children:(0,g.tZ)(c.bM,{isCircled:!0,...z})})]})});return(0,g.tZ)(Z,{..._,onClick:()=>{(0,p.Z)("tag.clicked",{is_clickable:(0,m.ri)(u)||(0,m.ri)(a)||(0,m.ri)(x),organization:null})},children:(0,m.ri)(x)?(0,g.tZ)(n.Z,{href:x,children:I}):(0,m.ri)(a)&&(0,m.ri)(u)?(0,g.tZ)(i.Z,{to:a,onClick:u,children:I}):(0,m.ri)(a)?(0,g.tZ)(i.Z,{to:a,children:I}):I})}f.displayName="Tag";const Z=(0,r.Z)("span",{target:"e8jgvoh4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),v=(0,r.Z)("div",{target:"e8jgvoh3"})("display:inline-flex;align-items:center;height:",x,";border-radius:",x,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,u.Z)(1),";"),y=(0,r.Z)("span",{target:"e8jgvoh2"})("margin-right:",(0,u.Z)(.5),";display:inline-flex;"),b=(0,r.Z)("span",{target:"e8jgvoh1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",x,";"),j=(0,r.Z)(a.ZP,{target:"e8jgvoh0"})("margin-left:",(0,u.Z)(.5),";border:none;"),w=f},"./app/components/textOverflow.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,r.Z)((e=>{let{children:t,className:s,ellipsisDirection:r,isParagraph:a,"data-test-id":n}=e;const i=a?"p":"div";return"left"===r?(0,o.tZ)(i,{className:s,"data-test-id":n,children:(0,o.tZ)("bdi",{children:t})}):(0,o.tZ)(i,{className:s,"data-test-id":n,children:t})}),{target:"eyxbn6j0"})((e=>e.theme.overflowEllipsis)," ",(e=>"left"===e.ellipsisDirection&&"\n      direction: rtl;\n      text-align: left;\n    "),";width:auto;line-height:1.2;");a.defaultProps={ellipsisDirection:"right",isParagraph:!1};const n=a},"./app/stores/memberListStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const r={loaded:!1,state:[],init(){this.state=[],this.loaded=!1},loadInitialData(e){this.state=e,this.loaded=!0,this.trigger(this.state,"initial")},isLoaded(){return this.loaded},getById(e){if(this.state){e=""+e;for(let t=0;t<this.state.length;t++)if(this.state[t].id===e)return this.state[t]}},getAll(){return this.state},getState(){return this.state}},o=(0,s("../node_modules/reflux/src/index.js").createStore)(r)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>n});var r=s("../node_modules/js-cookie/dist/js.cookie.mjs"),o=s("./app/stores/configStore.tsx");const a=window.superUserCookieName??"su";function n(){const{isSuperuser:e}=o.Z.get("user")||{};if(e){const e=o.Z.get("superUserCookieName")||a;if(r.Z.set(e,"test"),void 0===r.Z.get(e))return!0}return!1}},"./app/utils/teams.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/react/index.js"),o=s("./app/utils/useTeams.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{children:t,...s}=e;const n=(0,o.Z)(s);return(0,a.tZ)(r.Fragment,{children:t(n)})}n.displayName="Teams";const i=n},"./app/utils/useTeams.tsx":(e,t,s)=>{s.d(t,{Z:()=>h}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),a=s.n(o),n=s("./app/actionCreators/teams.tsx"),i=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/teamStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),d=s("./app/utils/isActiveSuperuser.tsx"),u=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/useApi.tsx");async function p(e,t){let{slugs:s,ids:r,search:o,limit:a,lastSearch:n,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==r&&r.length>0&&(l.query=r.map((e=>`id:${e}`)).join(" ")),o&&(l.query=`${l.query??""} ${o}`.trim());const c=n===o||!n&&!o;c&&i&&(l.cursor=i),void 0!==a&&(l.per_page=a);let d=!1,m=null;const[p,,h]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),g=h?.getResponseHeader("Link");if(g){const e=(0,u.Z)(g);d=e?.next?.results,m=e?.next?.cursor}return{results:p,hasMore:d,nextCursor:m}}const h=function(){let{limit:e,slugs:t,ids:s,provideUserTeams:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=(0,m.Z)(),{organization:h}=(0,c.X)(i.Z),g=(0,c.X)(l.Z),x=h?.slug,f=new Set(g.teams.map((e=>e.slug))),Z=t?.filter((e=>!f.has(e)))??[],v=new Set(g.teams.map((e=>e.id))),y=s?.filter((e=>!v.has(e)))??[],b=Z.length>0,j=y.length>0,w=o&&!g.loadedUserTeams,S=!b&&!w&&!j,[_,z]=(0,r.useState)({initiallyLoaded:S,fetching:!1,hasMore:g.hasMore,lastSearch:null,nextCursor:g.cursor,fetchError:null}),I=(0,r.useRef)(null);if(void 0!==t||void 0!==s){const e=(t||s)??[];null===I.current&&(I.current=new Set(e)),(e.length!==I.current.size||e.some((e=>!I.current?.has(e))))&&(I.current=new Set(e))}async function C(){if(void 0!==x){z({..._,fetching:!0});try{await(0,n.PX)(u,{orgId:x}),z({..._,fetching:!1,initiallyLoaded:!0})}catch(e){console.error(e),z({..._,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}async function k(){if(void 0!==x){z({..._,fetching:!0});try{const{results:t,hasMore:s,nextCursor:r}=await p(u,x,{slugs:Z,ids:y,limit:e}),o=a()([...t,...g.teams],(e=>{let{id:t}=e;return t}));l.Z.loadInitialData(o),z({..._,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:r})}catch(e){console.error(e),z({..._,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}function M(e){return""!==e?$(e):(_.hasMore===g.hasMore&&_.nextCursor===g.cursor||z({..._,lastSearch:e,hasMore:g.hasMore,nextCursor:g.cursor}),Promise.resolve())}async function $(t){const{lastSearch:s}=_,r=t?_.nextCursor:g.cursor;if(void 0!==x){z({..._,fetching:!0});try{u.clear();const{results:o,hasMore:n,nextCursor:i}=await p(u,x,{search:t,limit:e,lastSearch:s,cursor:r}),c=a()([...g.teams,...o],(e=>{let{slug:t}=e;return t}));t?c.length>g.teams.length&&l.Z.loadInitialData(c):l.Z.loadInitialData(c,n,i),z({..._,hasMore:n&&g.hasMore,fetching:!1,lastSearch:t??null,nextCursor:i})}catch(e){console.error(e),z({..._,fetching:!1,fetchError:e})}}else console.error("Cannot fetch teams without an organization in context")}(0,r.useEffect)((()=>{b||j?k():w&&C()}),[I.current,o]);const E=(0,d.M)(),T=(0,r.useMemo)((()=>t?g.teams.filter((e=>t.includes(e.slug))):s?g.teams.filter((e=>s.includes(e.id))):o&&!E?g.teams.filter((e=>e.isMember)):g.teams),[g.teams,s,t,o,E]),L={teams:T,fetching:_.fetching||g.loading,initiallyLoaded:_.initiallyLoaded,fetchError:_.fetchError,hasMore:_.hasMore??g.hasMore,onSearch:M,loadMore:$};return L}}}]);
//# sourceMappingURL=../sourcemaps/app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx.342d1b49af34d7be9a5db70306596a83.js.map