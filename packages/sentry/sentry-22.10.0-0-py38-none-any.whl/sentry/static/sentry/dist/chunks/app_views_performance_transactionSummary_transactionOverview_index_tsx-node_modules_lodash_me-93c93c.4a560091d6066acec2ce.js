(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionOverview_index_tsx-node_modules_lodash_me-93c93c","node_modules_lodash_mean_js","app_components_charts_styles_tsx"],{"./app/components/charts/styles.tsx":(e,t,n)=>{"use strict";n.d(t,{BO:()=>d,Gh:()=>c,OT:()=>i,m2:()=>o,r3:()=>u,uN:()=>s,ws:()=>p,xx:()=>l});var a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/styles/space.tsx");const i=(0,a.Z)("h4",{target:"ey7s1vy7"})("display:inline-grid;grid-auto-flow:column;gap:",(0,r.Z)(1),";align-items:center;color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,r.Z)(1)," 0;"),s=(0,a.Z)("span",{target:"ey7s1vy6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,r.Z)(1),";"),o=(0,a.Z)("div",{target:"ey7s1vy5"})("display:grid;align-items:center;@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-auto-flow:column;grid-column-gap:",(0,r.Z)(1),";}"),l=(0,a.Z)("div",{target:"ey7s1vy4"})("padding:",(0,r.Z)(1)," ",(0,r.Z)(1)," ",(0,r.Z)(1)," ",(0,r.Z)(3),";border-top:1px solid ",(e=>e.theme.border),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;justify-content:space-between;flex-wrap:wrap;}"),c=(0,a.Z)("div",{target:"ey7s1vy3"})("display:inline-grid;grid-auto-flow:column;gap:",(0,r.Z)(1),";",(e=>e.theme.text.cardTitle),";color:",(e=>e.theme.headingColor),";align-items:center;"),p=(0,a.Z)(c,{target:"ey7s1vy2"})("background-color:",(e=>e.theme.background),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";position:absolute;z-index:1;"),u=(0,a.Z)("div",{target:"ey7s1vy1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,r.Z)(1),";align-items:baseline;background-color:",(e=>e.theme.background),";position:absolute;top:40px;z-index:1;font-size:",(e=>e.theme.headerFontSize),";"),d=(0,a.Z)("div",{target:"ey7s1vy0"})("padding:",(0,r.Z)(2)," ",(0,r.Z)(3),";")},"./app/utils/performance/anomalies/anomaliesQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c}),n("../node_modules/core-js/modules/es.array.includes.js");var a=n("./app/utils/discover/genericDiscoverQuery.tsx"),r=n("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){return e.data.forEach((e=>e[0]=1e3*e[0])),e}function o(e){const t={...e};return e.y&&e.yhat_lower&&e.yhat_upper&&e.anomalies?(t.y=s(e.y),t.yhat_upper=s(e.yhat_upper),t.yhat_lower=s(e.yhat_lower),t.anomalies=((n=e.anomalies).forEach((e=>{e.start=1e3*e.start,e.end=1e3*e.end})),n),t):t;var n}function l(e){return e.organization.features.includes(r.uT)?(0,i.tZ)(a.ZP,{route:"transaction-anomaly-detection",...e,children:t=>{let{tableData:n,...a}=t;return e.children({data:n&&n.y?o(n):null,...a})}}):(0,i.tZ)("div",{children:e.children({data:null,isLoading:!1,error:null,pageLinks:null})})}l.displayName="AnomaliesSeriesQuery";const c=l},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n("../node_modules/lodash/omit.js"),r=n.n(a),i=n("./app/utils.tsx"),s=n("./app/utils/discover/genericDiscoverQuery.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{perSuspect:t,spanOps:n,spanGroups:a,minExclusiveTime:r,maxExclusiveTime:s}=e,o={perSuspect:t,spanOp:n,spanGroup:a,min_exclusive_time:r,max_exclusive_time:s};(0,i.ri)(o.perSuspect)||delete o.perSuspect,(0,i.ri)(o.spanOp)||delete o.spanOp,(0,i.ri)(o.spanGroup)||delete o.spanGroup;const l=e.eventView.getEventsAPIPayload(e.location);return{...o,...l}}function c(e){return(0,o.tZ)(s.ZP,{route:"events-spans-performance",getRequestPayload:l,...r()(e,"children"),children:t=>{let{tableData:n,...a}=t;return e.children({suspectSpans:n,...a})}})}c.displayName="SuspectSpansQuery";const p=c},"./app/views/eventsV2/tags.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var a=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/react/index.js"),s=n("../node_modules/@sentry/core/esm/exports.js"),o=n("./app/actionCreators/events.tsx"),l=n("./app/components/charts/errorPanel.tsx"),c=n("./app/components/charts/styles.tsx"),p=n("./app/components/emptyStateWarning.tsx"),u=n("./app/components/placeholder.tsx"),d=n("./app/components/tagDistributionMeter.tsx"),m=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),g=n("./app/styles/space.tsx"),x=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),v=n("./app/utils/discover/eventView.tsx"),f=n("./app/utils/withApi.tsx"),y=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends i.Component{constructor(){var e;super(...arguments),e=this,(0,a.Z)(this,"state",{loading:!0,tags:[],totalValues:null,error:""}),(0,a.Z)(this,"shouldRefetchData",(e=>{const t=this.props.eventView.getFacetsAPIPayload(this.props.location),n=e.eventView.getFacetsAPIPayload(e.location);return!(0,v.ze)(t,n)})),(0,a.Z)(this,"fetchData",(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:n,organization:a,eventView:r,location:i,confirmedQuery:l}=e.props;if(e.setState({loading:!0,error:"",tags:[]}),t||!1!==l)try{const t=await(0,o.eV)(n,a.slug,r.getFacetsAPIPayload(i));e.setState({loading:!1,tags:t})}catch(t){s.Tb(t),e.setState({loading:!1,error:t})}})),(0,a.Z)(this,"handleTagClick",(e=>{const{organization:t}=this.props;(0,x.Z)("discover_v2.facet_map.clicked",{organization:t,tag:e})})),(0,a.Z)(this,"renderBody",(()=>{const{loading:e,error:t,tags:n}=this.state;return e?this.renderPlaceholders():t?(0,y.tZ)(l.Z,{height:"132px",children:(0,y.tZ)(m.FC,{color:"gray300",size:"lg"})}):n.length>0?n.map((e=>this.renderTag(e))):(0,y.tZ)(w,{small:!0,children:(0,h.t)("No tags found")})}))}componentDidMount(){this.fetchData(!0)}componentDidUpdate(e){(this.shouldRefetchData(e)||e.confirmedQuery!==this.props.confirmedQuery)&&this.fetchData()}renderTag(e){const{generateUrl:t,totalValues:n}=this.props,a=e.topValues.map((n=>(n.url=t(e.key,n.value),n))),r=a.length>0?Math.max(Number(n),a[0].count):n;return(0,y.tZ)(d.Z,{title:e.key,segments:a,totalValues:Number(r),renderLoading:()=>(0,y.tZ)(b,{height:"16px"}),onTagClick:this.handleTagClick,showReleasePackage:!0},e.key)}renderPlaceholders(){return(0,y.BX)(i.Fragment,{children:[(0,y.tZ)(S,{},"title-1"),(0,y.tZ)(b,{},"bar-1"),(0,y.tZ)(S,{},"title-2"),(0,y.tZ)(b,{},"bar-2"),(0,y.tZ)(S,{},"title-3"),(0,y.tZ)(b,{},"bar-3")]})}render(){return(0,y.BX)(i.Fragment,{children:[(0,y.tZ)(c.OT,{children:(0,h.t)("Tag Summary")}),this.renderBody()]})}}Z.displayName="Tags";const w=(0,r.Z)(p.Z,{target:"e1pu9veq2"})({name:"rtpdsm",styles:"height:132px;padding:54px 15%"}),b=(0,r.Z)(u.Z,{target:"e1pu9veq1"})("border-radius:",(e=>e.theme.borderRadius),";height:16px;margin-bottom:",(0,g.Z)(1.5),";"),S=(0,r.Z)(u.Z,{target:"e1pu9veq0"})("width:100px;height:12px;margin-bottom:",(0,g.Z)(.5),";"),_=(0,f.Z)(Z)},"./app/views/performance/transactionSummary/transactionOverview/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>It}),n("../node_modules/core-js/modules/es.array.includes.js");var a=n("../node_modules/react/index.js"),r=n("../node_modules/react-router/es/index.js"),i=n("./app/actionCreators/tags.tsx"),s=n("./app/locale.tsx"),o=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),c=n("./app/utils/discover/eventView.tsx"),p=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),d=n("./app/utils/performance/histogram/index.tsx"),m=n("./app/utils/queryString.tsx"),h=n("./app/utils/tokenizeSearch.tsx"),g=n("./app/utils/useApi.tsx"),x=n("./app/utils/withOrganization.tsx"),v=n("./app/utils/withPageFilters.tsx"),f=n("./app/utils/withProjects.tsx"),y=n("./app/views/performance/utils.tsx"),Z=n("./app/views/performance/transactionSummary/filter.tsx"),w=n("./app/views/performance/transactionSummary/pageLayout.tsx"),b=n("./app/views/performance/transactionSummary/tabs.tsx"),S=n("./app/views/performance/transactionSummary/transactionVitals/constants.tsx"),_=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),T=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),C=n("../node_modules/lodash/omit.js"),E=n.n(C),k=n("./app/components/acl/feature.tsx"),z=n("./app/components/datePageFilter.tsx"),L=n("./app/components/discover/transactionsList.tsx"),j=n("./app/components/environmentPageFilter.tsx"),P=n("./app/components/events/searchBar.tsx"),q=n("./app/components/layouts/thirds.tsx"),V=n("./app/components/organizations/pageFilterBar.tsx"),I=n("./app/components/organizations/pageFilters/parse.tsx"),N=n("./app/constants/index.tsx"),F=n("./app/styles/space.tsx"),O=n("./app/utils.tsx"),A=n("./app/utils/analytics.tsx"),D=n("./app/utils/useRoutes.tsx"),B=n("./app/views/eventsV2/table/cellAction.tsx"),X=n("./app/views/eventsV2/tags.tsx"),M=n("./app/views/performance/transactionSummary/utils.tsx"),$=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),R=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),U=n("../node_modules/lodash/pick.js"),K=n.n(U),Q=n("./app/components/button.tsx"),W=n("./app/components/charts/styles.tsx"),G=n("./app/components/emptyStateWarning.tsx"),H=n("./app/components/issues/groupList.tsx"),Y=n("./app/components/panels/index.tsx"),J=n("./app/constants/pageFilters.tsx"),ee=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class te extends a.Component{constructor(){super(...arguments),(0,R.Z)(this,"handleOpenClick",(()=>{const{organization:e}=this.props;(0,A.ec)({eventKey:"performance_views.summary.open_issues",eventName:"Performance Views: Open issues from transaction summary",organization_id:parseInt(e.id,10)})})),(0,R.Z)(this,"renderEmptyMessage",(()=>{const{statsPeriod:e}=this.props,t=e&&N.wh[e],n=t?t.toLowerCase():(0,s.t)("given timeframe");return(0,ee.tZ)(Y.s_,{children:(0,ee.tZ)(Y.N,{children:(0,ee.tZ)(G.Z,{children:(0,ee.tZ)("p",{children:(0,s._N)("No new issues for this transaction for the [timePeriod].",{timePeriod:n})})})})})}))}getIssuesEndpoint(){const{transaction:e,organization:t,start:n,end:a,statsPeriod:r,location:i}=this.props,s={start:n,end:a,statsPeriod:r,limit:5,sort:"new",...K()(i.query,[...Object.values(J.nF),"cursor"])},o=new h.MY((0,m.ro)(i.query.query,""));return(0,y.m_)(o),o.addFreeText("is:unresolved").setFilterValues("transaction",[e]),{path:`/organizations/${t.slug}/issues/`,queryParams:{...s,query:o.formatString()}}}render(){const{organization:e}=this.props,{path:t,queryParams:n}=this.getIssuesEndpoint(),r={pathname:`/organizations/${e.slug}/issues/`,query:n};return(0,ee.BX)(a.Fragment,{children:[(0,ee.BX)(ne,{children:[(0,ee.tZ)(W.OT,{children:(0,s.t)("Related Issues")}),(0,ee.tZ)(Q.ZP,{"data-test-id":"issues-open",size:"xs",to:r,onClick:this.handleOpenClick,children:(0,s.t)("Open in Issues")})]}),(0,ee.tZ)(ae,{children:(0,ee.tZ)(H.Z,{orgId:e.slug,endpointPath:t,queryParams:n,query:"",canSelectGroups:!1,renderEmptyMessage:this.renderEmptyMessage,withChart:!1,withPagination:!1})})]})}}te.displayName="RelatedIssues";const ne=(0,T.Z)("div",{target:"el0d6on1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,F.Z)(1),";"),ae=(0,T.Z)("div",{target:"el0d6on0"})("margin-bottom:",(0,F.Z)(4),";",Y.s_,"{margin-bottom:-",(0,F.Z)(1),";}"),re=te;var ie=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),se=n("../node_modules/color/index.js"),oe=n.n(se),le=n("./app/components/charts/chartZoom.tsx"),ce=n("./app/components/charts/components/markPoint.tsx"),pe=n("./app/components/charts/errorPanel.tsx"),ue=n("./app/components/charts/eventsRequest.tsx"),de=n("./app/components/charts/lineChart.tsx"),me=n("./app/components/charts/transitionChart.tsx"),he=n("./app/components/charts/transparentLoadingMask.tsx"),ge=n("./app/components/charts/utils.tsx"),xe=n("./app/components/placeholder.tsx"),ve=n("./app/components/questionTooltip.tsx"),fe=n("./app/icons/index.tsx"),ye=n("./app/utils/dates.tsx"),Ze=n("./app/utils/discover/charts.tsx"),we=n("./app/utils/formatters.tsx"),be=n("./app/utils/getDynamicText.tsx"),Se=n("./app/utils/performance/anomalies/anomaliesQuery.tsx"),_e=n("./app/views/performance/data.tsx"),Te=n("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx");function Ce(e){let{organization:t,isLoading:n,error:a,totals:i,start:o,end:l,utc:c,router:p,statsPeriod:u,chartData:d,eventView:h,location:g,transactionName:x}=e;const v=!t.features.includes("performance-frontend-use-events-endpoint"),f=(0,ie.u)();return(0,ee.BX)(ze,{children:[(0,ee.BX)(je,{top:"0px",children:[(0,ee.BX)(Le,{children:[(0,s.t)("Apdex"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.APDEX),size:"sm"})]}),(0,ee.tZ)(ke,{"data-test-id":"apdex-summary-value",isLoading:n,error:a,value:i?(0,we.$1)(v?i.apdex:i["apdex()"],4):null})]}),(0,ee.BX)(je,{top:"160px",children:[(0,ee.BX)(Le,{children:[(0,s.t)("Failure Rate"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.FAILURE_RATE),size:"sm"})]}),(0,ee.tZ)(ke,{"data-test-id":"failure-rate-summary-value",isLoading:n,error:a,value:i?(0,we.rl)(v?i.failure_rate:i["failure_rate()"]):null})]}),(0,ee.BX)(je,{top:"320px",children:[(0,ee.BX)(Le,{children:[(0,s.t)("TPM"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.TPM),size:"sm"})]}),(0,ee.tZ)(ke,{"data-test-id":"tpm-summary-value",isLoading:n,error:a,value:i?(0,s._N)("[tpm] tpm",{tpm:(0,we.$1)(v?i.tpm:i["tpm()"],4)}):null})]}),(0,ee.tZ)(Se.Z,{location:g,organization:t,eventView:h,children:e=>(0,ee.tZ)(le.Z,{router:p,period:u,start:o,end:l,utc:c,xAxisIndex:[0,1,2],children:n=>{const{errored:a,loading:i,reloading:s,chartOptions:o,series:l}=d;if(a)return(0,ee.tZ)(pe.Z,{height:"580px",children:(0,ee.tZ)(fe.FC,{color:"gray300",size:"lg"})});if(t.features.includes(Te.uT)){const n=l.find((e=>e.seriesName.includes("epm")||e.seriesName.includes("tpm")));n&&e.data&&(n.markPoint=(0,ce.Z)({data:e.data.anomalies.map((e=>({name:e.id,yAxis:n.data.find((t=>{let{name:n}=t;return n>(e.end+e.start)/2}))?.value,xAxis:e.start,itemStyle:{borderColor:oe()((0,Te.ES)(e.confidence,f)).string(),color:oe()((0,Te.ES)(e.confidence,f)).alpha(.2).rgb().string()},onClick:()=>{const e=(0,Te.az)({orgSlug:t.slug,query:g.query,projectID:(0,m.ro)(g.query.project),transaction:x});r.browserHistory.push(e)}}))),symbol:"circle",symbolSize:16}))}return(0,ee.BX)(me.Z,{loading:i,reloading:s,height:"580px",children:[(0,ee.tZ)(he.Z,{visible:s}),(0,be.Z)({value:(0,ee.tZ)(de.w,{...n,...o,series:l}),fixed:(0,ee.tZ)(xe.Z,{height:"480px",testId:"skeleton-ui"})})]})}})})]})}function Ee(e){let{location:t,eventView:n,organization:a,router:r,isLoading:i,error:s,totals:o,transactionName:l}=e;const c=(0,g.Z)(),u=(0,ie.u)(),d=u.charts.getColorPalette(3),m=n.statsPeriod,h=n.start?(0,ye.hC)(n.start):void 0,x=n.end?(0,ye.hC)(n.end):void 0,v=n.project,f=n.environment,y=n.query,Z="true"===(0,I.fK)(t.query).utc,w={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},b={height:480,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"},{top:"380px",left:"10px",right:"10px",height:"120px"}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},xAxes:Array.from(new Array(3)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,interval:.2,axisLabel:{formatter:e=>`${(0,we.$1)(e,1)}`,color:u.chartLabel},...w},{gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:e=>(0,we.rl)(e,0),color:u.chartLabel},...w},{gridIndex:2,splitNumber:4,axisLabel:{formatter:we.Du,color:u.chartLabel},...w}],utc:Z,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[d[0],d[1],d[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:(e,t)=>(0,Ze.CX)(e,(0,p.Px)(t)),nameFormatter:e=>"epm()"===e?"tpm()":e}},S={api:c,start:h,end:x,period:m,project:v,environment:f,query:y},_={organization:a,router:r,error:s,isLoading:i,start:h,end:x,utc:Z,totals:o},T={start:h||null,end:x||null,period:m};return(0,ee.tZ)(ue.Z,{...S,organization:a,interval:(0,ge.ZS)(T),showLoading:!1,includePrevious:!1,yAxis:["apdex()","failure_rate()","epm()"],partial:!0,referrer:"api.performance.transaction-summary.sidebar-chart",children:e=>{let{results:a,errored:r,loading:i,reloading:s}=e;const o=a?a.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[];return(0,ee.tZ)(Ce,{..._,transactionName:l,location:t,eventView:n,chartData:{series:o,errored:r,loading:i,reloading:s,chartOptions:b}})}})}function ke(e){let{error:t,isLoading:n,value:a,...r}=e;return t?(0,ee.tZ)("div",{...r,children:"—"}):n?(0,ee.tZ)(xe.Z,{height:"24px",...r}):(0,ee.tZ)(Pe,{...r,children:a})}Ce.displayName="SidebarCharts",Ee.displayName="SidebarChartsContainer",ke.displayName="ChartSummaryValue";const ze=(0,T.Z)("div",{target:"ecri4wp3"})({name:"bjn8wh",styles:"position:relative"}),Le=(0,T.Z)(W.OT,{target:"ecri4wp2"})({name:"ti75j2",styles:"margin:0"}),je=(0,T.Z)("div",{target:"ecri4wp1"})("position:absolute;top:",(e=>e.top),";z-index:1;"),Pe=(0,T.Z)("div",{target:"ecri4wp0"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";"),qe=(0,r.withRouter)(Ee);var Ve=n("./app/api.tsx"),Ie=n("./app/utils/performance/contexts/metricsCardinality.tsx"),Ne=n("./app/views/performance/landing/widgets/utils.tsx");function Fe(e){const{isShowingMetricsEventCount:t,start:n,end:a,utc:r,router:i,statsPeriod:s,chartData:o}=e,l=t?"200px":"300px",c=t?"300px":"400px";return(0,ee.BX)($e,{children:[(0,ee.tZ)(Ae,{...e}),(0,ee.tZ)(le.Z,{router:i,period:s,start:n,end:a,utc:r,xAxisIndex:[0,1,2],children:e=>{const{errored:t,loading:n,reloading:a,chartOptions:r,series:i}=o;return t?(0,ee.tZ)(pe.Z,{height:c,children:(0,ee.tZ)(fe.FC,{color:"gray300",size:"lg"})}):(0,ee.BX)(me.Z,{loading:n,reloading:a,height:c,children:[(0,ee.tZ)(he.Z,{visible:a}),(0,be.Z)({value:(0,ee.tZ)(de.w,{...e,...r,series:i}),fixed:(0,ee.tZ)(xe.Z,{height:l,testId:"skeleton-ui"})})]})}})]})}function Oe(e){let{chartData:t,metricsChartData:n,metricsCardinality:a}=e;const r=t?.series[0]?.data.reduce(((e,t)=>{let{value:n}=t;return e+n}),0)??0,i=n?.series[0]?.data.reduce(((e,t)=>{let{value:n}=t;return e+n}),0)??0;return{transactionCount:r,metricsCount:i,missingMetrics:!i&&r||i<r||a.outcome?.forceTransactionsOnly}}function Ae(e){let{organization:t,isLoading:n,totals:r,error:i,isShowingMetricsEventCount:o,chartData:l,metricsChartData:c}=e;const p=!t.features.includes("performance-frontend-use-events-endpoint"),u=(0,Ie.e0)();if(o){const{transactionCount:e,metricsCount:t,missingMetrics:o}=Oe({chartData:l,metricsChartData:c,metricsCardinality:u});return(0,ee.tZ)(a.Fragment,{children:(0,ee.BX)(Ue,{top:"0px",children:[(0,ee.BX)(Re,{children:[(0,s.t)("Count"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,s.t)("The count of events for the selected time period, showing the indexed events powering this page with filters compared to total processed events."),size:"sm"})]}),(0,ee.tZ)(Me,{"data-test-id":"tpm-summary-value",isLoading:n,error:i,value:r?o?(0,s._N)("[txnCount]",{txnCount:(0,we.Du)(e)}):(0,s._N)("[txnCount] of [metricCount]",{txnCount:(0,we.Du)(e),metricCount:(0,we.Du)(t)}):null})]})})}return(0,ee.BX)(a.Fragment,{children:[(0,ee.BX)(Ue,{top:"0px",children:[(0,ee.BX)(Re,{children:[(0,s.t)("Apdex"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.APDEX),size:"sm"})]}),(0,ee.tZ)(Me,{"data-test-id":"apdex-summary-value",isLoading:n,error:i,value:r?(0,we.$1)(p?r.apdex:r["apdex()"],4):null})]}),(0,ee.BX)(Ue,{top:"160px",children:[(0,ee.BX)(Re,{children:[(0,s.t)("Failure Rate"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(t,_e.V$.FAILURE_RATE),size:"sm"})]}),(0,ee.tZ)(Me,{"data-test-id":"failure-rate-summary-value",isLoading:n,error:i,value:r?(0,we.rl)(p?r.failure_rate:r["failure_rate()"]):null})]})]})}function De(e){if(e?.data)return e.data[0]&&0===e.data[0].value&&e.data.shift(),e.data[e.data.length-1]&&0===e.data[e.data.length-1].value&&e.data.pop(),e}Fe.displayName="SidebarCharts",Ae.displayName="ChartLabels";const Be=["transaction.op","transaction"];function Xe(e){let{location:t,eventView:n,organization:a,router:r,isLoading:i,error:o,totals:l,transactionName:c,isShowingMetricsEventCount:u}=e;const d=(0,g.Z)(),m=(0,ie.u)(),x=(0,Ie.e0)(),v=n.statsPeriod,f=n.start?(0,ye.hC)(n.start):void 0,y=n.end?(0,ye.hC)(n.end):void 0,Z=n.project,w=n.environment,b=n.query,S="true"===(0,I.fK)(t.query).utc,_=function(e){let{theme:t,utc:n,isShowingMetricsEventCount:a}=e;const r=t.charts.getColorPalette(3),i={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}};return a?{height:200,grid:[{top:"60px",left:"10px",right:"10px",height:"160px"}],axisPointer:{link:[{xAxisIndex:[0]}]},xAxes:Array.from(new Array(1)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,splitNumber:4,axisLabel:{formatter:we.Du,color:t.chartLabel},...i},{gridIndex:0,splitNumber:4,axisLabel:{formatter:we.Du,color:t.chartLabel},...i}],utc:n,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[r[0],t.gray300],tooltip:{trigger:"axis",truncate:80,valueFormatter:(e,t)=>(0,Ze.CX)(e,(0,p.Px)(t)),nameFormatter:e=>"epm()"===e?"tpm()":e}}:{height:300,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"}],axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:Array.from(new Array(2)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,interval:.2,axisLabel:{formatter:e=>`${(0,we.$1)(e,1)}`,color:t.chartLabel},...i},{gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:e=>(0,we.rl)(e,0),color:t.chartLabel},...i}],utc:n,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[r[1],r[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:(e,t)=>(0,Ze.CX)(e,(0,p.Px)(t)),nameFormatter:e=>"epm()"===e?"tpm()":e}}}({theme:m,utc:S,isShowingMetricsEventCount:u}),T={organization:a,router:r,error:o,isLoading:i,start:f,end:y,utc:S,totals:l},C={start:f||null,end:y||null,period:v},E=u?["count()","tpm()"]:["apdex()","failure_rate()"],k={api:d,start:f,end:y,period:v,project:Z,environment:w,query:b,organization:a,interval:(0,ge.ZS)(C),showLoading:!1,includePrevious:!1,yAxis:E,partial:!0,referrer:"api.performance.transaction-summary.sidebar-chart"};return(0,ee.tZ)(ue.Z,{...k,children:e=>{let{results:a,errored:r,loading:i,reloading:o}=e;const l=u?(a||[]).slice(0,1):a,p=l?l.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[],d={...k},m=new h.MY(b),g=new h.MY("");for(const e of Be)m.hasFilter(e)&&g.setFilterValues(e,m.getFilterValues(e));return d.query=g.formatString(),(0,ee.tZ)(ue.Z,{...d,api:new Ve.KU,queryExtras:(0,Ne.E9)(),children:e=>{const a=e.results?e.results.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[],l={series:p,errored:r,loading:i,reloading:o,chartOptions:_},d={...e,series:a,chartOptions:_};if(u&&a.length){const e=p[0];if(e){e.seriesName=(0,s.t)("Indexed Events");const t=De(e);t&&(p[0]={...e,...t})}const{missingMetrics:t}=Oe({chartData:l,metricsChartData:d,metricsCardinality:x}),n=a[0];if(!t){if(n){n.seriesName=(0,s.t)("Processed Events"),n.lineStyle={type:"dashed",width:1.5};const e=De(n);e&&(a[0]={...n,...e})}p.push(n)}}return(0,ee.tZ)(Fe,{...T,transactionName:c,location:t,eventView:n,chartData:l,isShowingMetricsEventCount:u,metricsChartData:d})}})}})}function Me(e){let{error:t,isLoading:n,value:a,...r}=e;return t?(0,ee.tZ)("div",{...r,children:"—"}):n?(0,ee.tZ)(xe.Z,{height:"24px",...r}):(0,ee.tZ)(Ke,{...r,children:a})}Xe.displayName="SidebarChartsContainer",Me.displayName="ChartSummaryValue";const $e=(0,T.Z)("div",{target:"e1h72ow73"})({name:"bjn8wh",styles:"position:relative"}),Re=(0,T.Z)(W.OT,{target:"e1h72ow72"})({name:"ti75j2",styles:"margin:0"}),Ue=(0,T.Z)("div",{target:"e1h72ow71"})("position:absolute;top:",(e=>e.top),";z-index:1;"),Ke=(0,T.Z)("div",{target:"e1h72ow70"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";"),Qe=(0,r.withRouter)(Xe);function We(e){let{data:t}=e;const n=t.reduce(((e,t)=>t.value+e),0);return(0,ee.tZ)(He,{children:t.map(((e,t)=>(0,ee.BX)(a.Fragment,{children:[(0,ee.tZ)(Ye,{children:(0,we.rl)(e.value/n,0)}),(0,ee.BX)(Je,{"data-test-id":`status-${e.label}`,cursor:e.onClick?"pointer":"default",onClick:e.onClick,children:[(0,ee.tZ)(tt,{style:{width:`${(e.value/n*100).toFixed(2)}%`}}),(0,ee.tZ)(et,{children:e.label})]})]},`${t}:${e.label}`)))})}We.displayName="BreakdownBars";const Ge=We,He=(0,T.Z)("div",{target:"e1yzi37b4"})("display:grid;grid-template-columns:min-content auto;column-gap:",(0,F.Z)(1),";row-gap:",(0,F.Z)(1),";"),Ye=(0,T.Z)("div",{target:"e1yzi37b3"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";text-align:right;"),Je=(0,T.Z)("div",{target:"e1yzi37b2"})("padding-left:",(0,F.Z)(1),";padding-right:",(0,F.Z)(1),";position:relative;cursor:",(e=>e.cursor),";"),et=(0,T.Z)("span",{target:"e1yzi37b1"})("position:relative;color:",(e=>e.theme.textColor),";z-index:2;font-size:",(e=>e.theme.fontSizeSmall),";"),tt=(0,T.Z)("div",{target:"e1yzi37b0"})("border-radius:2px;background-color:",(e=>e.theme.border),";position:absolute;top:0;left:0;z-index:1;height:100%;width:0%;");function nt(e){let{eventView:t,location:n,organization:i}=e;const c=i.features.includes("performance-frontend-use-events-endpoint"),p=t.withColumns([{kind:"function",function:["count","","",void 0]},{kind:"field",field:"transaction.status"}]).withSorts([{kind:"desc",field:"count"}]);return(0,ee.BX)(a.Fragment,{children:[(0,ee.BX)(W.OT,{children:[(0,s.t)("Status Breakdown"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(i,_e.V$.STATUS_BREAKDOWN),size:"sm"})]}),(0,ee.tZ)(l.Z,{eventView:p,location:n,orgSlug:i.slug,referrer:"api.performance.status-breakdown",useEvents:c,children:e=>{let{isLoading:a,error:l,tableData:p}=e;if(a)return(0,ee.tZ)(xe.Z,{height:"124px"});if(l)return(0,ee.tZ)(pe.Z,{height:"124px",children:(0,ee.tZ)(fe.FC,{color:"gray300",size:"lg"})});if(!p||0===p.data.length)return(0,ee.tZ)(at,{small:!0,children:(0,s.t)("No statuses found")});const u=p.data.map((e=>({label:String(e["transaction.status"]),value:parseInt(String(e[c?"count()":"count"]),10),onClick:()=>{const a=new h.MY(t.query);a.removeFilter("!transaction.status").setFilterValues("transaction.status",[e["transaction.status"]]),r.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:a.formatString()}}),(0,o.Z)("performance_views.transaction_summary.status_breakdown_click",{organization:i,status:e["transaction.status"]})}})));return(0,ee.tZ)(Ge,{data:u})}})]})}nt.displayName="StatusBreakdown";const at=(0,T.Z)(G.Z,{target:"e1ilkz930"})({name:"wwhhbg",styles:"height:124px;padding:50px 15%"}),rt=nt;var it=n("./app/components/pagination.tsx"),st=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),ot=n("./app/utils/useProjects.tsx"),lt=n("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),ct=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),pt=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");function ut(e){const{location:t,organization:n,eventView:r,totals:i,projectId:s,transactionName:o}=e,l=(0,pt.TK)(t,"spanSort"),c=(0,m.ro)(t.query?.spansCursor),p=r.withColumns([...Object.values(ct.g),...Object.values(ct.p)].map((e=>({kind:"field",field:e})))).withSorts([{kind:"desc",field:l.field}]),u=pt.uQ[l.field];p.fields=u?u.map((e=>({field:e}))):[];const{projects:d}=(0,ot.Z)();return(0,ee.tZ)(st.Z,{location:t,orgSlug:n.slug,eventView:p,limit:4,perSuspect:0,cursor:c,children:e=>{let{suspectSpans:r,isLoading:l,pageLinks:c}=e;return(0,ee.BX)(a.Fragment,{children:[(0,ee.tZ)(dt,{location:t,organization:n,projectId:s,transactionName:o,pageLinks:c}),(0,ee.tZ)(lt.Z,{location:t,organization:n,transactionName:o,project:d.find((e=>e.id===s)),isLoading:l,suspectSpans:r??[],totals:i,sort:ct.g.SUM_EXCLUSIVE_TIME})]})}})}function dt(e){const{location:t,organization:n,projectId:a,transactionName:i,pageLinks:o}=e,l=(0,pt.hN)({orgSlug:n.slug,transaction:i,projectID:a,query:t.query});return(0,ee.BX)(mt,{children:[(0,ee.tZ)(W.OT,{children:(0,s.t)("Suspect Spans")}),(0,ee.tZ)(Q.ZP,{to:l,size:"xs","data-test-id":"suspect-spans-open-tab",children:(0,s.t)("View All Spans")}),(0,ee.tZ)(ht,{pageLinks:o,onCursor:(e,t,n)=>{r.browserHistory.push({pathname:t,query:{...n,spansCursor:e}})},size:"xs"})]})}ut.displayName="SuspectSpans",dt.displayName="SuspectSpansHeader";const mt=(0,T.Z)("div",{target:"e96e1ws1"})("display:grid;grid-template-columns:1fr auto auto;margin-bottom:",(0,F.Z)(1),";align-items:center;"),ht=(0,T.Z)(it.Z,{target:"e96e1ws0"})("margin:0 0 0 ",(0,F.Z)(1),";");var gt=n("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),xt=n("./app/components/assistant/guideAnchor.tsx"),vt=n("./app/components/links/link.tsx"),ft=n("./app/components/userMisery.tsx"),yt=n("./app/utils/fields/index.ts"),Zt=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),wt=n("./app/views/performance/vitalDetail/vitalInfo.tsx");function bt(e){let{isLoading:t,hasWebVitals:n,error:r,totals:i,location:o,organization:l,transactionName:c,eventView:p}=e;const u=!l.features.includes("performance-frontend-use-events-endpoint");let d=null!==r?(0,ee.tZ)("div",{children:"—"}):(0,ee.tZ)(xe.Z,{height:"34px"});if(!t&&null===r&&i){const e=i.project_threshold_config[1],t=u?i.count_miserable_user:i["count_miserable_user()"],n=u?i.user_misery:i["user_misery()"],a=u?i.count_unique_user:i["count_unique_user()"];d=(0,ee.tZ)(ft.Z,{bars:40,barHeight:30,userMisery:n,miseryLimit:e,totalUsers:a,miserableUsers:t})}const h=l.slug,g=(0,Zt.Pl)({orgSlug:h,transaction:c,projectID:(0,m.ro)(o.query.project),query:o.query});return(0,ee.BX)(a.Fragment,{children:[n&&(0,ee.BX)(a.Fragment,{children:[(0,ee.BX)(St,{children:[(0,ee.BX)(W.OT,{children:[(0,s.t)("Web Vitals"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,s.t)('Web Vitals with p75 better than the "poor" threshold, as defined by Google Web Vitals.'),size:"sm"})]}),(0,ee.tZ)(vt.Z,{to:g,children:(0,ee.tZ)(fe.V$,{})})]}),(0,ee.tZ)(wt.Z,{location:o,vital:[yt.Zl.FCP,yt.Zl.LCP,yt.Zl.FID,yt.Zl.CLS],orgSlug:h,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,project:p.project,hideVitalThresholds:!0,hideDurationDetail:!0}),(0,ee.tZ)(M.uI,{})]}),(0,ee.tZ)(xt.Z,{target:"user_misery",position:"left",children:(0,ee.BX)(W.OT,{children:[(0,s.t)("User Misery"),(0,ee.tZ)(ve.Z,{position:"top",title:(0,_e.$r)(l,_e.V$.USER_MISERY),size:"sm"})]})}),d,(0,ee.tZ)(M.uI,{})]})}bt.displayName="UserStats";const St=(0,T.Z)("div",{target:"e11vlg4d0"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),_t=bt;function Tt(e){let{eventView:t,location:n,totalValues:i,spanOperationBreakdownFilter:o,organization:l,projects:c,isLoading:d,error:h,projectId:g,transactionName:x,onChangeFilter:v}=e;const f=(0,D.V)(),w=!l.features.includes("performance-frontend-use-events-endpoint"),b=l.features.includes("performance-chart-interpolation"),_=(0,m.ro)(n.query.query,""),T=null===i?null:w?i.count:i["count()"],C=(0,y.Ik)(t,c)||null!==i&&S.PE.some((e=>e.vitals.some((e=>{const t=`percentile(${e},${S.GW})`,n=w?(0,p.LY)(t):t;return Number.isFinite(i[n])})))),P=(0,y.iL)(t,c),F=[(0,s.t)("event id"),(0,s.t)("user"),(0,s.t)("total duration"),(0,s.t)("trace id"),(0,s.t)("timestamp")];l.features.includes("session-replay-ui")&&F.push((0,s.t)("replay id"));let R=t.clone();if(l.features.includes("performance-ops-breakdown")){const e=(0,Z.Is)(o,n);e&&(t=t.clone(),t.query=`${t.query} ${e}`.trim(),R=t.clone());const a=o===Z.f1.None?(0,s.t)("operation duration"):`${o} duration`;F.splice(2,0,a);let r=p.zD;o!==Z.f1.None&&(r=(0,Z.T$)(o));const i=[...R.fields];i.splice(2,0,{field:r}),o===Z.f1.None&&i.push(...p.$4.map((e=>({field:e})))),R.fields=i}const U={generatePerformanceTransactionEventsView:()=>{const e=function(e,t){const{selected:a}=Ct(n,{p95:(w?i?.p95:i?.["p95()"])??0,spanOperationBreakdownFilter:o}),r=e.withSorts([a.sort]);if(o===Z.f1.None){const e=[...r.fields.slice(0,t.length)];r.fields=e.filter((e=>{let{field:t}=e;return!(0,p.sU)(t)}))}return r}(R,F);return e.query=_,e},handleOpenAllEventsClick:function(){(0,A.ec)({eventKey:"performance_views.summary.view_in_transaction_events",eventName:"Performance Views: View in All Events from Transaction Summary",organization_id:parseInt(l.id,10)})}},K=(0,u.gp)(l);return(0,ee.BX)(a.Fragment,{children:[(0,ee.BX)(q.or,{children:[(0,ee.BX)(Et,{children:[(0,ee.tZ)(Z.ZP,{organization:l,currentFilter:o,onChangeFilter:v}),(0,ee.BX)(V.Z,{condensed:!0,children:[(0,ee.tZ)(j.Z,{}),(0,ee.tZ)(z.Z,{alignDropdown:"left"})]}),(0,ee.tZ)(kt,{searchSource:"transaction_summary",organization:l,projectIds:t.project,query:_,fields:t.fields,onSearch:function(e){const t=(0,I.fK)({...n.query||{},query:e}),a=E()(t,"cursor");r.browserHistory.push({pathname:n.pathname,query:a})},maxQueryLength:N.dI})]}),(0,ee.tZ)($.Z,{organization:l,location:n,eventView:t,totalValues:T,currentFilter:o,withoutZerofill:b}),(0,ee.tZ)(L.Z,{location:n,organization:l,eventView:R,...U,showTransactions:(0,m.ro)(n.query.showTransactions,M.K0.SLOW),breakdown:(0,Z.q0)(n),titles:F,handleDropdownChange:function(e){const t={pathname:n.pathname,query:{...n.query,showTransactions:e,transactionCursor:void 0}};r.browserHistory.push(t)},generateLink:{id:(0,M.vd)(x),trace:(0,M.Z6)(t.normalizeDateSelection(n)),replayId:(0,M.MF)(f)},handleCellAction:function(e){return(a,i)=>{const s=(0,M.xf)(t.query);(0,B.rh)(s,a,e,i),r.browserHistory.push({pathname:n.pathname,query:{...n.query,cursor:void 0,query:s.formatString()}})}},...Ct(n,{p95:(w?i?.p95:i?.["p95()"])??0,spanOperationBreakdownFilter:o}),forceLoading:d}),(0,ee.tZ)(k.Z,{requireAll:!1,features:["organizations:performance-suspect-spans-view"],children:(0,ee.tZ)(ut,{location:n,organization:l,eventView:t,totals:(0,O.ri)(i?.["count()"])?{"count()":i["count()"]}:null,projectId:g,transactionName:x})}),(0,ee.tZ)(gt.D_,{eventView:t,organization:l,location:n,projects:c,transactionName:x,currentFilter:o}),(0,ee.tZ)(re,{organization:l,location:n,transaction:x,start:t.start,end:t.end,statsPeriod:t.statsPeriod})]}),(0,ee.BX)(q.MF,{children:[(K??null)&&(0,ee.BX)(a.Fragment,{children:[(0,ee.tZ)(Qe,{organization:l,isLoading:d,error:h,totals:i,eventView:t,transactionName:x,isShowingMetricsEventCount:!0}),(0,ee.tZ)(M.uI,{})]}),(0,ee.tZ)(_t,{organization:l,location:n,isLoading:d,hasWebVitals:C,error:h,totals:i,transactionName:x,eventView:t}),!P&&(0,ee.tZ)(rt,{eventView:t,organization:l,location:n}),(0,ee.tZ)(M.uI,{}),K?(0,ee.tZ)(Qe,{organization:l,isLoading:d,error:h,totals:i,eventView:t,transactionName:x}):(0,ee.tZ)(qe,{organization:l,isLoading:d,error:h,totals:i,eventView:t,transactionName:x}),(0,ee.tZ)(M.uI,{}),(0,ee.tZ)(X.Z,{generateUrl:function(e,t){const a=(0,O.ZT)(n.query,{key:(0,p.ZC)(e),value:t});return{...n,query:a}},totalValues:T,eventView:t,organization:l,location:n})]})]})}function Ct(e,t){const n=function(e){let{p95:t,spanOperationBreakdownFilter:n}=e;if(n===Z.f1.None)return[{sort:{kind:"asc",field:"transaction.duration"},value:M.K0.FASTEST,label:(0,s.t)("Fastest Transactions")},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:"transaction.duration"},value:M.K0.SLOW,label:(0,s.t)("Slow Transactions (p95)")},{sort:{kind:"desc",field:"transaction.duration"},value:M.K0.OUTLIER,label:(0,s.t)("Outlier Transactions (p100)")},{sort:{kind:"desc",field:"timestamp"},value:M.K0.RECENT,label:(0,s.t)("Recent Transactions")}];const a=(0,Z.T$)(n),r=n;return[{sort:{kind:"asc",field:a},value:M.K0.FASTEST,label:(0,s.t)("Fastest %s Operations",r)},{query:[["transaction.duration",`<=${t.toFixed(0)}`]],sort:{kind:"desc",field:a},value:M.K0.SLOW,label:(0,s.t)("Slow %s Operations (p95)",r)},{sort:{kind:"desc",field:a},value:M.K0.OUTLIER,label:(0,s.t)("Outlier %s Operations (p100)",r)},{sort:{kind:"desc",field:"timestamp"},value:M.K0.RECENT,label:(0,s.t)("Recent Transactions")}]}(t),a=(0,m.ro)(e.query.showTransactions,M.K0.SLOW);return{selected:n.find((e=>e.value===a))||n[0],options:n}}Tt.displayName="SummaryContent";const Et=(0,T.Z)("div",{target:"ent1li1"})("display:grid;gap:",(0,F.Z)(2),";margin-bottom:",(0,F.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr;}"),kt=(0,T.Z)(P.Z,{target:"ent1li0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/4;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),zt=(0,f.Z)(Tt);function Lt(e){const t=(0,g.Z)(),{location:n,selection:r,organization:s,projects:l}=e;return(0,a.useEffect)((()=>{(0,i.QK)(t,s.slug,r),(0,y.n4)(r),(0,o.Z)("performance_views.transaction_summary.view",{organization:s})}),[r,s,t]),(0,ee.tZ)(u.kP,{children:(0,ee.tZ)(w.ZP,{location:n,organization:s,projects:l,tab:b.Z.TransactionSummary,getDocumentTitle:Pt,generateEventView:qt,childComponent:jt})})}function jt(e){const{location:t,organization:n,eventView:a,projectId:i,transactionName:s,transactionThreshold:c,transactionThresholdMetric:p}=e,u=n.features.includes("performance-frontend-use-events-endpoint"),m=(0,l._)({eventView:Vt(0,a),orgSlug:n.slug,location:t,transactionThreshold:c,transactionThresholdMetric:p,referrer:"api.performance.transaction-summary",useEvents:u}),{data:h,isLoading:g,error:x}=m,v=(0,Z.q0)(t),f=h?.data?.[0]??null;return(0,ee.tZ)(zt,{location:t,organization:n,eventView:a,projectId:i,transactionName:s,isLoading:g,error:x,totalValues:f,onChangeFilter:e=>{(0,o.Z)("performance_views.filter_dropdown.selection",{organization:n,action:e});const a={...(0,d.V)(t,[_.Oo,_.mo]),...(0,Z.bz)(e)};e===Z.f1.None&&delete a.breakdown,r.browserHistory.push({pathname:t.pathname,query:a})},spanOperationBreakdownFilter:v})}function Pt(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,s.t)("Performance")].join(" - "):[(0,s.t)("Summary"),(0,s.t)("Performance")].join(" - ")}function qt(e){let{location:t,organization:n,transactionName:a}=e;const r=(0,m.ro)(t.query.query,""),i=new h.MY(r);i.setFilterValues("event.type",["transaction"]),i.setFilterValues("transaction",[a]),Object.keys(i.filters).forEach((e=>{(0,p.h1)(e)&&i.removeFilter(e)}));const s=["id","user.display","transaction.duration","trace","timestamp"];return n.features.includes("session-replay-ui")&&s.push("replayId"),c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:a,fields:s,query:i.formatString(),projects:[]},t)}function Vt(e,t){const n=S.PE.map((e=>{let{vitals:t}=e;return t})).reduce(((e,t)=>(t.forEach((t=>e.push(t))),e)),[]);return t.withColumns([{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["count_unique","user",void 0,void 0]},{kind:"function",function:["failure_rate","",void 0,void 0]},{kind:"function",function:["tpm","",void 0,void 0]},{kind:"function",function:["count_miserable","user",void 0,void 0]},{kind:"function",function:["user_misery","",void 0,void 0]},{kind:"function",function:["apdex","",void 0,void 0]},...n.map((e=>({kind:"function",function:["percentile",e,S.GW.toString(),void 0]})))])}Lt.displayName="TransactionOverview",jt.displayName="OverviewContentWrapper";const It=(0,v.Z)((0,f.Z)((0,x.Z)(Lt)))},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,n)=>{"use strict";function a(e){let{orgSlug:t,transaction:n,query:a,spanSlug:r,projectID:i}=e;const s=function(e){let{orgSlug:t,spanSlug:n}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(n.op)}:${n.group}/`}({orgSlug:t,spanSlug:r});return{pathname:s,query:{transaction:n,project:i,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:a.query}}}let r;n.d(t,{BP:()=>a,wL:()=>r}),function(e){e.MIN="min",e.MAX="max"}(r||(r={}))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var a=n("./app/components/gridEditable/index.tsx"),r=n("./app/components/gridEditable/sortLink.tsx"),i=n("./app/components/links/link.tsx"),s=n("./app/locale.tsx"),o=n("./app/utils.tsx"),l=n("./app/utils/discover/fieldRenderers.tsx"),c=n("./app/utils/discover/fields.tsx"),p=n("./app/utils/discover/styles.tsx"),u=n("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){const{location:t,organization:n,transactionName:r,isLoading:i,suspectSpans:s,totals:l,sort:c,project:p}=e,u=s.map((e=>({operation:e.op,group:e.group,description:e.description,totalCount:e.count,frequency:(0,o.ri)(e.frequency)&&(0,o.ri)(l?.["count()"])?Math.min(1,e.frequency/l["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,m.tZ)(a.ZP,{isLoading:i,data:u,columnOrder:v[c].map((e=>f[e])),columnSortBy:[],grid:{renderHeadCell:g,renderBodyCell:x(t,n,r,p)},location:t})}function g(e,t){const n=(0,c.qG)(e.key,y[e.key]);return(0,m.tZ)(r.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function x(e,t,n,a){return(r,o)=>{const c=(0,l.Js)(r.key,y);if("description"===r.key){const l=(0,u.BP)({orgSlug:t.slug,transaction:n,query:e.query,spanSlug:{op:o.operation,group:o.group},projectID:a?.id});return(0,m.tZ)(p.W2,{children:(0,m.tZ)(i.Z,{to:l,children:o[r.key]??(0,s.t)("(unnamed span)")})})}return c(o,{location:e,organization:t})}}h.displayName="SuspectSpansTable",g.displayName="renderHeadCell";const v={[d.g.COUNT]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.SUM_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P50_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p50ExclusiveTime","sumExclusiveTime"],[d.p.P75_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P95_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p95ExclusiveTime","sumExclusiveTime"],[d.p.P99_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p99ExclusiveTime","sumExclusiveTime"]},f={operation:{key:"operation",name:(0,s.t)("Span Operation"),width:a.z7},description:{key:"description",name:(0,s.t)("Span Name"),width:a.z7},totalCount:{key:"totalCount",name:(0,s.t)("Total Count"),width:a.z7},frequency:{key:"frequency",name:(0,s.t)("Frequency"),width:a.z7},avgOccurrences:{key:"avgOccurrences",name:(0,s.t)("Average Occurrences"),width:a.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,s.t)("P50 Self Time"),width:a.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,s.t)("P75 Self Time"),width:a.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,s.t)("P95 Self Time"),width:a.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,s.t)("P99 Self Time"),width:a.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,s.t)("Total Self Time"),width:a.z7}},y={operation:"string",description:"string",totalCount:"integer",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"./app/views/performance/transactionSummary/transactionVitals/constants.tsx":(e,t,n)=>{"use strict";n.d(t,{GW:()=>o,PE:()=>p,QB:()=>u,sE:()=>s});var a=n("./app/utils/fields/index.ts"),r=n("./app/utils/performance/vitals/constants.tsx"),i=n("./app/utils/theme.tsx");const s=100,o=.75,l=[{vitals:[a.Zl.FP,a.Zl.FCP,a.Zl.LCP],min:0},{vitals:[a.Zl.FID],min:0,precision:2},{vitals:[a.Zl.CLS],min:0,precision:2}],c=[...i.ZP.charts.getColorPalette(l.reduce(((e,t)=>{let{vitals:n}=t;return e+n.length}),0)-1)].reverse(),p=l.map((e=>({...e,colors:c.splice(0,e.vitals.length)}))),u=l.reduce(((e,t)=>{let{vitals:n}=t;return n.forEach((t=>{const n=r.r9[t].slug;e.push(`${n}Start`),e.push(`${n}End`)})),e}),[])},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),r=n("./app/views/performance/landing/vitalsCards.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{vital:t,location:n,isLoading:s,hideBar:o,hideStates:l,hideVitalPercentNames:c,hideVitalThresholds:p,hideDurationDetail:u}=e;const d=Array.isArray(t)?t:[t],m={vital:t,showBar:!o,showStates:!l,showVitalPercentNames:!c,showVitalThresholds:!p,showDurationDetail:!u};return(0,i.tZ)(a.Z,{location:n,vitals:d,children:e=>{let{isLoading:t,vitalsData:n}=e;return(0,i.tZ)(r.JO,{...m,isLoading:s||t,data:n})}})}s.displayName="VitalInfo";const o=s},"../node_modules/lodash/_baseLt.js":e=>{e.exports=function(e,t){return e<t}},"../node_modules/lodash/_baseMean.js":(e,t,n)=>{var a=n("../node_modules/lodash/_baseSum.js");e.exports=function(e,t){var n=null==e?0:e.length;return n?a(e,t)/n:NaN}},"../node_modules/lodash/_baseSum.js":e=>{e.exports=function(e,t){for(var n,a=-1,r=e.length;++a<r;){var i=t(e[a]);void 0!==i&&(n=void 0===n?i:n+i)}return n}},"../node_modules/lodash/mean.js":(e,t,n)=>{var a=n("../node_modules/lodash/_baseMean.js"),r=n("../node_modules/lodash/identity.js");e.exports=function(e){return a(e,r)}},"../node_modules/lodash/min.js":(e,t,n)=>{var a=n("../node_modules/lodash/_baseExtremum.js"),r=n("../node_modules/lodash/_baseLt.js"),i=n("../node_modules/lodash/identity.js");e.exports=function(e){return e&&e.length?a(e,i,r):void 0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionOverview_index_tsx-node_modules_lodash_me-93c93c.4c8c2f925cb91d98adac1db95c87ec9e.js.map