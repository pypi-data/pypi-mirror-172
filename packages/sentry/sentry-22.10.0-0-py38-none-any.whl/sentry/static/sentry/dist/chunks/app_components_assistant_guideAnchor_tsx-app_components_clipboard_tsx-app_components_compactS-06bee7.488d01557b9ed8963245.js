"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_assistant_guideAnchor_tsx-app_components_clipboard_tsx-app_components_compactS-06bee7"],{"./app/actionCreators/guides.tsx":(e,t,s)=>{if(s.r(t),s.d(t,{closeGuide:()=>g,dismissGuide:()=>f,fetchGuides:()=>c,nextStep:()=>p,recordDismiss:()=>y,recordFinish:()=>x,registerAnchor:()=>d,setForceHide:()=>h,toStep:()=>m,unregisterAnchor:()=>u}),"app"==s.j)var o=s("../node_modules/@sentry/core/esm/exports.js");var r=s("./app/api.tsx"),n=s("./app/stores/configStore.tsx"),i=s("./app/stores/guideStore.tsx"),a=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx");const l=new r.KU;async function c(){try{const e=await l.requestPromise("/assistant/");i.Z.fetchSucceeded(e)}catch(e){401!==e.status&&403!==e.status&&o.Tb(e)}}function d(e){i.Z.registerAnchor(e)}function u(e){i.Z.unregisterAnchor(e)}function p(){i.Z.nextStep()}function h(e){i.Z.setForceHide(e)}function m(e){i.Z.toStep(e)}function g(e){i.Z.closeGuide(e)}function f(e,t,s){y(e,t,s),g(!0)}function x(e,t){l.request("/assistant/",{method:"PUT",data:{guide:e,status:"viewed"}}),n.Z.get("user")&&(0,a.Z)("assistant.guide_finished",{organization:t,guide:e})}function y(e,t,s){l.request("/assistant/",{method:"PUT",data:{guide:e,status:"dismissed"}}),n.Z.get("user")&&(0,a.Z)("assistant.guide_dismissed",{organization:s,guide:e,step:t})}},"./app/components/assistant/guideAnchor.tsx":(e,t,s)=>{s.d(t,{Z:()=>x});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),i=s("../node_modules/@sentry/core/esm/exports.js"),a=s("./app/actionCreators/guides.tsx"),l=s("./app/components/button.tsx"),c=s("./app/components/hovercard.tsx"),d=s("./app/locale.tsx"),u=s("./app/stores/guideStore.tsx"),p=s("./app/styles/space.tsx"),h=s("./app/utils/theme.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends n.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{active:!1,step:0,orgId:null}),(0,o.Z)(this,"unsubscribe",u.Z.listen((e=>this.onGuideStateChange(e)),void 0)),(0,o.Z)(this,"containerElement",(0,n.createRef)()),(0,o.Z)(this,"handleFinish",(e=>{e.stopPropagation(),this.props.onStepComplete?.(e),this.props.onFinish?.(e);const{currentGuide:t,orgId:s}=this.state;t&&(0,a.recordFinish)(t.guide,s),(0,a.closeGuide)()})),(0,o.Z)(this,"handleNextStep",(e=>{e.stopPropagation(),this.props.onStepComplete?.(e),(0,a.nextStep)()})),(0,o.Z)(this,"handleDismiss",(e=>{e.stopPropagation();const{currentGuide:t,step:s,orgId:o}=this.state;t&&(0,a.dismissGuide)(t.guide,s,o)}))}componentDidMount(){const{target:e}=this.props;(0,a.registerAnchor)(e)}componentDidUpdate(e,t){if(this.containerElement.current&&!t.active&&this.state.active)try{const{top:e}=this.containerElement.current.getBoundingClientRect(),t=e+window.pageYOffset-window.innerHeight/2;window.scrollTo({top:t})}catch(e){i.Tb(e)}}componentWillUnmount(){const{target:e}=this.props;(0,a.unregisterAnchor)(e),this.unsubscribe()}onGuideStateChange(e){const t=e.currentGuide?.steps[e.currentStep]?.target===this.props.target&&!e.forceHide;this.setState({active:t,currentGuide:e.currentGuide??void 0,step:e.currentStep,orgId:e.orgId})}getHovercardBody(){const{to:e}=this.props,{currentGuide:t,step:s}=this.state;if(!t)return null;const o=t.steps.length,r=s+1,i=t.steps[s],a=r===o,l=o>1,c="#assistant"===window.location.hash?"#":"",u=(0,m.tZ)(w,{size:"sm",translucentBorder:!0,href:c,onClick:this.handleDismiss,priority:"link",children:i.dismissText||(0,d.t)("Dismiss")});return(0,m.BX)(y,{"data-test-id":"guide-container",children:[(0,m.BX)(Z,{children:[i.title&&(0,m.tZ)(b,{children:i.title}),(0,m.tZ)(j,{children:i.description})]}),(0,m.BX)(S,{children:[(0,m.tZ)("div",{children:a?(0,m.BX)(n.Fragment,{children:[(0,m.tZ)(v,{size:"sm",translucentBorder:!0,to:e,onClick:this.handleFinish,children:i.nextText||(l?(0,d.t)("Enough Already"):(0,d.t)("Got It"))}),i.hasNextGuide&&u]}):(0,m.BX)(n.Fragment,{children:[(0,m.tZ)(v,{size:"sm",translucentBorder:!0,onClick:this.handleNextStep,to:e,children:i.nextText||(0,d.t)("Next")}),!i.cantDismiss&&u]})}),l&&(0,m.tZ)(P,{children:(0,d._N)("[currentStepCount] of [totalStepCount]",{currentStepCount:r,totalStepCount:o})})]})]})}render(){const{children:e,position:t,offset:s,containerClassName:o}=this.props,{active:r}=this.state;return r?(0,m.tZ)(C,{forceVisible:!0,body:this.getHovercardBody(),tipColor:"purple300",position:t,offset:s,containerClassName:o,children:(0,m.tZ)("span",{ref:this.containerElement,children:e})}):e||null}}function f(e){let{disabled:t,children:s,...o}=e;return t?(0,m.tZ)(n.Fragment,{children:s}):(0,m.tZ)(g,{...o,children:s})}g.displayName="BaseGuideAnchor",f.displayName="GuideAnchor";const x=f,y=(0,r.Z)("div",{target:"emyn818"})("display:grid;grid-template-rows:repeat(2, auto);gap:",(0,p.Z)(2),";text-align:center;line-height:1.5;background-color:",(e=>e.theme.purple300),";border-color:",(e=>e.theme.purple300),";color:",(e=>e.theme.white),";"),Z=(0,r.Z)("div",{target:"emyn817"})("display:grid;grid-template-rows:repeat(2, auto);gap:",(0,p.Z)(1),";a{color:",(e=>e.theme.white),";text-decoration:underline;}"),b=(0,r.Z)("div",{target:"emyn816"})("font-weight:bold;font-size:",(e=>e.theme.fontSizeExtraLarge),";"),j=(0,r.Z)("div",{target:"emyn815"})("font-size:",(e=>e.theme.fontSizeMedium),";"),S=(0,r.Z)("div",{target:"emyn814"})("display:grid;grid-template-rows:repeat(2, auto);gap:",(0,p.Z)(1),";"),v=(0,r.Z)(l.ZP,{target:"emyn813"})("font-size:",(e=>e.theme.fontSizeMedium),";min-width:40%;"),w=(0,r.Z)(v,{target:"emyn812"})("margin-left:",(0,p.Z)(1),";&:hover,&:focus,&:active{color:",(e=>e.theme.white),";}color:",(e=>e.theme.white),";"),P=(0,r.Z)("div",{target:"emyn811"})("font-size:",(e=>e.theme.fontSizeSmall),";font-weight:bold;text-transform:uppercase;"),C=(0,r.Z)(c.uI,{target:"emyn810"})(c.uT,"{background-color:",h.ZP.purple300,";margin:-1px;border-radius:",h.ZP.borderRadius,";width:300px;}")},"./app/components/badge.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,o.Z)((e=>{let{children:t,text:s,...o}=e;return(0,n.tZ)("span",{...o,children:t??s})}),{target:"e1gotaso0"})("display:inline-block;height:20px;min-width:20px;line-height:20px;border-radius:20px;padding:0 5px;margin-left:",(0,r.Z)(.5),";font-size:75%;font-weight:600;text-align:center;color:",(e=>e.theme.badge[e.type??"default"].color),";background:",(e=>e.theme.badge[e.type??"default"].background),";transition:background 100ms linear;position:relative;")},"./app/components/clipboard.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("../node_modules/react/index.js"),r=s("../node_modules/react-dom/profiling.js"),n=s("../node_modules/copy-text-to-clipboard/index.js"),i=s("./app/actionCreators/indicator.tsx"),a=s("./app/locale.tsx");const l=function(e){let{hideMessages:t=!1,successMessage:s=(0,a.t)("Copied to clipboard"),errorMessage:l=(0,a.t)("Error copying to clipboard"),value:c,onSuccess:d,onError:u,hideUnsupported:p,children:h}=e;const[m,g]=(0,o.useState)(),f=(0,o.useCallback)((()=>{if(!(0,n.Z)(c))return t||(0,i.Iw)(l),void u?.();t||(0,i.S9)(s),d?.()}),[c,u,d,l,s,t]);(0,o.useEffect)((()=>(m?.addEventListener("click",f),()=>m?.removeEventListener("click",f))),[f,m]);const x=(0,o.useCallback)((e=>{g((0,r.findDOMNode)(e))}),[]);return p&&!document.queryCommandSupported?.("copy")?null:(0,o.isValidElement)(h)?(0,o.cloneElement)(h,{ref:x}):null}},"./app/components/compactSelect.tsx":(e,t,s)=>{s.d(t,{Z:()=>v});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/react-select/dist/index-4bd03571.esm.js"),i=s("../node_modules/@react-aria/button/dist/module.js"),a=s("../node_modules/@react-aria/focus/dist/module.js"),l=s("../node_modules/@react-aria/menu/dist/module.js"),c=s("../node_modules/@react-aria/overlays/dist/module.js"),d=s("../node_modules/@react-aria/utils/dist/module.js"),u=s("../node_modules/@react-stately/menu/dist/module.js"),p=s("./app/components/badge.tsx"),h=s("./app/components/button.tsx"),m=s("./app/components/dropdownButton.tsx"),g=s("./app/components/forms/controls/selectControl.tsx"),f=s("./app/components/loadingIndicator.tsx"),x=s("./app/styles/space.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e,t){return e.reduce(((e,s)=>s.options?e.concat(Z(s.options,t)):s.value===t?e.concat(s):e),[])}const b=e=>{let{innerProps:t,...s}=e;const{hasValue:o,selectProps:i}=s,{isSearchable:a,menuTitle:l,isClearable:c,isLoading:d}=i;return(0,y.BX)(r.Fragment,{children:[(l||c||d)&&(0,y.BX)(z,{children:[(0,y.tZ)(k,{children:(0,y.tZ)("span",{children:l})}),d&&(0,y.tZ)(M,{size:12,mini:!0}),o&&c&&!d&&(0,y.tZ)(I,{type:"button",size:"zero",borderless:!0,onClick:()=>s.clearValue(),tabIndex:a?-1:void 0,children:"Clear"})]}),(0,y.tZ)(n.c.Control,{...s,innerProps:{...t,...!a&&{"aria-hidden":!0}}})]})};function j(e){let{targetRef:t,onClose:s,offset:o=8,crossOffset:n=0,containerPadding:i=8,placement:l="bottom left",shouldCloseOnBlur:u=!0,isDismissable:p=!0,maxMenuHeight:h=400,minMenuWidth:m,children:g}=e;const f=(0,r.useRef)(null),{overlayProps:x}=(0,c.Ir)({isOpen:!0,onClose:s,shouldCloseOnBlur:u,isDismissable:p,shouldCloseOnInteractOutside:e=>e&&t.current!==e&&!t.current?.contains(e)},f),{overlayProps:Z}=(0,c.tN)({targetRef:t,overlayRef:f,offset:o,crossOffset:n,placement:l,containerPadding:i,isOpen:!0}),b=Z.style?.maxHeight?Math.min(+Z.style?.maxHeight,h):"none";return(0,y.tZ)(_,{ref:f,minWidth:m,...(0,d.dG)(x,Z),children:(0,y.tZ)(a.MT,{restoreFocus:!0,autoFocus:!0,children:g(b)})})}function S(e){let{options:t,onChange:s,defaultValue:o,value:n,isDisabled:a,isSearchable:c=!1,multiple:p,placeholder:h="Search…",onChangeValueMap:f,trigger:x,triggerLabel:S,triggerProps:v,size:_="md",className:z,renderWrapAs:k,closeOnSelect:M=!0,menuTitle:I,onClose:q,...A}=e;const E=a||0===t?.length,N=(0,r.useRef)(null),L=(0,u.W)(A),{menuTriggerProps:B}=(0,l.u4)({type:"listbox",isDisabled:E},L,N),{buttonProps:F}=(0,i.U)({onPress:()=>L.toggle(),isDisabled:E,...B},N),[O,T]=(0,r.useState)(n??o),D=(0,r.useCallback)((()=>{const e=n??O,s=(Array.isArray(e)?e:[e]).map((e=>Z(t,e))).flat();return(0,y.BX)(r.Fragment,{children:[(0,y.tZ)(P,{children:s[0]?.label??""}),s.length>1&&(0,y.tZ)(C,{text:"+"+(s.length-1)})]})}),[t,n,O]),[G,R]=(0,r.useState)(null);function H(e){const t=f??(e=>e.map((e=>e.value))),o=Array.isArray(e)?t(e):e?.value;T(o),s?.(e),M&&!p&&L.close()}(0,r.useEffect)((()=>{R(D())}),[D]);const[X,$]=(0,r.useState)(),U=(0,r.useCallback)((async()=>{await new Promise((e=>window.setTimeout(e)));const e=N.current?.offsetWidth;e&&$(e)}),[N]);return(0,d.yU)({ref:N,onResize:U}),(0,r.useEffect)((()=>{void 0===window.ResizeObserver&&U()}),[U]),(0,y.BX)(w,{className:z,as:k,role:"presentation",children:[x?x({props:{size:_,isOpen:L.isOpen,...v,...F},ref:N}):(0,y.tZ)(m.Z,{ref:N,size:_,isOpen:L.isOpen,...v,...F,children:S??G}),L.isOpen?(0,y.tZ)(j,{targetRef:N,onClose:function(){q?.(),L.close()},minMenuWidth:X,...A,children:e=>(0,y.tZ)(g.Z,{components:{Control:b,ClearIndicator:null},...A,options:t,value:n??O,multiple:p,onChange:H,size:_,menuTitle:I,placeholder:h,isSearchable:c,menuHeight:e,menuPlacement:"bottom",menuIsOpen:!0,isCompact:!0,controlShouldRenderValue:!1,hideSelectedOptions:!1,menuShouldScrollIntoView:!1,blurInputOnSelect:!1,closeMenuOnSelect:!1,closeMenuOnScroll:!1,openMenuOnFocus:!0})}):null]})}b.displayName="CompactSelectControl",j.displayName="Menu",S.displayName="CompactSelect";const v=S,w=(0,o.Z)("div",{target:"ems9bqr7"})(""),P=(0,o.Z)("span",{target:"ems9bqr6"})((e=>e.theme.overflowEllipsis)," text-align:left;"),C=(0,o.Z)(p.Z,{target:"ems9bqr5"})({name:"enavay",styles:"flex-shrink:0;top:auto"}),_=(0,o.Z)("div",{target:"ems9bqr4"})("max-width:calc(100% - ",(0,x.Z)(2),");border-radius:",(e=>e.theme.borderRadius),";background:",(e=>e.theme.backgroundElevated),";box-shadow:0 0 0 1px ",(e=>e.theme.translucentBorder),",",(e=>e.theme.dropShadowHeavy),";font-size:",(e=>e.theme.fontSizeMedium),";overflow:hidden;z-index:",(e=>e.theme.zIndex.dropdown),"!important;",(e=>e.minWidth&&`min-width: ${e.minWidth}px;`),";"),z=(0,o.Z)("div",{target:"ems9bqr3"})("position:relative;display:flex;align-items:center;justify-content:space-between;padding:",(0,x.Z)(.75)," ",(0,x.Z)(1)," ",(0,x.Z)(.75)," ",(0,x.Z)(1.5),";box-shadow:0 1px 0 ",(e=>e.theme.translucentInnerBorder),";z-index:1;"),k=(0,o.Z)("span",{target:"ems9bqr2"})("font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.headingColor),";white-space:nowrap;margin-right:",(0,x.Z)(2),";"),M=(0,o.Z)(f.Z,{target:"ems9bqr1"})("&&{margin:",(0,x.Z)(.5)," ",(0,x.Z)(.5)," ",(0,x.Z)(.5)," ",(0,x.Z)(1),";height:",(0,x.Z)(1.5),";width:",(0,x.Z)(1.5),";}"),I=(0,o.Z)(h.ZP,{target:"ems9bqr0"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";")},"./app/components/globalSelectionLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/query-string/index.js"),n=s("./app/components/links/link.tsx"),i=s("./app/components/organizations/pageFilters/utils.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{location:t,to:s}=e,o=(0,i.GN)(t?.query),l=Object.keys(o).length>0,c="object"==typeof s&&s.query?{...o,...s.query}:o;if(t){const t=l?"string"==typeof s?{pathname:s,query:c}:{...s,query:c}:{},o=l?{...e,to:t}:{...e,to:s};return(0,a.tZ)(n.Z,{...o})}let d={};"object"==typeof s&&s.search&&(d=r.parse(s.search)),d={...d,...o},"object"==typeof s&&s.query&&(d={...d,...s.query});const u=r.stringify(d),p=("string"==typeof s?s:s.pathname)+(u?`?${u}`:"");return(0,a.tZ)("a",{...e,href:p})}l.displayName="GlobalSelectionLink";const c=(0,o.withRouter)(l)},"./app/components/hovercard.tsx":(e,t,s)=>{s.d(t,{h4:()=>m,iz:()=>f,uI:()=>p,uT:()=>g});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/react-dom/profiling.js"),i=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=s("../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),l=s("./app/components/overlay.tsx"),c=s("./app/styles/space.tsx"),d=s("./app/utils/useHoverOverlay.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{body:t,bodyClassName:s,children:o,className:c,containerClassName:p,header:f,offset:x=12,displayTimeout:y=100,tipBorderColor:Z="translucentBorder",tipColor:b="backgroundElevated",...j}=e;const S=(0,i.u)(),{wrapTrigger:v,isOpen:w,overlayProps:P,placement:C,arrowData:_,arrowProps:z}=(0,d._)("hovercard",{offset:x,displayTimeout:y,isHoverable:!0,className:p,...j});if(!t&&!f)return(0,u.tZ)(r.Fragment,{children:v(o)});const k=w&&(0,u.tZ)(l.w,{zIndex:S.zIndex.hovercard,...P,children:(0,u.BX)(h,{animated:!0,arrowProps:{...z,size:20,background:b,border:Z},originPoint:_,placement:C,className:c,children:[f?(0,u.tZ)(m,{children:f}):null,t?(0,u.tZ)(g,{className:s,children:t}):null]})});return(0,u.BX)(r.Fragment,{children:[v(o),(0,n.createPortal)((0,u.tZ)(a.M,{children:k}),document.body)]})}p.displayName="Hovercard";const h=(0,o.Z)(l.a,{target:"e19qyv1k3"})("width:295px;line-height:1.2;h6{color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeExtraSmall),";margin-bottom:",(0,c.Z)(1),";text-transform:uppercase;}"),m=(0,o.Z)("div",{target:"e19qyv1k2"})("font-size:",(e=>e.theme.fontSizeMedium),";background:",(e=>e.theme.backgroundSecondary),";border-bottom:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadiusTop),";font-weight:600;word-wrap:break-word;padding:",(0,c.Z)(1.5),";"),g=(0,o.Z)("div",{target:"e19qyv1k1"})("padding:",(0,c.Z)(2),";min-height:30px;"),f=(0,o.Z)("div",{target:"e19qyv1k0"})("position:relative;margin-top:",(0,c.Z)(1.5),";margin-bottom:",(0,c.Z)(1),";&:before{display:block;position:absolute;content:'';height:1px;top:50%;left:",(0,c.Z)(2),";right:",(0,c.Z)(2),";background:",(e=>e.theme.innerBorder),";z-index:-1;}h6{display:inline;padding-right:",(0,c.Z)(1),";background:",(e=>e.theme.background),";}")},"./app/utils/projects.tsx":(e,t,s)=>{s.d(t,{Z:()=>x});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/memoize.js"),i=s.n(n),a=s("../node_modules/lodash/partition.js"),l=s.n(a),c=s("../node_modules/lodash/uniqBy.js"),d=s.n(c),u=s("./app/stores/projectsStore.tsx"),p=s("./app/utils.tsx"),h=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/withApi.tsx"),g=s("./app/utils/withProjects.tsx");class f extends r.Component{constructor(){var e;super(...arguments),e=this,(0,o.Z)(this,"state",{fetchedProjects:[],projectsFromStore:[],initiallyLoaded:!1,fetching:!1,isIncomplete:null,hasMore:null,prevSearch:null,nextCursor:null,fetchError:null}),(0,o.Z)(this,"fetchQueue",new Set),(0,o.Z)(this,"getProjectsMap",i()((e=>new Map(e.map((e=>[e.slug,e])))))),(0,o.Z)(this,"getProjectsIdMap",i()((e=>new Map(e.map((e=>[parseInt(e.id,10),e])))))),(0,o.Z)(this,"loadSpecificProjects",(()=>{const{slugs:e,projects:t}=this.props,s=this.getProjectsMap(t),[o,r]=l()(e,(e=>s.has(e))),n=o.map((e=>s.get(e))).filter(p.ri);r.forEach((e=>this.fetchQueue.add(e))),this.setState({fetchedProjects:r.map((e=>({slug:e}))),initiallyLoaded:!!o.length,projectsFromStore:n}),r.length&&this.fetchSpecificProjects()})),(0,o.Z)(this,"loadSpecificProjectsFromIds",(()=>{const{projectIds:e,projects:t}=this.props,s=this.getProjectsIdMap(t),[o,r]=l()(e,(e=>s.has(e)));if(r.length)return void this.loadAllProjects();const n=o.map((e=>s.get(e))).filter(p.ri);this.setState({initiallyLoaded:!!o.length,projectsFromStore:n})})),(0,o.Z)(this,"fetchSpecificProjects",(async()=>{const{api:e,orgId:t,passthroughPlaceholderProject:s}=this.props;if(!this.fetchQueue.size)return;this.setState({fetching:!0});let o=[],r=null;try{const{results:s}=await y(e,t,{slugs:Array.from(this.fetchQueue)});o=s}catch(e){console.error(e),r=e}const n=this.getProjectsMap(o),i=Array.from(this.fetchQueue).map((e=>n.has(e)?n.get(e):s?{slug:e}:null)).filter(p.ri);this.setState({fetchedProjects:i,isIncomplete:this.fetchQueue.size!==o.length,initiallyLoaded:!0,fetching:!1,fetchError:r}),this.fetchQueue.clear()})),(0,o.Z)(this,"loadAllProjects",(async()=>{const{api:e,orgId:t,limit:s,allProjects:o}=this.props;this.setState({fetching:!0});try{const{results:r,hasMore:n,nextCursor:i}=await y(e,t,{limit:s,allProjects:o});this.setState({fetching:!1,fetchedProjects:r,initiallyLoaded:!0,hasMore:n,nextCursor:i})}catch(e){console.error(e),this.setState({fetching:!1,fetchedProjects:[],initiallyLoaded:!0,fetchError:e})}})),(0,o.Z)(this,"handleSearch",(async function(t){let{append:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{api:o,orgId:r,limit:n}=e.props,{prevSearch:i}=e.state,a=e.state.nextCursor;e.setState({fetching:!0});try{const{results:l,hasMore:c,nextCursor:u}=await y(o,r,{search:t,limit:n,prevSearch:i,cursor:a});e.setState((e=>{let o;return o=s?d()([...e.fetchedProjects,...l],(e=>{let{slug:t}=e;return t})):l,{fetchedProjects:o,hasMore:c,fetching:!1,prevSearch:t,nextCursor:u}}))}catch(t){console.error(t),e.setState({fetching:!1,fetchError:t})}}))}componentDidMount(){const{slugs:e,projectIds:t}=this.props;e?.length?this.loadSpecificProjects():t?.length?this.loadSpecificProjectsFromIds():this.loadAllProjects()}componentDidUpdate(e){const{projects:t}=this.props;t!==e.projects&&this.updateProjectsFromStore()}updateProjectsFromStore(){const{allProjects:e,projects:t,slugs:s}=this.props;if(e)this.setState({fetchedProjects:t});else if(s?.length){const e=this.getProjectsMap(t),o=s.map((t=>e.get(t))).filter(p.ri);this.setState({projectsFromStore:o})}}render(){const{slugs:e,children:t}=this.props;return t({projects:this.state.initiallyLoaded?[...this.state.fetchedProjects,...this.state.projectsFromStore]:e&&e.map((e=>({slug:e})))||[],isIncomplete:this.state.isIncomplete,fetching:this.state.fetching,hasMore:this.state.hasMore,onSearch:this.handleSearch,initiallyLoaded:this.state.initiallyLoaded,fetchError:this.state.fetchError})}}f.displayName="BaseProjects",(0,o.Z)(f,"defaultProps",{passthroughPlaceholderProject:!0});const x=(0,g.Z)((0,m.Z)(f));async function y(e,t){let{slugs:s,search:o,limit:r,prevSearch:n,cursor:i,allProjects:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={collapse:["latestDeploys"]};if(s&&s.length&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),o&&(l.query=`${l.query?`${l.query} `:""}${o}`),(n||o)&&n!==o||!i||(l.cursor=i),r&&(l.per_page=r),a){const e=u.Z.getAll();if(!u.Z.isLoading())return{results:e,hasMore:!1};l.all_projects=1}let c=!1,d=null;const[p,,m]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:l}),g=m?.getResponseHeader("Link");if(g){const e=(0,h.Z)(g);c=e&&(e.next.results||e.previous.results),d=e.next.cursor}return a&&u.Z.loadInitialData(p),{results:p,hasMore:c,nextCursor:d}}},"./app/utils/selectText.tsx":(e,t,s)=>{function o(e){if(e instanceof HTMLInputElement&&"text"===e.type)e.select();else if(e instanceof Node&&window.getSelection){const t=document.createRange();t.selectNode(e);const s=window.getSelection();s?.removeAllRanges(),s?.addRange(t)}}s.d(t,{e:()=>o})},"./app/utils/useProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>p}),s("../node_modules/core-js/modules/es.array.includes.js");var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/uniqBy.js"),n=s.n(r),i=s("./app/stores/organizationStore.tsx"),a=s("./app/stores/projectsStore.tsx"),l=s("./app/stores/useLegacyStore.tsx"),c=s("./app/utils/parseLinkHeader.tsx"),d=s("./app/utils/useApi.tsx");async function u(e,t){let{slugs:s,search:o,limit:r,lastSearch:n,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={collapse:["latestDeploys"]};void 0!==s&&s.length>0&&(a.query=s.map((e=>`slug:${e}`)).join(" ")),o&&(a.query=`${a.query??""}${o}`.trim());const l=!n&&!o||n===o;l&&i&&(a.cursor=i),void 0!==r&&(a.per_page=r);let d=!1,u=null;const[p,,h]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:a}),m=h?.getResponseHeader("Link");if(m){const e=(0,c.Z)(m);d=e?.next?.results||e?.previous?.results,u=e?.next?.cursor}return{results:p,hasMore:d,nextCursor:u}}const p=function(){let{limit:e,slugs:t,orgId:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(0,d.Z)(),{organization:c}=(0,l.X)(i.Z),p=(0,l.X)(a.Z),h=s??c?.slug,m=new Set(p.projects.map((e=>e.slug))),g=t?.filter((e=>!m.has(e)))??[],f=g.length>0,[x,y]=(0,o.useState)({initiallyLoaded:!p.loading&&!f,fetching:f,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),Z=(0,o.useRef)(null);async function b(){if(void 0!==h){y({...x,fetching:!0});try{const{results:t,hasMore:s,nextCursor:o}=await u(r,h,{slugs:g,limit:e}),i=n()([...p.projects,...t],(e=>{let{slug:t}=e;return t}));a.Z.loadInitialData(i),y({...x,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:o})}catch(e){console.error(e),y({...x,fetching:!1,initiallyLoaded:!p.loading,fetchError:e})}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}async function j(t){const{lastSearch:s}=x,o=x.nextCursor;if(""!==t)if(void 0!==h){y({...x,fetching:!0});try{r.clear();const{results:i,hasMore:l,nextCursor:c}=await u(r,h,{search:t,limit:e,lastSearch:s,cursor:o}),d=n()([...p.projects,...i],(e=>{let{slug:t}=e;return t}));d.length>p.projects.length&&a.Z.loadInitialData(d),y({...x,hasMore:l,fetching:!1,lastSearch:t,nextCursor:c})}catch(e){console.error(e),y({...x,fetching:!1,fetchError:e})}}else console.error("Cannot use useProjects.onSearch without an organization in context")}void 0!==t&&(null===Z.current&&(Z.current=new Set(t)),(t.length!==Z.current.size||t.some((e=>!Z.current?.has(e))))&&(Z.current=new Set(t))),(0,o.useEffect)((()=>{f&&b()}),[Z.current]),(0,o.useEffect)((()=>{const e=!p.loading;x.initiallyLoaded!==e&&(f||y({...x,initiallyLoaded:e}))}),[p.loading]);const{initiallyLoaded:S,fetching:v,fetchError:w,hasMore:P}=x,C=t?p.projects.filter((e=>t.includes(e.slug))):p.projects,_=g.map((e=>({slug:e}))),z={projects:C,placeholders:_,fetching:v||p.loading,initiallyLoaded:S,fetchError:w,hasMore:P,onSearch:j};return z}},"./app/utils/withApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/utils/getDisplayName.tsx"),r=s("./app/utils/useApi.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=s=>{let{api:o,...i}=s;const a=(0,r.Z)({api:o,...t});return(0,n.tZ)(e,{...i,api:a})};return s.displayName=`withApi(${(0,o.Z)(e)})`,s}},"./app/utils/withProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/utils/getDisplayName.tsx"),r=s("./app/utils/useProjects.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){const t=t=>{const{projects:s,initiallyLoaded:o}=(0,r.Z)(),i=!o;return(0,n.tZ)(e,{...t,projects:s,loadingProjects:i})};return t.displayName=`withProjects(${(0,o.Z)(e)})`,t}}}]);
//# sourceMappingURL=../sourcemaps/app_components_assistant_guideAnchor_tsx-app_components_clipboard_tsx-app_components_compactS-06bee7.5af96ed060711956bd54b3d6eb2feb50.js.map