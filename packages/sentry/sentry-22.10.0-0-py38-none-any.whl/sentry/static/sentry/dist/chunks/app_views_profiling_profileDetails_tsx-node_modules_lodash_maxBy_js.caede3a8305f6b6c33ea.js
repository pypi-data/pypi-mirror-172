(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_profileDetails_tsx-node_modules_lodash_maxBy_js","node_modules_lodash_maxBy_js"],{"./app/components/gridEditable/sortLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/lodash/omit.js"),i=s.n(n),a=s("./app/components/links/link.tsx"),l=s("./app/icons/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{align:t,title:s,canSort:o,generateSortLink:n,onClick:i,direction:a,replace:l}=e;const u=n();if(!u||!o)return(0,d.tZ)(p,{align:t,children:s});const g=a?(0,d.tZ)(m,{size:"xs",direction:"desc"===a?"down":"up"}):null;return(0,d.BX)(c,{align:t,to:u,onClick:e=>{l&&(e.preventDefault(),r.browserHistory.replace(u)),i?.(e)},children:[s," ",g]})}u.displayName="SortLink";const c=(0,o.Z)((e=>{const t=i()(e,["align","css"]);return(0,d.tZ)(a.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,o.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,o.Z)(l.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),g=u},"./app/utils/profiling/tableRenderer.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var o=s("./app/components/gridEditable/sortLink.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{currentSort:t,generateSortLink:s,rightAlignedColumns:n,sortableColumns:i,onClick:a}=e;return(e,l)=>(0,r.tZ)(o.Z,{onClick:t=>a?.(e,t),align:n?.has(e.key)?"right":"left",title:e.name,direction:t?.key===e.key?t?.order:void 0,canSort:i?.has(e.key)||!1,generateSortLink:s?.(e.key)??(()=>{}),replace:!0})}},"./app/utils/profiling/units/units.ts":(e,t,s)=>{"use strict";s.d(t,{CD:()=>r,ab:()=>l,s4:()=>i}),s("../node_modules/core-js/modules/es.error.cause.js");const o={nanoseconds:1e-9,microseconds:1e-6,milliseconds:.001,seconds:1};function r(e,t,s){const r=Math.log10(o[t]),n=Math.log10(o[s]);return e*Math.pow(10,r-n)}const n=(e,t,s)=>e.toFixed(s)+t;function i(e){const t=o[e];if(void 0===t)throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return e=>{const s=e*t;return s>=1?n(s,"s",2):s/.001>=1?n(s/.001,"ms",2):s/1e-6>=1?n(s/1e-6,"μs",2):n(s/1e-9,"ns",2)}}function a(e,t){return Math.floor(e).toString().padStart(t,"0")}function l(e){const t=o[e];if(void 0===t)throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return e=>{const s=e*t,o=1e3*s;return`${a(s/60,2)}:${a(s%60,2)}.${a(o%1e3,3)}`}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,s)=>{"use strict";s.d(t,{K:()=>r});var o=s("../node_modules/react/index.js");const r=(e,t)=>{const s=(0,o.useRef)(!0);(0,o.useEffect)((()=>{s.current?s.current=!1:e()}),t)}},"./app/views/profiling/profileDetails.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/fuse.js/dist/fuse.esm.js"),a=s("../node_modules/query-string/index.js"),l=s("./app/components/gridEditable/index.tsx"),d=s("./app/components/layouts/thirds.tsx"),u=s("./app/components/pagination.tsx"),c=s("./app/components/searchBar.tsx"),p=s("./app/components/sentryDocumentTitle.tsx"),m=s("./app/locale.tsx"),g=s("./app/styles/space.tsx"),h=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),f=s("./app/utils/discover/styles.tsx"),y=s("./app/utils/profiling/routes.tsx"),w=s("./app/utils/profiling/tableRenderer.tsx"),x=s("./app/utils/profiling/units/units.ts"),b=s("./app/utils/queryString.tsx"),_=s("./app/utils/useEffectAfterFirstRender.ts"),k=s("./app/utils/useLocation.tsx"),v=s("./app/utils/useOrganization.tsx"),j=s("./app/utils/useParams.tsx"),Z=s("./app/views/profiling/profileGroupProvider.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e){const t=[];return e.forEach((e=>{e.selfWeight>0&&t.push(e)}),(()=>{})),t.sort(((e,t)=>t.selfWeight-e.selfWeight)).slice(0,500).map((t=>({symbol:t.frame.name,image:t.frame.image,thread:e.threadId,type:t.frame.is_application?"application":"system","self weight":t.selfWeight,"total weight":t.totalWeight})))}const $=50;function q(){const e=(0,k.T)(),[t]=(0,Z.useProfileGroup)(),s=(0,v.Z)();(0,r.useEffect)((()=>{(0,h.Z)("profiling_views.profile_summary",{organization:s})}),[s]);const o=(0,r.useMemo)((()=>{const t=(0,b.ro)(e.query.cursor,"");return parseInt(t,10)||0}),[e.query.cursor]),g=(0,r.useMemo)((()=>(0,b.ro)(e.query.query,"")),[e]),f=(0,r.useMemo)((()=>"resolved"===t.type?t.data.profiles.flatMap(C).sort(((e,t)=>t["self weight"]-e["self weight"])):[]),[t]),y=(0,r.useMemo)((()=>new i.default(f,{keys:["symbol"],threshold:.3})),[f]),x=(0,r.useCallback)((e=>e?y.search(e).map((e=>e.item)).sort(((e,t)=>t["self weight"]-e["self weight"])):f),[y,f]),[j,q]=(0,r.useState)((()=>x(g)));(0,_.K)((()=>{q(x(g))}),[f,g,x]);const M=(0,r.useMemo)((()=>{const t=o>=$?"true":"false",s=o>=$?o-$:0,r={...e.query,cursor:s},n=`<${e.pathname}${a.stringify(r)}>; rel="previous"; results="${t}"; cursor="${s}"`,i=o+$<j.length?"true":"false",l=o+$<j.length?o+$:0,d={...e.query,cursor:l};return`${n},<${e.pathname}${a.stringify(d)}>; rel="next"; results="${i}"; cursor="${l}"`}),[o,e,j]),z=(0,r.useCallback)((t=>{n.browserHistory.replace({...e,query:{...e.query,query:t,cursor:void 0}}),q(x(t))}),[e,x]);return(0,S.tZ)(r.Fragment,{children:(0,S.tZ)(p.Z,{title:(0,m.t)("Profiling — Details"),orgSlug:s.slug,children:(0,S.tZ)(d.uT,{children:(0,S.BX)(d.or,{fullWidth:!0,children:[(0,S.tZ)(W,{children:(0,S.tZ)(c.Z,{defaultQuery:"",query:g,placeholder:(0,m.t)("Search for frames"),onChange:z})}),(0,S.tZ)(l.ZP,{title:(0,m.t)("Slowest Functions"),isLoading:"loading"===t.type,error:"errored"===t.type,data:j.slice(o,o+$),columnOrder:B.map((e=>I[e])),columnSortBy:[],grid:{renderHeadCell:(0,w.w)({rightAlignedColumns:E}),renderBodyCell:L},location:e}),(0,S.tZ)(u.Z,{pageLinks:M})]})})})})}q.displayName="ProfileDetails";const E=new Set(["self weight","total weight"]),W=(0,o.Z)("div",{target:"ecwa59y0"})("display:grid;gap:",(0,g.Z)(2),";grid-template-columns:auto;margin-bottom:",(0,g.Z)(2),";");function L(e,t,s,o){return(0,S.tZ)(z,{column:e,dataRow:t,rowIndex:s,columnIndex:o})}L.displayName="renderFunctionCell";const M=(0,x.s4)("nanoseconds");function z(e){let{column:t,dataRow:s}=e;const o=s[t.key],{orgId:r,projectId:i,eventId:a}=(0,j.U)();switch(t.key){case"self weight":case"total weight":return(0,S.tZ)(f.Hw,{children:M(o)});case"image":return(0,S.tZ)(f.W2,{children:o??"Unknown"});case"thread":return(0,S.tZ)(f.W2,{children:(0,S.tZ)(n.Link,{to:(0,y.TH)({orgSlug:r,projectSlug:i,profileId:a,query:{tid:s.thread}}),children:o})});default:return(0,S.tZ)(f.W2,{children:o})}}const B=["symbol","image","thread","type","self weight","total weight"],I={symbol:{key:"symbol",name:(0,m.t)("Symbol"),width:l.z7},image:{key:"image",name:(0,m.t)("Binary"),width:l.z7},thread:{key:"thread",name:(0,m.t)("Thread"),width:l.z7},type:{key:"type",name:(0,m.t)("Type"),width:l.z7},"self weight":{key:"self weight",name:(0,m.t)("Self Weight"),width:l.z7},"total weight":{key:"total weight",name:(0,m.t)("Total Weight"),width:l.z7}},T=q},"../node_modules/lodash/_baseExtremum.js":(e,t,s)=>{var o=s("../node_modules/lodash/isSymbol.js");e.exports=function(e,t,s){for(var r=-1,n=e.length;++r<n;){var i=e[r],a=t(i);if(null!=a&&(void 0===l?a==a&&!o(a):s(a,l)))var l=a,d=i}return d}},"../node_modules/lodash/_baseGt.js":e=>{e.exports=function(e,t){return e>t}},"../node_modules/lodash/maxBy.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseExtremum.js"),r=s("../node_modules/lodash/_baseGt.js"),n=s("../node_modules/lodash/_baseIteratee.js");e.exports=function(e,t){return e&&e.length?o(e,n(t,2),r):void 0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_profileDetails_tsx-node_modules_lodash_maxBy_js.a470a65ea8dfea86376ec5c422093630.js.map