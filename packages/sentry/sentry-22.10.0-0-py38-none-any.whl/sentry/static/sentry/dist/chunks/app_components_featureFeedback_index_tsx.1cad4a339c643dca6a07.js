"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_featureFeedback_index_tsx"],{"./app/components/featureFeedback/index.tsx":(e,t,s)=>{s.d(t,{z:()=>A});var a=s("../node_modules/react/index.js"),o=s("./app/actionCreators/modal.tsx"),n=s("./app/components/button.tsx"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),c=s("../node_modules/@sentry/browser/esm/client.js"),d=s("../node_modules/@sentry/browser/esm/transports/fetch.js"),l=s("../node_modules/@sentry/browser/esm/stack-parsers.js"),u=s("../node_modules/@sentry/browser/esm/sdk.js"),p=s("../node_modules/lodash/cloneDeep.js"),m=s.n(p),b=s("./app/actionCreators/indicator.tsx"),f=s("./app/components/alert.tsx"),h=s("./app/components/buttonBar.tsx"),k=s("./app/components/forms/controls/textarea.tsx"),y=s("./app/components/forms/field/index.tsx"),x=s("./app/components/forms/fields/selectField.tsx"),Z=s("./app/components/links/externalLink.tsx"),g=s("./app/locale.tsx"),j=s("./app/stores/configStore.tsx"),v=s("./app/stores/organizationStore.tsx"),C=s("./app/stores/useLegacyStore.tsx"),F=s("./app/styles/space.tsx"),S=s("./app/utils.tsx"),w=s("./app/utils/useLocation.tsx"),_=s("./app/utils/useMedia.tsx"),P=s("./app/utils/useProjects.tsx"),B=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const I=new c.R({dsn:"https://3c5ef4e344a04a0694d187a1272e96de@o1.ingest.sentry.io/6356259",transport:d.f,stackParser:l.Dt,integrations:u.SS}),N=[(0,g.t)("I don't like this feature"),(0,g.t)("I like this feature"),(0,g.t)("Other reason")];function T(e){let{Header:t,Body:s,Footer:o,closeModal:i,...c}=e;const{organization:d}=(0,C.X)(v.Z),{projects:l,initiallyLoaded:u}=(0,P.Z)(),p=(0,w.T)(),F=(0,r.u)(),T=j.Z.get("user"),q=j.Z.get("isSelfHosted"),[X,A]=(0,a.useState)(void 0===c.children?{subject:void 0,additionalInfo:void 0}:c.initialData),D=(0,_.Z)(`(max-width: ${F.breakpoints.small})`),L=(0,a.useMemo)((()=>{if(u&&p.query.project)return l.find((e=>e.id===p.query.project))}),[u,l,p.query.project]),$=(0,a.useCallback)((e=>{const t={message:`Feedback: ${c.featureName} feature`,request:{url:p.pathname},extra:{orgFeatures:d?.features??[],orgAccess:d?.access??[],projectFeatures:L?.features??[]},tags:{featureName:c.featureName},user:T,level:"info"};if(void 0===c.children){const e=c.feedbackTypes??N;I.captureEvent({...t,message:X.additionalInfo?.trim()?`Feedback: ${e[X.subject]} - ${X.additionalInfo}`:`Feedback: ${e[X.subject]}`})}else I.captureEvent({...t,...e??{}});(0,b.S9)((0,g.t)("Thanks for taking the time to provide us feedback!")),i()}),[p.pathname,i,d?.features,d?.access,L?.features,T,c,X]),H=(0,a.useCallback)((e=>{let{children:s}=e;return(0,B.tZ)(t,{closeButton:!0,children:(0,B.tZ)("h3",{children:s})})}),[t]),R=(0,a.useCallback)((e=>{let{onBack:t,onNext:s,submitEventData:a,primaryDisabledReason:r,secondaryAction:d}=e;return(0,B.BX)(o,{children:[d&&(0,B.tZ)(M,{children:d}),t&&(0,B.tZ)(z,{children:(0,B.tZ)(n.ZP,{onClick:t,children:(0,g.t)("Back")})}),(0,B.BX)(h.ZP,{gap:1,children:[(0,B.tZ)(n.ZP,{onClick:i,children:(0,g.t)("Cancel")}),(0,B.tZ)(n.ZP,{priority:"primary",title:void 0===c.children?(0,S.ri)(X.subject)?void 0:(0,g.t)("Required fields must be filled out"):r,onClick:s??(()=>$(a)),disabled:void 0===c.children?!(0,S.ri)(X.subject):(0,S.ri)(r),children:s?(0,g.t)("Next"):D?(0,g.t)("Submit"):(0,g.t)("Submit Feedback")})]})]})}),[o,D,i,$,X,c.children]),E=(0,a.useCallback)((e=>{let{children:t,showSelfHostedMessage:a=!0}=e;return(0,B.BX)(s,{children:[t,q&&a&&(0,B.tZ)(f.Z,{type:"info",children:(0,g._N)("You agree that any feedback you submit is subject to Sentry's [privacyPolicy:Privacy Policy] and Sentry may use such feedback without restriction or obligation.",{privacyPolicy:(0,B.tZ)(Z.Z,{href:"https://sentry.io/privacy/"})})})]})}),[s,q]);if(void 0===c.children){const e=c.feedbackTypes??N;return(0,B.BX)(a.Fragment,{children:[(0,B.tZ)(H,{children:(0,g.t)("Submit Feedback")}),(0,B.BX)(E,{children:[(0,B.tZ)(x.Z,{label:(0,g.t)("Type of feedback"),name:"subject",inline:!1,options:e.map(((e,t)=>({value:t,label:e}))),placeholder:(0,g.t)("Select type of feedback"),value:X.subject,onChange:e=>A({...X,subject:e}),flexibleControlStateSize:!0,stacked:!0,required:!0}),(0,B.tZ)(y.Z,{label:(0,g.t)("Additional feedback"),inline:!1,required:!1,flexibleControlStateSize:!0,stacked:!0,children:(0,B.tZ)(k.Z,{name:"additional-feedback",value:X.additionalInfo,rows:5,autosize:!0,placeholder:(0,g.t)("What did you expect?"),onChange:e=>A({...X,additionalInfo:e.target.value})})})]}),(0,B.tZ)(R,{secondaryAction:c?.secondaryAction})]})}return(0,B.tZ)(a.Fragment,{children:c.children({Header:H,Body:E,Footer:R,onFieldChange:function(e,t){const s=m()(X);s[e]=t,A(s)},state:X})})}T.displayName="FeedbackModal";const q={name:"16o92yp",styles:"width:100%;max-width:680px"},z=(0,i.Z)("div",{target:"e44837j1"})("margin-right:",(0,F.Z)(1),";width:100%;"),M=(0,i.Z)("div",{target:"e44837j0"})({name:"s7lnbf",styles:"flex:1;align-self:center"});var X=s("./app/icons/index.tsx");function A(e){let{buttonProps:t={},...s}=e;return(0,B.tZ)(n.ZP,{...t,icon:(0,B.tZ)(X.I8,{}),onClick:function(e){(0,o.openModal)((e=>(0,B.tZ)(T,{...e,...s})),{modalCss:q}),t.onClick?.(e)},children:(0,g.t)("Give Feedback")})}A.displayName="FeatureFeedback"},"./app/utils/useLocation.tsx":(e,t,s)=>{s.d(t,{T:()=>o});var a=s("./app/utils/useRouteContext.tsx");function o(){return(0,a.s)().location}}}]);
//# sourceMappingURL=../sourcemaps/app_components_featureFeedback_index_tsx.174d590c8b05d8d592321ebd967c7f32.js.map