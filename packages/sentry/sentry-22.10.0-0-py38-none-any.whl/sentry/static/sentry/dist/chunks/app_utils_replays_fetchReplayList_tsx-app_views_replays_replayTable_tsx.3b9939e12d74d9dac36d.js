"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_replays_fetchReplayList_tsx-app_views_replays_replayTable_tsx"],{"./app/utils/replays/fetchReplayList.tsx":(e,t,s)=>{s.d(t,{ZP:()=>n,p8:()=>i,yw:()=>o});var r=s("../node_modules/@sentry/core/esm/exports.js"),a=s("./app/utils/replays/replayDataUtils.tsx");const o="-startedAt",i=["countErrors","duration","finishedAt","id","projectId","startedAt","urls","user"],n=async function(e){let{api:t,organization:s,location:o,eventView:i}=e;try{const e=`/organizations/${s.slug}/replays/`,[{data:r},n,l]=await t.requestPromise(e,{includeAllArgs:!0,query:{...i.getEventsAPIPayload(o),cursor:o.query.cursor}});return{fetchError:void 0,isFetching:!1,pageLinks:l?.getResponseHeader("Link")??"",replays:r.map(a.qC)}}catch(e){return e.responseJSON?.detail?{fetchError:e.responseJSON.detail,isFetching:!1,pageLinks:null,replays:[]}:(r.Tb(e),{fetchError:e,isFetching:!1,pageLinks:null,replays:[]})}}},"./app/utils/useLocation.tsx":(e,t,s)=>{s.d(t,{T:()=>a});var r=s("./app/utils/useRouteContext.tsx");function a(){return(0,r.s)().location}},"./app/views/replays/replayTable.tsx":(e,t,s)=>{s.d(t,{Z:()=>W});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js"),o=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=s("./app/components/alert.tsx"),n=s("./app/components/duration.tsx"),l=s("./app/components/idBadge/projectBadge.tsx"),d=s("./app/components/idBadge/userBadge.tsx"),p=s("./app/components/links/link.tsx"),c=s("./app/components/panels/index.tsx"),m=s("./app/components/questionTooltip.tsx"),u=s("./app/components/scoreBar.tsx"),h=s("./app/constants/chartPalette.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=new Array(10).fill([h.Z[0][0]]);function x(e){let{replay:t}=e,s=1;if(t){const{countErrors:e,duration:r,urls:a}=t,o=a.length;s=(25*e+5*o+o/(r||1))/10,r<=5&&(s-=10/(r||1)),s=Math.floor(Math.min(10,Math.max(1,s)))}return(0,g.tZ)(u.Z,{size:20,score:s,palette:y,radius:0})}x.displayName="ReplayHighlight";const Z=x;var w=s("./app/components/replays/walker/urlWalker.tsx"),f=s("./app/components/timeSince.tsx"),b=s("./app/icons/index.tsx"),v=s("./app/locale.tsx"),z=s("./app/styles/space.tsx"),j=s("./app/utils/discover/fieldRenderers.tsx"),T=s("./app/utils/getRouteStringFromRoutes.tsx"),S=s("./app/utils/useLocation.tsx"),C=s("./app/utils/useMedia.tsx"),k=s("./app/utils/useOrganization.tsx"),E=s("./app/utils/useProjects.tsx"),_=s("./app/utils/useRoutes.tsx");function B(e){let{fieldName:t,label:s,sort:r}=e;const a=(0,S.T)(),o="asc"===r.kind?"up":"down",i=(0,g.tZ)(b.CC,{color:"gray300",size:"xs",direction:o});return(0,g.BX)(A,{role:"columnheader","aria-sort":r.field.endsWith(t)?"asc"===r.kind?"ascending":"descending":"none",to:{pathname:a.pathname,query:{...a.query,sort:"desc"===r.kind?t:"-"+t}},children:[s," ",r.field===t&&i]})}function N(e){let{isFetching:t,replays:s,showProjectColumn:r,sort:a,fetchError:i,showSlowestTxColumn:n=!1}=e;const l=(0,_.V)(),d=encodeURIComponent((0,T.Z)(l)),p=(0,k.Z)(),c=(0,o.u)(),u=(0,C.Z)(`(min-width: ${c.breakpoints.small})`),h=[(0,v.t)("Session"),r&&u&&(0,g.tZ)(B,{sort:a,fieldName:"projectId",label:(0,v.t)("Project")},"projectId"),n&&u&&(0,g.BX)(M,{children:[(0,v.t)("Slowest Transaction"),(0,g.tZ)(m.Z,{size:"xs",position:"top",title:(0,v.t)("The duration of the slowest transaction operation that was recorded during the replay session.")})]},"slowestTransaction"),u&&(0,g.tZ)(B,{sort:a,fieldName:"startedAt",label:(0,v.t)("Start Time")},"startedAt"),(0,g.tZ)(B,{sort:a,fieldName:"duration",label:(0,v.t)("Duration")},"duration"),(0,g.tZ)(B,{sort:a,fieldName:"countErrors",label:(0,v.t)("Errors")},"countErrors"),(0,g.BX)(M,{children:[(0,v.t)("Activity")," ",(0,g.tZ)(m.Z,{size:"xs",position:"top",title:(0,v.t)("Activity represents how much user activity happened in a replay. It is determined by the number of errors encountered, duration, and UI events.")})]},"activity")].filter(Boolean);return i&&!t?(0,g.tZ)(R,{headers:h,showProjectColumn:r,isLoading:!1,showSlowestTxColumn:n,children:(0,g.tZ)(F,{type:"error",showIcon:!0,children:"string"==typeof i?i:(0,v.t)("Sorry, the list of replays could not be loaded. This could be due to invalid search parameters or an internal systems error.")})}):(0,g.tZ)(R,{isLoading:t,isEmpty:0===s?.length,showProjectColumn:r,showSlowestTxColumn:n,headers:h,children:s?.map((e=>(0,g.tZ)(P,{minWidthIsSmall:u,organization:p,referrer:d,replay:e,showProjectColumn:r,showSlowestTxColumn:n},e.id)))})}function P(e){let{minWidthIsSmall:t,organization:s,referrer:r,replay:o,showProjectColumn:i,showSlowestTxColumn:c}=e;const m=(0,S.T)(),{projects:u}=(0,E.Z)(),h=u.find((e=>e.id===o.projectId)),y="txEvent"in o,x=y?o.txEvent?.["transaction.duration"]:void 0;return(0,g.BX)(a.Fragment,{children:[(0,g.tZ)(d.Z,{avatarSize:32,displayName:(0,g.tZ)(p.Z,{to:`/organizations/${s.slug}/replays/${h?.slug}:${o.id}/?referrer=${r}`,children:o.user.displayName||""}),user:{username:o.user.displayName||"",email:o.user.email||"",id:o.user.id||"",ip_address:o.user.ip_address||"",name:o.user.name||""},displayEmail:(0,g.tZ)(w.j,{urls:o.urls})}),i&&t&&(0,g.tZ)(I,{children:h?(0,g.tZ)(l.Z,{project:h,avatarSize:16}):null}),t&&c&&(0,g.tZ)(I,{children:y?(0,g.BX)(q,{children:[x?(0,g.BX)(L,{children:[x,"ms"]}):null,(0,j.as)(o.txEvent,{organization:s,location:m})]}):null}),t&&(0,g.tZ)(I,{children:(0,g.BX)(X,{children:[t&&(0,g.tZ)($,{color:"gray500",size:"sm"}),(0,g.tZ)(f.Z,{date:o.startedAt})]})}),(0,g.tZ)(I,{children:(0,g.tZ)(n.Z,{seconds:Math.floor(o.duration),exact:!0,abbreviation:!0})}),(0,g.tZ)(I,{"data-test-id":"replay-table-count-errors",children:o.countErrors||0}),(0,g.tZ)(I,{children:(0,g.tZ)(Z,{replay:o})})]})}B.displayName="SortableHeader",N.displayName="ReplayTable",P.displayName="ReplayTableRow";const R=(0,r.Z)(c.KB,{target:"e1imgzw08"})((e=>`grid-template-columns: minmax(0, 1fr) repeat(${function(e){let t=4;return e.showSlowestTxColumn&&(t+=1),e.showProjectColumn&&(t+=1),t}(e)}, max-content);`),"@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr) repeat(3, min-content);}"),A=(0,r.Z)(p.Z,{target:"e1imgzw07"})({name:"1qowyn7",styles:"color:inherit;:hover{color:inherit;}svg{vertical-align:top;}"}),I=(0,r.Z)("div",{target:"e1imgzw06"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),q=(0,r.Z)("div",{target:"e1imgzw05"})({name:"gdaplf",styles:"width:100%;text-align:right"}),L=(0,r.Z)("div",{target:"e1imgzw04"})("color:",(e=>e.theme.gray500),";font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,z.Z)(.5),";"),X=(0,r.Z)("div",{target:"e1imgzw03"})("display:grid;grid-template-columns:repeat(2, minmax(auto, max-content));align-items:center;gap:",(0,z.Z)(1),";"),$=(0,r.Z)(b.jt,{target:"e1imgzw02"})({name:"hbxqi1",styles:"position:relative;top:-1px"}),F=(0,r.Z)(i.Z,{target:"e1imgzw01"})({name:"1uq1iuo",styles:"border-radius:0;border-width:1px 0 0 0;grid-column:1/-1;margin-bottom:0"}),M=(0,r.Z)("div",{target:"e1imgzw00"})("display:grid;grid-template-columns:repeat(2, max-content);gap:",(0,z.Z)(.5),";align-items:center;"),W=N}}]);
//# sourceMappingURL=../sourcemaps/app_utils_replays_fetchReplayList_tsx-app_views_replays_replayTable_tsx.598d75717974594211ca5ebc363adc31.js.map