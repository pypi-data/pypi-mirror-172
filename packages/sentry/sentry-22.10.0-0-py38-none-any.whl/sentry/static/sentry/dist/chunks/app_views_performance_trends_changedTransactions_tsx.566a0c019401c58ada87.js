"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_trends_changedTransactions_tsx"],{"./app/components/dropdownLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var r=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("./app/components/deprecatedDropdownMenu.tsx"),d=n("./app/icons/index.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=e=>(0,r.iv)(".dropdown-menu{&>li>a{color:",e.textColor,";&:hover,&:focus{color:inherit;background-color:",e.hover,";}}& .disabled{cursor:not-allowed;&:hover{background:inherit;color:inherit;}}}.dropdown-submenu:hover>span{color:",e.textColor,";background:",e.hover,";}","");function p(e){let{anchorMiddle:t,title:n,customTitle:r,children:a,menuClasses:p,className:m,topLevelClasses:u,anchorRight:g=!1,disabled:h=!1,caret:x=!0,alwaysRenderMenu:Z=!0,...w}=e;const v=(0,o.u)();return(0,l.tZ)(i.Z,{alwaysRenderMenu:Z,...w,children:e=>{let{isOpen:o,getRootProps:i,getActorProps:w,getMenuProps:y}=e;const f=Z||o,_=s()("dropdown-actor",m,{"dropdown-menu-right":g,"dropdown-toggle":!0,hover:o,disabled:h}),b=s()("dropdown",u,{"pull-right":g,"anchor-right":g,"anchor-middle":t,open:o}),{onClick:S,...E}=w({className:_});return(0,l.BX)("span",{css:c(v),...i({className:b}),"data-test-id":"dropdown-link",children:[(0,l.tZ)("a",{onClick:h?void 0:S,...E,children:r||(0,l.BX)("div",{className:"dropdown-actor-title",children:[n,x&&(0,l.tZ)(d.g6,{direction:o?"up":"down",size:"xs"})]})}),f&&(0,l.tZ)("ul",{...y({className:s()(p,"dropdown-menu")}),children:a})]})}})}p.displayName="DropdownLink";const m=p},"./app/views/performance/trends/changedTransactions.tsx":(e,t,n)=>{n.d(t,{H:()=>G,Z:()=>pe});var r,o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),i=n("./app/components/button.tsx"),d=n("./app/components/charts/styles.tsx"),l=n("./app/components/count.tsx"),c=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),m=n("./app/components/emptyStateWarning.tsx"),u=n("./app/components/forms/controls/radioGroup.tsx"),g=n("./app/components/idBadge/index.tsx"),h=n("./app/components/links/link.tsx"),x=n("./app/components/loadingIndicator.tsx"),Z=n("./app/components/menuItem.tsx"),w=n("./app/components/pagination.tsx"),v=n("./app/components/panels/index.tsx"),y=n("./app/components/questionTooltip.tsx"),f=n("./app/components/radio.tsx"),_=n("./app/components/tooltip.tsx"),b=n("./app/icons/index.tsx"),S=n("./app/locale.tsx"),E=n("./app/styles/space.tsx"),j=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),C=n("./app/utils/formatters.tsx"),k=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),T=n("./app/utils/queryString.tsx"),R=n("./app/utils/tokenizeSearch.tsx"),L=n("./app/utils/useApi.tsx"),N=n("./app/utils/withOrganization.tsx"),z=n("./app/utils/withProjects.tsx"),q=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),A=n("./app/views/performance/transactionSummary/utils.tsx"),M=n("./app/views/performance/trends/chart.tsx"),P=n("./app/views/performance/trends/types.tsx"),B=n("./app/views/performance/trends/utils.tsx"),D=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function X(e){switch(e){case P.ER.IMPROVED:return(0,S.t)("Most Improved Transactions");case P.ER.REGRESSION:return(0,S.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function I(e,t,n){const r=(0,B.j_)(t),o=(0,T.ro)(e.query[r]);if(!n)return;return n.find((e=>`${e.transaction}-${e.project}`===o))||(n.length>0?n[0]:void 0)}function V(e,t,n){return function(r){const o=(0,B.j_)(n),a={...e.query};r?a[o]=r?`${r.transaction}-${r.project}`:void 0:delete a[o],s.browserHistory.push({pathname:e.pathname,query:a}),(0,j.Z)("performance_views.trends.widget_interaction",{organization:t,widget_type:n})}}function F(e,t,n,o,a,i,d){const l=(0,B.IO)(e,i,d).column,c=(0,T.ro)(e.query.query),p=new R.MY(c??""),m=p.getFilterValues(l),u=o===r.GREATER_THAN_EQUALS?">":"<";m&&m.forEach((e=>{(e.startsWith(o)||e.startsWith(u))&&p.removeFilterValue(l,e)})),p.addFilterValues(l,[`${o}${n}`]);const g=p.formatString();s.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(g).trim()}}),(0,j.Z)("performance_views.trends.change_duration",{organization:t,widget_type:X(a),value:`${o}${n}`})}function O(e){const{location:t,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:o,organization:i,projects:d,setError:l}=e,c=(0,L.Z)(),p=e.trendView.clone(),m=X(n);(0,B.kM)(p,t,n,d);const u=(e=>(t,n,r)=>{const o={};e===P.ER.IMPROVED?o.improvedCursor=t:e===P.ER.REGRESSION&&(o.regressionCursor=t),delete r[(0,B.j_)(e)],s.browserHistory.push({pathname:n,query:{...r,...o}})})(n),g=(0,T.ro)(t.query[B.vt[n]]),h=e=>{(0,j.Z)("performance_views.trends.widget_pagination",{organization:i,direction:e,widget_type:X(n)})};return(0,D.tZ)(k.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:n,cursor:g,limit:5,setError:e=>l(e?.message),children:s=>{let{isLoading:l,trendsData:g,pageLinks:Z}=s;const v=(0,B.CE)(t),f=(0,B.IO)(t,d,p.project),_=(0,B.RP)(g&&g.events&&g.events.data||[]),b=I(t,n,_),E=g?.stats||{},j=_&&_.slice?_.slice(0,5):[],C=l&&r?r:v.field,k=l&&o?o:f.column,T=(0,S.t)("This compares the baseline (%s) of the past with the present.",v.legendLabel);return(0,D.BX)(U,{"data-test-id":"changed-transactions",children:[(0,D.BX)(W,{children:[(0,D.BX)(K,{children:[m,(0,D.tZ)(y.Z,{size:"sm",position:"top",title:T})]}),l?(0,D.tZ)(x.Z,{style:{margin:"237px auto"}}):(0,D.tZ)(a.Fragment,{children:j.length?(0,D.BX)(a.Fragment,{children:[(0,D.tZ)(Y,{children:(0,D.tZ)(M.Z,{statsData:E,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:b,isLoading:l,...e})}),j.map(((r,o)=>(0,D.tZ)(H,{api:c,currentTrendFunction:C,currentTrendColumn:k,trendView:e.trendView,organization:i,transaction:r,index:o,trendChangeType:n,transactions:j,location:t,projects:d,statsData:E,handleSelectTransaction:V(t,i,n)},r.transaction)))]}):(0,D.tZ)(te,{small:!0,children:(0,S.t)("No results")})})]}),(0,D.tZ)(w.Z,{pageLinks:Z,onCursor:u,paginationAnalyticsEvent:h})]})}})}function H(e){const{transaction:t,transactions:n,trendChangeType:o,currentTrendFunction:i,currentTrendColumn:d,index:p,location:m,organization:h,projects:x,handleSelectTransaction:w,trendView:v}=e,y=B.es[o].default,E=I(m,o,n)===t,j=x.find((e=>{let{slug:n}=e;return n===t.project})),k=t.aggregate_range_2,L=t.aggregate_range_1,N=(0,C.rl)(Math.abs(t.trend_percentage-1),0),z=(0,C.g9)(L/1e3,L<1e3&&L>10?0:2),q=(0,C.g9)(k/1e3,k<1e3&&k>10?0:2),A=(0,S.t)("Over this period, the %s for %s has %s %s from %s to %s",i,d,o===P.ER.IMPROVED?(0,S.t)("decreased"):(0,S.t)("increased"),N,z,q),M=o===P.ER.IMPROVED?L:k,X=o===P.ER.IMPROVED?z:q;return(0,D.BX)(ne,{"data-test-id":"trends-list-item-"+o,children:[(0,D.tZ)(re,{color:y,children:(0,D.tZ)(_.Z,{title:(0,D.BX)(le,{children:[(0,D.tZ)("span",{children:(0,S.t)("Total Events")}),(0,D.BX)("span",{children:[(0,D.tZ)(l.Z,{value:t.count_range_1}),(0,D.tZ)(ce,{direction:"right",size:"xs"}),(0,D.tZ)(l.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,D.tZ)(u.V,{index:p,role:"radio",children:(0,D.tZ)(f.Z,{checked:E,onChange:()=>w(t)})})})}),(0,D.tZ)(Q,{...e}),(0,D.tZ)(ie,{children:(0,D.tZ)(_.Z,{title:A,children:(0,D.BX)(a.Fragment,{children:[o===P.ER.REGRESSION?"+":"",(0,C.rl)(t.trend_percentage-1,0)]})})}),(0,D.BX)(c.Z,{caret:!1,anchorRight:!0,title:(0,D.tZ)(J,{size:"xs",icon:(0,D.tZ)(b.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,S.t)("Actions")}),children:[(0,D.tZ)(Z.Z,{onClick:()=>F(m,h,M,r.LESS_THAN_EQUALS,o,x,v.project),children:(0,D.tZ)(ee,{children:(0,S.t)("Show ≤ %s",X)})}),(0,D.tZ)(Z.Z,{onClick:()=>F(m,h,M,r.GREATER_THAN_EQUALS,o,x,v.project),children:(0,D.tZ)(ee,{children:(0,S.t)("Show ≥ %s",X)})}),(0,D.tZ)(Z.Z,{onClick:()=>function(e,t){const n=(0,T.ro)(e.query.query),r=new R.MY(n??"");r.addFilterValues("!transaction",[t]);const o=r.formatString();s.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(o).trim()}})}(m,t.transaction),children:(0,D.tZ)(ee,{children:(0,S.t)("Hide from list")})})]}),(0,D.BX)(ae,{children:[j&&(0,D.tZ)(_.Z,{title:t.project,children:(0,D.tZ)(g.Z,{avatarSize:16,project:j,hideName:!0})}),(0,D.tZ)(G,{...e})]}),(0,D.tZ)(de,{color:y,children:(0,D.tZ)($,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(r||(r={})),O.displayName="ChangedTransactions",H.displayName="TrendsListItem";const G=e=>{let{transaction:t}=e;const{fromSeconds:n,toSeconds:r,showDigits:o}=(0,B.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,D.BX)(se,{children:[(0,D.tZ)(p.Z,{seconds:n,fixedDigits:o?1:0,abbreviation:!0}),(0,D.tZ)(ce,{direction:"right",size:"xs"}),(0,D.tZ)(p.Z,{seconds:r,fixedDigits:o?1:0,abbreviation:!0})]})};G.displayName="CompareDurations";const $=e=>{let{transaction:t,trendChangeType:n}=e;const{seconds:r,fixedDigits:o,changeLabel:a}=(0,B.wx)(t.trend_difference,n);return(0,D.BX)("span",{children:[(0,D.tZ)(p.Z,{seconds:r,fixedDigits:o,abbreviation:!0})," ",a]})};$.displayName="ValueDelta";const Q=e=>{const{organization:t,trendView:n,transaction:r,projects:o,currentTrendFunction:a,currentTrendColumn:s}=e,i=n.clone(),d=(0,B._H)(r,o),l=(0,A.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:d,display:q.D.TREND,trendFunction:a,trendColumn:s});return(0,D.tZ)(oe,{to:l,"data-test-id":"item-transaction-name",children:r.transaction})};Q.displayName="TransactionSummaryLink";const U=(0,o.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),W=(0,o.Z)(v.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),Y=(0,o.Z)("div",{target:"e11bn3w113"})("padding:",(0,E.Z)(3),";"),K=(0,o.Z)(d.ws,{target:"e11bn3w112"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,E.Z)(2)," ",(0,E.Z)(3),";"),J=(0,o.Z)(i.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),ee=(0,o.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");ee.defaultProps={"data-test-id":"menu-action"};const te=(0,o.Z)(m.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),ne=(0,o.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,E.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,E.Z)(1)," ",(0,E.Z)(2),";"),re=(0,o.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),oe=(0,o.Z)(h.Z,{target:"e11bn3w16"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,E.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),ae=(0,o.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),se=(0,o.Z)("span",{target:"e11bn3w14"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,E.Z)(1),";"),ie=(0,o.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),de=(0,o.Z)("div",{target:"e11bn3w12"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),le=(0,o.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ce=(0,o.Z)(b.CC,{target:"e11bn3w10"})("margin:0 ",(0,E.Z)(1),";"),pe=(0,z.Z)((0,N.Z)(O))},"./app/views/performance/trends/chart.tsx":(e,t,n)=>{n.d(t,{Z:()=>y,k:()=>v});var r=n("../node_modules/react-router/es/index.js"),o=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=n("./app/components/charts/chartZoom.tsx"),s=n("./app/components/charts/lineChart.tsx"),i=n("./app/components/charts/transitionChart.tsx"),d=n("./app/components/charts/transparentLoadingMask.tsx"),l=n("./app/components/organizations/pageFilters/parse.tsx"),c=n("./app/locale.tsx"),p=n("./app/utils/dates.tsx"),m=n("./app/utils/discover/charts.tsx"),u=n("./app/utils/discover/fields.tsx"),g=n("./app/utils/getDynamicText.tsx"),h=n("./app/utils/queryString.tsx"),x=n("./app/views/performance/trends/utils.tsx"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function w(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function v(e){let{trendChangeType:t,router:n,statsPeriod:v,transaction:y,statsData:f,isLoading:_,location:b,start:S,end:E,trendFunctionField:j,disableXAxis:C,disableLegend:k,grid:T,height:R,projects:L,project:N}=e;const z=(0,o.u)(),q=e=>{const{selected:n}=e,o=Object.keys(n).filter((e=>!n[e])),a={...b.query};a[(0,x.P4)(t)]=o;const s={...b,query:a};r.browserHistory.push(s)},A=x.es[t||""],M=(f&&y?.project&&y?.transaction?f[[y.project,y.transaction].join(",")]:void 0)?.data??[],P=(0,x.CE)(b,j),B=(0,x.IO)(b,L,N),D=(0,x.ed)(P.field,B.column),X=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,n]=e;return{name:1e3*t,value:n.reduce(((e,t)=>{let{count:n}=t;return e+n}),0)}}))}]}(M,D),{smoothedResults:I,minValue:V,maxValue:F}=(0,x.vq)(X,D),O=S?(0,p.hC)(S):null,H=E?(0,p.hC)(E):null,{utc:G}=(0,l.fK)(b.query),$=(0,h.qP)(b.query[(0,x.P4)(t)]).reduce(((e,t)=>(e[t]=!1,e)),{}),Q=k?{show:!1}:{...w(D),selected:$},U=_,W=_,Y=Math.max(F,y?.aggregate_range_2||0,y?.aggregate_range_1||0),K=Math.min(V,y?.aggregate_range_1||Number.MAX_SAFE_INTEGER,y?.aggregate_range_2||Number.MAX_SAFE_INTEGER),J=I?I.map((e=>({...e,color:A.default,lineStyle:{opacity:1}}))):[],ee=function(e,t,n,r){if(!(r&&t.length&&t[0].data&&t[0].data.length))return[];const o=parseInt(t[0].data[0].name,10),a=parseInt(t[0].data.slice(-1)[0].name,10);if(a<o)return[];const s={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},d={...s,markLine:{...s.markLine},seriesName:"Baseline"},l={...s,markLine:{...s.markLine},seriesName:"Baseline"},p={...s,markLine:{...s.markLine},seriesName:"Period split"},u=.5*(a-o)+o;return d.markLine.data=[[{value:"Past",coord:[o,r.aggregate_range_1]},{coord:[u,r.aggregate_range_1]}]],d.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Past Baseline")}</strong></span>`,(0,m.CX)(r.aggregate_range_1,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},l.markLine.data=[[{value:"Present",coord:[u,r.aggregate_range_2]},{coord:[a,r.aggregate_range_2]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Present Baseline")}</strong></span>`,(0,m.CX)(r.aggregate_range_2,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:u}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},d.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},l.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[d,l,p]}(z,I||[],0,y),te=.1*(Y-K),ne=[...J,...ee],re=(0,m.Xp)(ne),oe={tooltip:{valueFormatter:(e,t)=>(0,m.CX)(e,(0,u.Px)(t))},yAxis:{min:Math.max(0,K-te),max:Y+te,minInterval:re,axisLabel:{color:z.chartLabel,formatter:e=>(0,m.gu)(e,"duration",void 0,re)}}};return(0,Z.tZ)(a.Z,{router:n,period:v,start:O,end:H,utc:"true"===G,children:e=>(0,Z.BX)(i.Z,{loading:U,reloading:W,children:[(0,Z.tZ)(d.Z,{visible:W}),(0,g.Z)({value:(0,Z.tZ)(s.w,{height:R,...e,...oe,onLegendSelectChanged:q,series:ne,seriesOptions:{showSymbol:!1},legend:Q,toolBox:{show:!1},grid:T??{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:C?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}v.displayName="Chart";const y=(0,r.withRouter)(v)}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_changedTransactions_tsx.46901ca3299d30c7804750d62d2bfb8b.js.map