(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionEvents_index_tsx-node_modules_lodash__bas-74e26d"],{"./app/utils/performance/histogram/constants.tsx":(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var o=n("./app/locale.tsx");const r=[{label:(0,o.t)("Exclude"),value:"exclude_outliers"},{label:(0,o.t)("Include"),value:"all"}]},"./app/utils/performance/histogram/index.tsx":(e,t,n)=>{"use strict";n.d(t,{V:()=>c,Z:()=>p});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/react-router/es/index.js"),i=n("./app/utils/queryString.tsx"),s=n("./app/utils/performance/histogram/constants.tsx");class l extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"handleResetView",(()=>{const{location:e,zoomKeys:t}=this.props;a.browserHistory.push({pathname:e.pathname,query:c(e,t)})})),(0,o.Z)(this,"handleFilterChange",(e=>{const{location:t,zoomKeys:n}=this.props;a.browserHistory.push({pathname:t.pathname,query:{...c(t,n),dataFilter:e}})}))}isZoomed(){const{location:e,zoomKeys:t}=this.props;return t.map((t=>e.query[t])).some((e=>void 0!==e))}getActiveFilter(){const{location:e}=this.props,t=e.query.dataFilter?(0,i.ro)(e.query.dataFilter):s.d[0].value;return s.d.find((e=>e.value===t))||s.d[0]}render(){const e={isZoomed:this.isZoomed(),handleResetView:this.handleResetView,activeFilter:this.getActiveFilter(),handleFilterChange:this.handleFilterChange,filterOptions:s.d};return this.props.children(e)}}function c(e,t){const n={...e.query,cursor:void 0};return delete n.dataFilter,t.forEach((e=>delete n[e])),n}l.displayName="Histogram";const p=l},"./app/views/performance/transactionSummary/transactionEvents/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X}),n("../node_modules/core-js/modules/es.array.includes.js");var o=n("../node_modules/react-router/es/index.js"),r=n("./app/components/layouts/thirds.tsx"),a=n("./app/components/loadingIndicator.tsx"),i=n("./app/locale.tsx"),s=n("./app/utils/analytics.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),c=n("./app/utils/discover/eventView.tsx"),p=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/fields/index.ts"),d=n("./app/utils/performance/histogram/index.tsx"),m=n("./app/utils/queryString.tsx"),v=n("./app/utils/tokenizeSearch.tsx"),h=n("./app/utils/withOrganization.tsx"),f=n("./app/utils/withProjects.tsx"),g=n("./app/views/performance/transactionSummary/filter.tsx"),y=n("./app/views/performance/transactionSummary/pageLayout.tsx"),w=n("./app/views/performance/transactionSummary/tabs.tsx"),x=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),b=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),Z=n("../node_modules/lodash/omit.js"),_=n.n(Z),E=n("./app/components/button.tsx"),q=n("./app/components/compactSelect.tsx"),F=n("./app/components/datePageFilter.tsx"),S=n("./app/components/environmentPageFilter.tsx"),k=n("./app/components/events/searchBar.tsx"),V=n("./app/components/organizations/pageFilterBar.tsx"),j=n("./app/components/organizations/pageFilters/parse.tsx"),z=n("./app/styles/space.tsx"),C=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),N=n("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx"),O=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),D=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const P=[(0,i.t)("event id"),(0,i.t)("user"),(0,i.t)("operation duration"),(0,i.t)("total duration"),(0,i.t)("trace id"),(0,i.t)("timestamp")];function B(e){const{location:t,organization:n,eventView:o,transactionName:a,spanOperationBreakdownFilter:s,webVital:l,setError:c,totalEventCount:p}=e,u=o.clone(),d=P.slice();l&&d.splice(3,0,(0,i.t)(l));const m=(0,g.Is)(s,t);return m&&(u.query=`${u.query} ${m}`.trim(),d.splice(2,1,(0,i.t)(`${s} duration`))),(0,D.BX)(r.or,{fullWidth:!0,children:[(0,D.tZ)(T,{...e}),(0,D.tZ)(N.Z,{totalEventCount:p,eventView:u,organization:n,location:t,setError:c,columnTitles:d,transactionName:a})]})}function T(e){const{eventView:t,location:n,organization:r,spanOperationBreakdownFilter:a,onChangeSpanOperationBreakdownFilter:s,eventsDisplayFilterName:l,onChangeEventsDisplayFilter:c,percentileValues:p}=e,u=(0,m.ro)(n.query.query,""),d=(0,O._S)(a,p);return(0,D.BX)(H,{children:[(0,D.tZ)(g.ZP,{organization:r,currentFilter:a,onChangeFilter:s}),(0,D.BX)(V.Z,{condensed:!0,children:[(0,D.tZ)(S.Z,{}),(0,D.tZ)(F.Z,{alignDropdown:"left"})]}),(0,D.tZ)(I,{organization:r,projectIds:t.project,query:u,fields:t.fields,onSearch:e=>{const t=(0,j.fK)({...n.query||{},query:e}),r=_()(t,"cursor");o.browserHistory.push({pathname:n.pathname,query:r})}}),(0,D.tZ)(q.Z,{triggerProps:{prefix:(0,i.t)("Percentile")},value:l,onChange:e=>c(e.value),options:Object.entries(d).map((e=>{let[t,n]=e;return{value:t,label:n.label}}))}),(0,D.tZ)(E.ZP,{to:t.getResultsViewUrlTarget(r.slug),onClick:()=>{(0,C.Z)("performance_views.all_events.open_in_discover",{organization:r})},children:(0,i.t)("Open in Discover")})]})}B.displayName="EventsContent",T.displayName="Search";const H=(0,b.Z)("div",{target:"e1rf7xcw1"})("display:grid;gap:",(0,z.Z)(2),";margin-bottom:",(0,z.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(4, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto auto;}"),I=(0,b.Z)(k.Z,{target:"e1rf7xcw0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/6;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),K=B;function L(e){const{location:t,organization:n,projects:o}=e;return(0,D.tZ)(y.ZP,{location:t,organization:n,projects:o,tab:w.Z.Events,getDocumentTitle:A,generateEventView:W,childComponent:$})}function $(e){const{location:t,organization:n,eventView:i,transactionName:c,setError:p}=e,u=(0,O.tb)(t),m=(0,g.q0)(t),h=R(t),f=i.clone(),y=function(e){return e.withColumns([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}])}(i);f.sorts=[],f.fields=[{field:"count()",width:-1}];const w=e=>{(0,s.ec)({eventName:"Performance Views: Transaction Events Ops Breakdown Filter Dropdown",eventKey:"performance_views.transactionEvents.ops_filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const r=(0,O._S)(m)[u].sort,a=i?.sorts?.[0];let l={};r?.kind===a?.kind&&r?.field===a?.field&&(l=(0,O.qg)(u,e));const c={...(0,d.V)(t,[x.Oo,x.mo]),...(0,g.bz)(e),...l};e===g.f1.None&&delete c.breakdown,o.browserHistory.push({pathname:t.pathname,query:c})},b=e=>{(0,s.ec)({eventName:"Performance Views: Transaction Events Display Filter Dropdown",eventKey:"performance_views.transactionEvents.display_filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const r={...(0,d.V)(t,[x.Oo,x.mo]),...(0,O.qg)(e,m)};e===O.q3.p100&&delete r.showTransaction,o.browserHistory.push({pathname:t.pathname,query:r})};return(0,D.tZ)(l.Z,{eventView:f,orgSlug:n.slug,location:t,setError:e=>p(e?.message),referrer:"api.performance.transaction-summary",cursor:"0:0:0",useEvents:!0,children:e=>{let{isLoading:o,tableData:s}=e;const d=s?.data[0]?.["count()"]?.toLocaleString()||"";return(0,D.tZ)(l.Z,{eventView:y,orgSlug:n.slug,location:t,referrer:"api.performance.transaction-events",useEvents:!0,children:e=>{let{isLoading:s,tableData:l}=e;if(o||s)return(0,D.tZ)(r.or,{fullWidth:!0,children:(0,D.tZ)(a.Z,{})});const f=l?.data?.[0],g={p100:f?.["p100()"],p99:f?.["p100()"],p95:f?.["p95()"],p75:f?.["p75()"],p50:f?.["p50()"]},y=(e=>{const t=(0,O._S)(m,e)[u],n=i?.clone();if(n&&t?.query){const e=new v.MY(n.query);t.query.forEach((t=>e.setFilterValues(t[0],[t[1]]))),n.query=e.formatString()}return n})(g);return(0,D.tZ)(K,{totalEventCount:d,location:t,organization:n,eventView:y,transactionName:c,spanOperationBreakdownFilter:m,onChangeSpanOperationBreakdownFilter:w,eventsDisplayFilterName:u,onChangeEventsDisplayFilter:b,percentileValues:g,webVital:h,setError:p})}})}})}function A(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,i.t)("Events")].join(" — "):[(0,i.t)("Summary"),(0,i.t)("Events")].join(" — ")}function R(e){const t=(0,m.ro)(e.query.webVital,"");if(Object.values(u.Zl).includes(t))return t}function W(e){let{location:t,transactionName:n}=e;const o=(0,m.ro)(t.query.query,""),r=new v.MY(o);r.setFilterValues("event.type",["transaction"]),r.setFilterValues("transaction",[n]),Object.keys(r.filters).forEach((e=>{(0,p.h1)(e)&&r.removeFilter(e)}));const a=["id","user.display",p.zD,"transaction.duration","trace","timestamp"],i=(0,g.q0)(t);i!==g.f1.None?a.splice(2,1,`spans.${i}`):a.push(...p.$4);const s=R(t);return s&&a.splice(3,0,s),c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:a,query:r.formatString(),projects:[],orderby:(0,m.ro)(t.query.sort,"-timestamp")},t)}L.displayName="TransactionEvents",$.displayName="EventsContentWrapper";const X=(0,f.Z)((0,h.Z)(L))},"../node_modules/lodash/_baseExtremum.js":(e,t,n)=>{var o=n("../node_modules/lodash/isSymbol.js");e.exports=function(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],s=t(i);if(null!=s&&(void 0===l?s==s&&!o(s):n(s,l)))var l=s,c=i}return c}},"../node_modules/lodash/_baseGt.js":e=>{e.exports=function(e,t){return e>t}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionEvents_index_tsx-node_modules_lodash__bas-74e26d.e0f64f5d8075baa55d48b5cfc0d3b0e6.js.map