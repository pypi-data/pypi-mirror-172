"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_auth_login_tsx"],{"./app/views/auth/login.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>U,formFooterClass:()=>R});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),i=s("./app/components/alert.tsx"),a=s("./app/components/button.tsx"),l=s("./app/components/loadingError.tsx"),p=s("./app/components/loadingIndicator.tsx"),d=s("./app/components/navTabs.tsx"),h=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),u=s("./app/utils/withApi.tsx"),m=s("../node_modules/react-router/es/index.js"),g=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),Z=s("./app/components/deprecatedforms/form.tsx"),b=s("./app/components/deprecatedforms/passwordField.tsx"),f=s("./app/components/deprecatedforms/textField.tsx"),x=s("./app/components/links/link.tsx"),v=s("./app/icons/index.tsx"),y=s("./app/stores/configStore.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const L=e=>{let{vstsLoginLink:t,githubLoginLink:s,googleLoginLink:r}=e;return(0,S.BX)(N,{children:[(0,S.tZ)(k,{children:(0,h.t)("External Account Login")}),r&&(0,S.tZ)(a.ZP,{align:"left",size:"sm",icon:(0,S.tZ)(v.vY,{size:"xs"}),href:r,children:(0,h.t)("Sign in with Google")}),s&&(0,S.tZ)(a.ZP,{align:"left",size:"sm",icon:(0,S.tZ)(v.Uv,{size:"xs"}),href:s,children:(0,h.t)("Sign in with GitHub")}),t&&(0,S.tZ)(a.ZP,{align:"left",size:"sm",icon:(0,S.tZ)(v.mT,{size:"xs"}),href:t,children:(0,h.t)("Sign in with Azure DevOps")})]})};L.displayName="LoginProviders";class w extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{errorMessage:null,errors:{}}),(0,r.Z)(this,"handleSubmit",(async(e,t,s)=>{try{const s=await this.props.api.requestPromise("/auth/login/",{method:"POST",data:e});t(e),y.Z.set("user",s.user),m.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON||!e.responseJSON.errors)return void s(e);let t=e.responseJSON.detail;e.responseJSON.errors.__all__&&(t=e.responseJSON.errors.__all__),this.setState({errorMessage:t,errors:e.responseJSON.errors||{}}),s(e)}}))}render(){const{errorMessage:e,errors:t}=this.state,{githubLoginLink:s,vstsLoginLink:r}=this.props.authConfig,o=!(!s&&!r);return(0,S.tZ)(g.ms,{children:n=>{let{css:i}=n;return(0,S.BX)(_,{hasLoginProvider:o,children:[(0,S.BX)(Z.Z,{submitLabel:(0,h.t)("Continue"),onSubmit:this.handleSubmit,footerClass:i`
                ${R}
              `,errorMessage:e,extraButton:(0,S.tZ)(P,{to:"/account/recover/",children:(0,h.t)("Lost your password?")}),children:[(0,S.tZ)(f.Z,{name:"username",placeholder:(0,h.t)("username or email"),label:(0,h.t)("Account"),error:t.username,required:!0}),(0,S.tZ)(b.Z,{name:"password",placeholder:(0,h.t)("password"),label:(0,h.t)("Password"),error:t.password,required:!0})]}),o&&(0,S.tZ)(L,{vstsLoginLink:r,githubLoginLink:s})]})}})}}w.displayName="LoginForm";const _=(0,o.Z)("div",{target:"e1f436793"})("display:grid;gap:60px;grid-template-columns:",(e=>e.hasLoginProvider?"1fr 0.8fr":"1fr"),";"),k=(0,o.Z)("div",{target:"e1f436792"})({name:"1u5acre",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px"}),N=(0,o.Z)("div",{target:"e1f436791"})("position:relative;display:grid;grid-auto-rows:max-content;gap:",(0,c.Z)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(e=>e.theme.border),";}"),P=(0,o.Z)(x.Z,{target:"e1f436790"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeMedium),";&:hover{color:",(e=>e.theme.textColor),";}"),C=w;var O=s("./app/components/deprecatedforms/radioBooleanField.tsx"),q=s("./app/components/links/externalLink.tsx");const J=()=>(0,S.tZ)(O.Z,{name:"subscribe",yesLabel:(0,h.t)("Yes, I would like to receive updates via email"),noLabel:(0,h.t)("No, I'd prefer not to receive these updates"),help:(0,h._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,S.tZ)("a",{href:"https://sentry.io/privacy/",children:"Privacy Policy"})})});J.displayName="SubscribeField";class z extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{errorMessage:null,errors:{}}),(0,r.Z)(this,"handleSubmit",(async(e,t,s)=>{const{api:r}=this.props;try{const s=await r.requestPromise("/auth/register/",{method:"POST",data:e});t(e),y.Z.set("user",s.user),m.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON||!e.responseJSON.errors)return void s(e);let t=e.responseJSON.detail;e.responseJSON.errors.__all__&&(t=e.responseJSON.errors.__all__),this.setState({errorMessage:t,errors:e.responseJSON.errors||{}}),s(e)}}))}render(){const{hasNewsletter:e}=this.props.authConfig,{errorMessage:t,errors:s}=this.state;return(0,S.tZ)(g.ms,{children:r=>{let{css:o}=r;return(0,S.BX)(Z.Z,{initialData:{subscribe:!0},submitLabel:(0,h.t)("Continue"),onSubmit:this.handleSubmit,footerClass:o`
              ${R}
            `,errorMessage:t,extraButton:(0,S.tZ)(M,{href:"https://sentry.io/privacy/",children:(0,h.t)("Privacy Policy")}),children:[(0,S.tZ)(f.Z,{name:"name",placeholder:(0,h.t)("Jane Bloggs"),label:(0,h.t)("Name"),error:s.name,required:!0}),(0,S.tZ)(f.Z,{name:"username",placeholder:(0,h.t)("you@example.com"),label:(0,h.t)("Email"),error:s.username,required:!0}),(0,S.tZ)(b.Z,{name:"password",placeholder:(0,h.t)("something super secret"),label:(0,h.t)("Password"),error:s.password,required:!0}),e&&(0,S.tZ)(J,{})]})}})}}z.displayName="RegisterForm";const M=(0,o.Z)(q.Z,{target:"e138ohel0"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),T=z;class B extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{errorMessage:null}),(0,r.Z)(this,"handleSubmit",(async(e,t,s)=>{const{api:r}=this.props;try{const s=await r.requestPromise("/auth/sso-locate/",{method:"POST",data:e});t(e),m.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON)return void s(e);const t=e.responseJSON.detail;this.setState({errorMessage:t}),s(e)}}))}render(){const{serverHostname:e}=this.props.authConfig,{errorMessage:t}=this.state;return(0,S.tZ)(Z.Z,{className:"form-stacked",submitLabel:(0,h.t)("Continue"),onSubmit:this.handleSubmit,footerClass:"auth-footer",errorMessage:t,children:(0,S.tZ)(f.Z,{name:"organization",placeholder:"acme",label:(0,h.t)("Organization ID"),required:!0,help:(0,h._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,S.tZ)("strong",{children:"acme"}),example:(0,S.tZ)(j,{slug:"acme",hostname:e})})})})}}B.displayName="SsoForm";const j=e=>{let{hostname:t,slug:s}=e;return(0,S.BX)("code",{children:[t,"/",(0,S.tZ)("strong",{children:s})]})};j.displayName="SlugExample";const A={login:C,register:T,sso:B};class D extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{loading:!0,error:null,activeTab:"login",authConfig:null}),(0,r.Z)(this,"handleSetTab",((e,t)=>{this.setState({activeTab:e}),t.preventDefault()})),(0,r.Z)(this,"fetchData",(async()=>{const{api:e}=this.props;try{const t=await e.requestPromise("/auth/config/"),{vsts_login_link:s,github_login_link:r,google_login_link:o,...n}=t,i={...n,vstsLoginLink:s,githubLoginLink:r,googleLoginLink:o};this.setState({authConfig:i})}catch(e){this.setState({error:!0})}this.setState({loading:!1})}))}componentDidMount(){this.fetchData()}get hasAuthProviders(){if(null===this.state.authConfig)return!1;const{githubLoginLink:e,googleLoginLink:t,vstsLoginLink:s}=this.state.authConfig;return!!(e||s||t)}render(){const{api:e}=this.props,{loading:t,error:s,activeTab:r,authConfig:o}=this.state,l=A[r],d=[["login",(0,h.t)("Login")],["sso",(0,h.t)("Single Sign-On")],["register",(0,h.t)("Register"),!o?.canRegister]],{orgId:c}=this.props.params;return(0,S.BX)(n.Fragment,{children:[(0,S.BX)(I,{children:[(0,S.tZ)(X,{children:(0,h.t)("Sign in to continue")}),(0,S.tZ)(E,{children:d.map((e=>{let[t,s,o]=e;return!o&&(0,S.tZ)("li",{className:r===t?"active":"",children:(0,S.tZ)("a",{href:"#",onClick:e=>this.handleSetTab(t,e),children:s})},t)}))})]}),t&&(0,S.tZ)(p.Z,{}),s&&(0,S.tZ)(F,{message:(0,h.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!t&&null!==o&&!s&&(0,S.BX)(H,{hasAuthProviders:this.hasAuthProviders,children:[void 0!==c&&(0,S.tZ)(i.Z,{type:"warning",trailingItems:(0,S.tZ)(a.ZP,{to:"/",size:"xs",children:"Reload"}),children:(0,h._N)("Experimental SPA mode does not currently support SSO style login. To develop against the [org] you'll need to copy your production session cookie.",{org:this.props.params.orgId})}),(0,S.tZ)(l,{api:e,authConfig:o})]})]})}}D.displayName="Login";const F=(0,o.Z)(l.Z,{target:"e1omfq4b4"})("margin:",(0,c.Z)(2),";"),I=(0,o.Z)("div",{target:"e1omfq4b3"})("border-bottom:1px solid ",(e=>e.theme.border),";padding:20px 40px 0;"),X=(0,o.Z)("h3",{target:"e1omfq4b2"})({name:"cqisp1",styles:"font-size:24px;margin:0 0 20px 0"}),E=(0,o.Z)(d.Z,{target:"e1omfq4b1"})({name:"ti75j2",styles:"margin:0"}),H=(0,o.Z)("div",{target:"e1omfq4b0"})("padding:35px;width:",(e=>e.hasAuthProviders?"600px":"490px"),";"),R=`\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  gap: ${(0,c.Z)(1)};\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n`,U=(0,u.Z)(D)}}]);
//# sourceMappingURL=../sourcemaps/app_views_auth_login_tsx.c17995311494cd3fd55e217e1de7de9a.js.map