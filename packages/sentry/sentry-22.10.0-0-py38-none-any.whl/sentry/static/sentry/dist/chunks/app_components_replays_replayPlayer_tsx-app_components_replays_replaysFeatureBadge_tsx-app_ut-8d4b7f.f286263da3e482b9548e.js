"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_replays_replayPlayer_tsx-app_components_replays_replaysFeatureBadge_tsx-app_ut-8d4b7f"],{"./app/components/replays/replayPlayer.tsx":(e,r,t)=>{t.d(r,{Z:()=>j});var a=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=t("../node_modules/react/index.js"),o=t("../node_modules/@react-aria/utils/dist/module.js"),n=t("./app/icons/index.tsx"),i=t("./app/locale.tsx"),l=t("./app/styles/space.tsx"),c=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{className:r}=e;return(0,c.tZ)(p,{className:r,children:(0,c.BX)(u,{children:[(0,c.tZ)(n.jo,{size:"sm"}),(0,i.t)("Buffering...")]})})}d.displayName="BufferingOverlay";const p=(0,a.Z)("div",{target:"e1tth60i1"})({name:"1p9eycc",styles:"user-select:none;display:grid;place-items:center"}),u=(0,a.Z)("div",{target:"e1tth60i0"})("display:grid;grid-template-columns:max-content max-content;gap:",(0,l.Z)(.75),";place-items:center;padding:",(0,l.Z)(3),";background:",(e=>e.theme.gray300),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.white),";z-index:",(e=>e.theme.zIndex.initial),";"),m=d;var h=t("./app/components/tooltip.tsx");function y(e){let{speed:r,className:t}=e;return(0,c.tZ)(g,{className:t,children:(0,c.BX)(b,{title:(0,i.t)(`Fast forwarding at ${r}x`),children:[(0,i.t)("Fast forwarding through inactivity"),(0,c.tZ)(n.CC,{size:"sm",direction:"right"})]})})}y.displayName="FastForwardBadge";const g=(0,a.Z)("div",{target:"e1135tm81"})({name:"8y7axy",styles:"user-select:none;display:grid;align-items:end;justify-items:start"}),b=(0,a.Z)(h.Z,{target:"e1135tm80"})("display:grid;grid-template-columns:max-content max-content;gap:",(0,l.Z)(.5),";align-items:center;background:",(e=>e.theme.gray300),";color:",(e=>e.theme.white),";padding:",(0,l.Z)(1.5)," ",(0,l.Z)(2),";border-top-right-radius:",(e=>e.theme.borderRadius),";z-index:",(e=>e.theme.zIndex.initial),";"),x=y;var f=t("./app/components/replays/replayContext.tsx");function w(e){let{className:r}=e;const{initRoot:t,dimensions:a,fastForwardSpeed:n,isBuffering:i}=(0,f.M)(),l=(0,s.useRef)(null),d=(0,s.useRef)(null),[p,u]=(0,s.useState)({width:0,height:0});(0,s.useEffect)((()=>t(d.current)),[t]);const m=(0,s.useCallback)((()=>u({width:l.current?.clientWidth||0,height:l.current?.clientHeight||0})),[u]);return(0,o.yU)({ref:l,onResize:m}),(0,s.useEffect)((()=>{void 0===window.ResizeObserver&&m()}),[m]),(0,s.useEffect)((()=>{if(d.current){const e=Math.min(p.width/a.width,p.height/a.height,1);e&&(d.current.style["transform-origin"]="top left",d.current.style.transform=`scale(${e})`,d.current.style.width=a.width*e+"px",d.current.style.height=a.height*e+"px")}}),[p,a]),(0,c.BX)(v,{ref:l,className:"sentry-block",children:[(0,c.tZ)("div",{ref:d,className:r}),n?(0,c.tZ)(Z,{speed:n}):null,i?(0,c.tZ)(k,{}):null]})}w.displayName="BasePlayerRoot";const v=(0,a.Z)("div",{target:"elabtru4"})("width:100%;display:flex;flex-grow:1;justify-content:center;align-items:center;position:relative;overflow:hidden;background-color:",(e=>e.theme.backgroundSecondary),";background-image:repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ",(e=>e.theme.backgroundSecondary)," 8px,\n      ",(e=>e.theme.backgroundSecondary)," 11px\n    ),repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ",(e=>e.theme.gray100)," 15px,\n      ",(e=>e.theme.gray100)," 16px\n    );"),Z=(0,a.Z)(x,{target:"elabtru3"})({name:"m4y3yb",styles:"position:absolute;left:0;bottom:0"}),k=(0,a.Z)(m,{target:"elabtru2"})({name:"j2pfbl",styles:"position:absolute;top:0;left:0;right:0;bottom:0"}),S=(0,a.Z)(w,{target:"elabtru1"})({name:"1nx655q",styles:".replayer-wrapper{user-select:none;}.replayer-wrapper>.replayer-mouse-tail{position:absolute;pointer-events:none;}.replayer-wrapper>iframe{border:none;background:white;}"}),j=(0,a.Z)(S,{target:"elabtru0"})(".replayer-mouse{position:absolute;width:32px;height:32px;transition:left 0.05s linear,top 0.05s linear;background-size:contain;background-repeat:no-repeat;background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxMiAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTZWMEwxMS42IDExLjZINC44TDQuNCAxMS43TDAgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS4xIDE2LjdMNS41IDE4LjJMMC43OTk5OTkgNy4xTDQuNSA1LjZMOS4xIDE2LjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNC42NzQ1MSA4LjYxODUxTDIuODMwMzEgOS4zOTI3MUw1LjkyNzExIDE2Ljc2OTVMNy43NzEzMSAxNS45OTUzTDQuNjc0NTEgOC42MTg1MVoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0xIDIuNFYxMy42TDQgMTAuN0w0LjQgMTAuNkg5LjJMMSAyLjRaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K');border-color:transparent;}.replayer-mouse:after{content:'';display:inline-block;width:32px;height:32px;background:",(e=>e.theme.purple300),";border-radius:100%;transform:translate(-50%, -50%);opacity:0.3;}.replayer-mouse.active:after{animation:click 0.2s ease-in-out 1;}.replayer-mouse.touch-device{background-image:none;width:70px;height:70px;border-radius:100%;margin-left:-37px;margin-top:-37px;border:4px solid rgba(73, 80, 246, 0);transition:left 0s linear,top 0s linear,border-color 0.2s ease-in-out;}.replayer-mouse.touch-device.touch-active{border-color:",(e=>e.theme.purple200),";transition:left 0.25s linear,top 0.25s linear,border-color 0.2s ease-in-out;}.replayer-mouse.touch-device:after{opacity:0;}.replayer-mouse.touch-device.active:after{animation:touch-click 0.2s ease-in-out 1;}@keyframes click{0%{opacity:0.3;width:20px;height:20px;}50%{opacity:0.5;width:10px;height:10px;}}@keyframes touch-click{0%{opacity:0;width:20px;height:20px;}50%{opacity:0.5;width:10px;height:10px;}}")},"./app/components/replays/replaysFeatureBadge.tsx":(e,r,t)=>{t.d(r,{Z:()=>n});var a=t("./app/components/featureBadge.tsx"),s=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return(0,s.tZ)(a.Z,{...e,type:"alpha"})}o.displayName="ReplaysFeatureBadge";const n=o},"./app/utils/replays/hooks/useReplayData.tsx":(e,r,t)=>{t.d(r,{Z:()=>p});var a=t("../node_modules/react/index.js"),s=t("../node_modules/@sentry/core/esm/exports.js"),o=t("./app/utils/parseLinkHeader.tsx");t("../node_modules/core-js/modules/es.error.cause.js");var n=t("./app/utils/replays/replayDataUtils.tsx"),i=t("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");class l{static factory(e){let{breadcrumbs:r,replayRecord:t,errors:a,rrwebEvents:s,spans:o}=e;return r&&t&&s&&o&&a?new l({breadcrumbs:r,replayRecord:t,errors:a,rrwebEvents:s,spans:o}):null}constructor(e){let{breadcrumbs:r,replayRecord:t,errors:a,rrwebEvents:s,spans:o}=e;(0,i.Z)(this,"replayRecord",void 0),(0,i.Z)(this,"rrwebEvents",void 0),(0,i.Z)(this,"breadcrumbs",void 0),(0,i.Z)(this,"consoleCrumbs",void 0),(0,i.Z)(this,"networkSpans",void 0),(0,i.Z)(this,"memorySpans",void 0),(0,i.Z)(this,"getDurationMs",(()=>1e3*this.replayRecord.duration)),(0,i.Z)(this,"getReplay",(()=>this.replayRecord)),(0,i.Z)(this,"getRRWebEvents",(()=>this.rrwebEvents)),(0,i.Z)(this,"getRawCrumbs",(()=>this.breadcrumbs)),(0,i.Z)(this,"getConsoleCrumbs",(()=>this.consoleCrumbs)),(0,i.Z)(this,"getNetworkSpans",(()=>this.networkSpans)),(0,i.Z)(this,"getMemorySpans",(()=>this.memorySpans));const{startTimestampMs:l,endTimestampMs:c}=(0,n.iz)(t,s,r,o);t.startedAt=new Date(l),t.finishedAt=new Date(c);const d=(0,n._O)(o);this.networkSpans=d.filter(n.j1),this.memorySpans=d.filter(n.qI),this.breadcrumbs=(0,n.so)(t,a,r,d),this.consoleCrumbs=(0,n.c_)(this.breadcrumbs,["console","issue"]),this.rrwebEvents=(0,n.ay)(t,s),this.replayRecord=t}}var c=t("./app/utils/useApi.tsx");const d=Object.freeze({breadcrumbs:void 0,errors:void 0,fetchError:void 0,fetching:!0,replayRecord:void 0,rrwebEvents:void 0,spans:void 0}),p=function(e){let{replaySlug:r,orgSlug:t}=e;const[i,p]=r.split(":"),u=(0,c.Z)(),[m,h]=(0,a.useState)(d),y=(0,a.useCallback)((async()=>(await u.requestPromise(`/projects/${t}/${i}/replays/${p}/`)).data),[u,t,i,p]),g=(0,a.useCallback)((async()=>{const e=`/projects/${t}/${i}/replays/${p}/recording-segments/?download`;let r={href:e,results:!0,cursor:""};const a=[];for(;r.results;){const t=e+"&cursor="+r.cursor,[s,n,i]=await u.requestPromise(t,{includeAllArgs:!0});a.push(s),r=(0,o.Z)(i?.getResponseHeader("Link")??"").next}return a.flatMap((e=>e)).flatMap((e=>function(e){const r={breadcrumbs:[],replaySpans:[],recording:[]};return e.forEach((e=>{"performanceSpan"===e.data?.tag?r.replaySpans.push(e.data.payload):"breadcrumb"===e?.data?.tag?r.breadcrumbs.push(e.data.payload):r.recording.push(e)})),r}(e))).reduce(((e,r)=>(Object.entries(r).forEach((r=>{let[t,a]=r;if(!Array.isArray(a))throw new Error("Invalid value");e[t]=(e[t]||[]).concat(a)})),e)),{})}),[u,t,i,p]),b=(0,a.useCallback)((async e=>e.errorIds.length?(await u.requestPromise(`/organizations/${t}/replays-events-meta/`,{query:{start:e.startedAt.toISOString(),end:e.finishedAt.toISOString(),query:`id:[${String(e.errorIds)}]`}})).data:[]),[u,t]),x=(0,a.useCallback)((async()=>{const e=await y(),r=(0,n.qC)(e);h((e=>({...e,replayRecord:r})));const t=await b(r);return[r,t]}),[y,b]),f=(0,a.useCallback)((async()=>{h(d);try{const[e,r]=await Promise.all([x(),g()]),[t,a]=e;h((e=>({...e,breadcrumbs:r.breadcrumbs,errors:a,fetchError:void 0,fetching:!1,replayRecord:t,rrwebEvents:r.recording,spans:r.replaySpans})))}catch(e){s.Tb(e),h({...d,fetchError:e,fetching:!1})}}),[x,g]);(0,a.useEffect)((()=>{f()}),[f]);const w=(0,a.useMemo)((()=>l.factory({breadcrumbs:m.breadcrumbs,errors:m.errors,replayRecord:m.replayRecord,rrwebEvents:m.rrwebEvents,spans:m.spans})),[m.breadcrumbs,m.errors,m.replayRecord,m.rrwebEvents,m.spans]);return{fetchError:m.fetchError,fetching:m.fetching,onRetry:f,replay:w,replayRecord:m.replayRecord}}},"./app/views/replays/detail/layout/fluidHeight.tsx":(e,r,t)=>{t.d(r,{Z:()=>a});const a=(0,t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e42v6lb0"})({name:"oie2px",styles:"display:flex;flex-direction:column;flex-wrap:nowrap;flex-grow:1;overflow:hidden"})}}]);
//# sourceMappingURL=../sourcemaps/app_components_replays_replayPlayer_tsx-app_components_replays_replaysFeatureBadge_tsx-app_ut-8d4b7f.d0c82fee96e1cc99b3f22c0e80a75daf.js.map