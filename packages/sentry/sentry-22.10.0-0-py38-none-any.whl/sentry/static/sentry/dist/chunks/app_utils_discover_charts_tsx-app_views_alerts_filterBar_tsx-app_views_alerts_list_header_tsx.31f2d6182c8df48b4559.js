"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_charts_tsx-app_views_alerts_filterBar_tsx-app_views_alerts_list_header_tsx"],{"./app/components/createAlertButton.tsx":(e,t,s)=>{s.d(t,{K:()=>h,Z:()=>Z});var a=s("../node_modules/react-router/es/index.js"),r=s("./app/actionCreators/indicator.tsx"),n=s("./app/actionCreators/navigation.tsx"),i=s("./app/components/acl/access.tsx"),o=s("./app/components/assistant/guideAnchor.tsx"),l=s("./app/components/button.tsx"),c=s("./app/components/links/link.tsx"),p=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/utils/useApi.tsx"),m=s("./app/views/alerts/wizard/options.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{projects:t,eventView:s,organization:a,referrer:r,onClick:n,alertType:i,disableMetricDataset:o,...l}=e;const c=t.find((e=>e.id===`${s.project[0]}`)),p=s.generateQueryStringObject();p.query?.includes(`project:${c?.slug}`)&&(p.query=p.query.replace(`project:${c?.slug}`,""));const d=i?m.FZ[i]:m.F4,h={pathname:`/organizations/${a.slug}/alerts/new/metric/`,query:{...p,createFromDiscover:!0,disableMetricDataset:o,referrer:r,...d,project:c?.slug,aggregate:p.yAxis??d.aggregate}};return(0,g.tZ)(x,{organization:a,onClick:()=>{n?.()},to:h,"aria-label":(0,u.t)("Create Alert"),...l})}h.displayName="CreateAlertFromViewButton";const x=(0,a.withRouter)((e=>{let{organization:t,projectSlug:s,iconProps:a,referrer:m,router:h,hideIcon:x,showPermissionGuide:Z,alertOption:v,onEnter:b,...f}=e;const y=(0,d.Z)(),w=e=>{const s=new URLSearchParams;return m&&s.append("referrer",m),":projectId"!==e&&s.append("project",e),v&&s.append("alert_option",v),`/organizations/${t.slug}/alerts/wizard/?${s.toString()}`};function j(e){e.preventDefault(),b?.(),(0,n.T)(w(":projectId"),h)}async function _(){const e=`/organizations/${t.slug}/`;(0,r.E3)();try{await y.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,r.S9)((0,u.t)("Successfully updated organization settings"))}catch(e){(0,r.Iw)((0,u.t)("Unable to update organization settings"))}}const S=(0,u._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,g.tZ)(c.Z,{to:`/settings/${t.slug}`})}),F=e=>(0,g.tZ)(l.ZP,{disabled:!e,title:e?void 0:S,icon:!x&&(0,g.tZ)(p.vr,{...a}),to:s?w(s):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:s?b:j,...f,children:f.children??(0,u.t)("Create Alert")}),k=!t.alertsMemberWrite&&!!Z;return(0,g.tZ)(i.Z,{organization:t,access:["alerts:write"],children:e=>{let{hasAccess:s}=e;return k?(0,g.tZ)(i.Z,{organization:t,access:["org:write"],children:e=>{let{hasAccess:t}=e;return(0,g.tZ)(o.Z,{target:t?"alerts_write_owner":"alerts_write_member",onFinish:t?_:void 0,children:F(s)})}}):F(s)}})})),Z=x},"./app/utils/discover/charts.tsx":(e,t,s)=>{s.d(t,{CX:()=>i,Xp:()=>u,gu:()=>l,x1:()=>c});var a=s("./app/locale.tsx"),r=s("./app/utils.tsx"),n=s("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,r.ri)(e)?o(e,t):"—"}function o(e,t){if(!(0,r.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,n.rl)(e,2);case"duration":return(0,n.g9)(e/1e3,2,!0);case"size":return(0,r.F)(e);default:return e.toString()}}function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;return c(e,t,s,a)}function c(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return s?(0,n.Du)(e):e.toLocaleString();case"percentage":return(0,n.rl)(e,0);case"duration":return p(e,a);case"size":return(0,r.F)(e,0);default:return e.toString()}}function p(e,t){if(t??=d(e),0===e)return"0";switch(t){case n.ps:{const t=(e/n.ps).toFixed(0);return(0,a.t)("%swk",t)}case n.x4:{const t=(e/n.x4).toFixed(0);return(0,a.t)("%sd",t)}case n.kr:{const t=(e/n.kr).toFixed(0);return(0,a.t)("%shr",t)}case n.EB:{const t=(e/n.EB).toFixed(0);return(0,a.t)("%smin",t)}case n.sh:{const t=(e/n.sh).toFixed(0);return(0,a.t)("%ss",t)}default:const t=e.toFixed(0);return(0,a.t)("%sms",t)}}function u(e,t){let s=0;const a=function(e,t){let s;if(e[0]?.data){let a,r=e[0];e.forEach(((s,n)=>{let{seriesName:i,data:o}=s;!1!==t?.selected?.[i]&&o.length&&(r=e[n],a??=e[n])})),a?.data&&(s={max:Math.max(...a.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return s}(e,t);if(a){const e=(a.max+a.min)/2;s=d((a.max-a.min)/5),(e/s).toFixed(0).length>6&&(s=d(e))}return s}function d(e){return e>=n.ps?n.ps:e>=n.x4?n.x4:e>=n.kr?n.kr:e>=n.EB?n.EB:e>=n.sh?n.sh:1}},"./app/views/alerts/filterBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/buttonBar.tsx"),n=s("./app/components/compactSelect.tsx"),i=s("./app/components/projectPageFilter.tsx"),o=s("./app/components/searchBar.tsx"),l=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),p=s("./app/views/alerts/list/rules/teamFilter.tsx"),u=s("./app/views/alerts/utils/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{location:t,onChangeSearch:s,onChangeFilter:a,onChangeStatus:r,hasStatusFilters:c}=e;const m=(0,u.LI)(t.query.team),g=(0,u.g2)(t.query.status);return(0,d.BX)(h,{children:[(0,d.BX)(x,{gap:1.5,children:[(0,d.tZ)(p.Z,{selectedTeams:m,handleChangeFilter:a}),(0,d.tZ)(i.Z,{}),c&&r&&(0,d.tZ)(n.Z,{triggerProps:{prefix:(0,l.t)("Status")},options:[{value:"all",label:(0,l.t)("All")},{value:"open",label:(0,l.t)("Active")},{value:"closed",label:(0,l.t)("Inactive")}],value:g,onChange:e=>{let{value:t}=e;return r(t)}})]}),(0,d.tZ)(o.Z,{placeholder:(0,l.t)("Search by name"),query:t.query?.name,onSearch:s})]})}m.displayName="FilterBar";const g=m,h=(0,a.Z)("div",{target:"e8u29161"})("display:grid;gap:",(0,c.Z)(1.5),";margin-bottom:",(0,c.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:min-content 1fr;}"),x=(0,a.Z)(r.ZP,{target:"e8u29160"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:flex-start;gap:",(0,c.Z)(1.5),";}@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:grid;grid-auto-columns:minmax(auto, 300px);}")},"./app/views/alerts/list/header.tsx":(e,t,s)=>{s.d(t,{Z:()=>v});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/actionCreators/navigation.tsx"),n=s("./app/components/button.tsx"),i=s("./app/components/buttonBar.tsx"),o=s("./app/components/createAlertButton.tsx"),l=s("./app/components/globalSelectionLink.tsx"),c=s("./app/components/layouts/thirds.tsx"),p=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/stores/projectsStore.tsx"),m=s("./app/styles/space.tsx"),g=s("./app/utils/useOrganization.tsx"),h=s("./app/utils/usePageFilters.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=e=>{let{router:t,activeTab:s}=e;const a=(0,g.Z)(),{selection:i}=(0,h.Z)(),m=(0,x.tZ)("li",{className:"rules"===s?"active":"",children:(0,x.tZ)(l.Z,{to:`/organizations/${a.slug}/alerts/rules/`,children:(0,u.t)("Alert Rules")})});return(0,x.BX)(c.h4,{children:[(0,x.tZ)(c.oB,{children:(0,x.tZ)(b,{children:(0,u.t)("Alerts")})}),(0,x.tZ)(c.kP,{children:(0,x.BX)(f,{gap:1,children:[(0,x.tZ)(o.Z,{organization:a,iconProps:{size:"sm"},priority:"primary",referrer:"alert_stream",showPermissionGuide:!0,projectSlug:1===i.projects.length?d.Z.getById(`${i.projects[0]}`)?.slug:void 0,children:(0,u.t)("Create Alert")}),(0,x.tZ)(n.ZP,{onClick:e=>{e.preventDefault(),(0,r.T)(`/settings/${a.slug}/projects/:projectId/alerts/`,t)},href:"#",icon:(0,x.tZ)(p.iC,{size:"sm"}),"aria-label":(0,u.t)("Settings")})]})}),(0,x.BX)(c.mL,{underlined:!0,children:[m,(0,x.tZ)("li",{className:"stream"===s?"active":"",children:(0,x.tZ)(l.Z,{to:`/organizations/${a.slug}/alerts/`,children:(0,u.t)("History")})})]})]})};Z.displayName="AlertHeader";const v=Z,b=(0,a.Z)(c.Dx,{target:"e59niir1"})("margin-top:",(0,m.Z)(.5),";"),f=(0,a.Z)(i.ZP,{target:"e59niir0"})({name:"s0vnfv",styles:"height:32px"})},"./app/views/alerts/list/rules/teamFilter.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/debounce.js"),i=s.n(n),o=s("./app/components/avatar/teamAvatar.tsx"),l=s("./app/components/badge.tsx"),c=s("./app/components/compactSelect.tsx"),p=s("./app/constants/index.tsx"),u=s("./app/icons/index.tsx"),d=s("./app/locale.tsx"),m=s("./app/utils/useTeams.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=[{label:(0,d.t)("My Teams"),value:"myteams"},{label:(0,d.t)("Unassigned"),value:"unassigned"}];function x(e){let{selectedTeams:t,handleChangeFilter:s,showIsMemberTeams:a=!1,showSuggestedOptions:n=!0,showMyTeamsDescription:l=!1}=e;const{teams:x,onSearch:Z,fetching:b}=(0,m.Z)({provideUserTeams:a}),f=(0,r.useMemo)((()=>x.map((e=>({value:e.id,label:`#${e.slug}`,leadingItems:(0,g.tZ)(o.Z,{team:e,size:18})})))),[x]),[y,w]=(0,r.useMemo)((()=>{const e=t[0]&&h.find((e=>e.value===t[0])),s=t[0]&&x.find((e=>e.id===t[0]));return e?[(0,g.tZ)(u.qO,{},0),e.label]:s?[(0,g.tZ)(o.Z,{team:s,size:16},0),`#${s.slug}`]:[(0,g.tZ)(u.qO,{},0),l?(0,d.t)("My Teams"):(0,d.t)("All Teams")]}),[t,x,l]);return(0,g.tZ)(c.Z,{multiple:!0,isClearable:!0,isSearchable:!0,isLoading:b,menuTitle:(0,d.t)("Filter teams"),options:n?[{value:"_suggested",label:(0,d.t)("Suggested"),options:h},{value:"_teams",label:(0,d.t)("Teams"),options:f}]:f,value:t,onInputChange:i()((e=>{Z(e)}),p.Dk),onChange:e=>s(e?e.map((e=>e.value)):[]),triggerLabel:(0,g.BX)(r.Fragment,{children:[w,t.length>1&&(0,g.tZ)(v,{text:"+"+(t.length-1)})]}),triggerProps:{icon:y}})}x.displayName="TeamFilter";const Z=x,v=(0,a.Z)(l.Z,{target:"e5c2mjo0"})({name:"ozd7xs",styles:"flex-shrink:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_charts_tsx-app_views_alerts_filterBar_tsx-app_views_alerts_list_header_tsx.91263a69210682cab3c9108a42d70873.js.map