"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationApiKeys_index_tsx"],{"./app/components/links/linkWithConfirmation.tsx":(t,e,s)=>{s.d(e,{Z:()=>r});var i=s("./app/components/confirm.tsx"),n=s("./app/components/links/anchor.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(t){let{className:e,disabled:s,title:a,children:r,...p}=t;return(0,o.tZ)(i.Z,{...p,disabled:s,children:(0,o.tZ)(n.Z,{href:"#",className:e,disabled:s,title:a,children:r})})}a.displayName="LinkWithConfirmation";const r=a},"./app/utils/recreateRoute.tsx":(t,e,s)=>{s.d(e,{Z:()=>a});var i=s("../node_modules/lodash/findLastIndex.js"),n=s.n(i),o=s("./app/utils/replaceRouterParams.tsx");function a(t,e){const{routes:s,params:i,location:a,stepBack:r}=e,p=s.map((t=>{let{path:e}=t;return e||""}));let l,d;"string"!=typeof t?(d=s.indexOf(t)+1,l=n()(p.slice(0,d),(t=>"/"===t[0]))):l=n()(p,(t=>"/"===t[0]));let c=p.slice(l,d);void 0!==r&&(c=c.slice(0,r));const m=a?.search??"",u=a?.hash??"",h=`${c.join("")}${"string"!=typeof t?"":t}${m}${u}`;return(0,o.Z)(h,i)}},"./app/utils/routeTitle.tsx":(t,e,s)=>{s.d(e,{Z:()=>i});const i=function(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;const n=`${t} - ${e}`,o=i?`${n} - ${i}`:n;return s?`${o} - Sentry`:o}},"./app/views/asyncView.tsx":(t,e,s)=>{s.d(e,{Z:()=>a});var i=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends i.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/organizationApiKeys/index.tsx":(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react-router/es/index.js"),o=s("./app/actionCreators/indicator.tsx"),a=s("./app/locale.tsx"),r=s("./app/utils/recreateRoute.tsx"),p=s("./app/utils/routeTitle.tsx"),l=s("./app/utils/withOrganization.tsx"),d=s("./app/views/asyncView.tsx"),c=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=s("../node_modules/react/index.js"),u=s("./app/components/alertLink.tsx"),h=s("./app/components/button.tsx"),y=s("./app/components/links/externalLink.tsx"),x=s("./app/components/links/link.tsx"),g=s("./app/components/links/linkWithConfirmation.tsx"),Z=s("./app/components/panels/index.tsx"),k=s("./app/components/textCopyInput.tsx"),b=s("./app/icons/index.tsx"),w=s("./app/views/settings/components/settingsPageHeader.tsx"),v=s("./app/views/settings/components/text/textBlock.tsx"),A=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),f={name:"1lo1a34",styles:"position:relative;top:2px"};function P(t){let{params:e,routes:s,keys:i,busy:n,loading:o,onAddApiKey:p,onRemove:l}=t;const d=i&&i.length,c=(0,A.tZ)(h.ZP,{priority:"primary",size:"sm",icon:(0,A.tZ)(b.N_,{size:"xs",isCircled:!0}),busy:n,disabled:n,onClick:p,children:(0,a.t)("New API Key")});return(0,A.BX)("div",{children:[(0,A.tZ)(w.Z,{title:(0,a.t)("API Keys"),action:c}),(0,A.tZ)(v.Z,{children:(0,a._N)("API keys grant access to the [api:developer web API].\n          If you're looking to configure a Sentry client, you'll need a\n          client key which is available in your project settings.",{api:(0,A.tZ)(y.Z,{href:"https://docs.sentry.io/api/"})})}),(0,A.tZ)(u.Z,{to:"/settings/account/api/auth-tokens/",priority:"info",children:(0,a._N)("Until Sentry supports OAuth, you might want to switch to using [tokens:Auth Tokens] instead.",{tokens:(0,A.tZ)("u",{})})}),(0,A.tZ)(Z.KB,{isLoading:o,isEmpty:!d,emptyMessage:(0,a.t)("No API keys for this organization"),headers:[(0,a.t)("Name"),(0,a.t)("Key"),(0,a.t)("Actions")],children:i&&i.map((t=>{let{id:i,key:n,label:o}=t;const p=(0,r.Z)(`${i}/`,{params:e,routes:s});return(0,A.BX)(m.Fragment,{children:[(0,A.tZ)(I,{children:(0,A.tZ)(x.Z,{to:p,children:o})}),(0,A.tZ)(k.ZP,{size:"sm",monospace:!0,children:n}),(0,A.tZ)(I,{children:(0,A.tZ)(g.Z,{"aria-label":(0,a.t)("Remove API Key"),className:"btn btn-default btn-sm",onConfirm:()=>l(i),message:(0,a.t)("Are you sure you want to remove this API key?"),title:(0,a.t)("Remove API Key?"),children:(0,A.tZ)(b.Fz,{size:"xs",css:f})})})]},n)}))})]})}P.displayName="OrganizationApiKeysList";const I=(0,c.Z)("div",{target:"e9c1bws0"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),j=P;class $ extends d.Z{constructor(){super(...arguments),(0,i.Z)(this,"handleRemove",(async t=>{const e=[...this.state.keys];this.setState((e=>({keys:e.keys.filter((e=>{let{id:s}=e;return s!==t}))})));try{await this.api.requestPromise(`/organizations/${this.props.params.orgId}/api-keys/${t}/`,{method:"DELETE",data:{}})}catch{this.setState({keys:e,busy:!1}),(0,o.Iw)((0,a.t)("Error removing key"))}})),(0,i.Z)(this,"handleAddApiKey",(async()=>{this.setState({busy:!0});try{const t=await this.api.requestPromise(`/organizations/${this.props.params.orgId}/api-keys/`,{method:"POST",data:{}});t&&(this.setState({busy:!1}),n.browserHistory.push((0,r.Z)(`${t.id}/`,{params:this.props.params,routes:this.props.routes})),(0,o.S9)((0,a.t)(`Created a new API key "${t.label}"`)))}catch{this.setState({busy:!1})}}))}getEndpoints(){return[["keys",`/organizations/${this.props.params.orgId}/api-keys/`]]}getTitle(){return(0,p.Z)((0,a.t)("API Keys"),this.props.organization.slug,!1)}renderLoading(){return this.renderBody()}renderBody(){return(0,A.tZ)(j,{loading:this.state.loading,busy:this.state.busy,keys:this.state.keys,onRemove:this.handleRemove,onAddApiKey:this.handleAddApiKey,...this.props})}}const _=(0,l.Z)($)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationApiKeys_index_tsx.bb3f84619c225120a60369b15f420d15.js.map