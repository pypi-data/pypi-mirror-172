(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_editableText_tsx-app_utils_performance_contexts_metricsCardinality_tsx-node_mo-486b2b"],{"./app/components/editableText.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),s=n("./app/actionCreators/indicator.tsx"),a=n("./app/components/input.tsx"),i=n("./app/components/textOverflow.tsx"),c=n("./app/icons/iconEdit.tsx"),l=n("./app/styles/space.tsx"),u=n("./app/utils.tsx");const d=(e,t)=>{const[n,r]=(0,o.useState)(!1),s=t??document.body;return(0,o.useEffect)((()=>{const t=t=>{let{key:n}=t;n===e&&r(!0)},n=t=>{let{key:n}=t;n===e&&r(!1)};return s.addEventListener("keydown",t),s.addEventListener("keyup",n),()=>{s.removeEventListener("keydown",t),s.removeEventListener("keyup",n)}}),[e,s]),n};var m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{value:t,onChange:n,name:r,errorMessage:a,successMessage:i,maxLength:l,isDisabled:p=!1,autoSelect:f=!1,className:Z,"aria-label":_}=e;const[C,w]=(0,o.useState)(!1),[E,k]=(0,o.useState)(t),j=!E.trim(),L=(0,o.useRef)(null),P=(0,o.useRef)(null),D=(0,o.useRef)(null),T=d("Enter"),N=d("Escape");function z(){t!==E&&k(t),C&&w(!1)}var S,O;S=L,O=()=>{C&&(j?q("error"):(E!==t&&(n(E),q("success")),w(!1)))},(0,o.useEffect)((()=>{const e=e=>{const t=S?.current;t&&!t.contains(e.target)&&O(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[S,O]);const M=(0,o.useCallback)((()=>{if(T){if(j)return void q("error");E!==t&&(n(E),q("success")),w(!1)}}),[T,E,n]),R=(0,o.useCallback)((()=>{N&&z()}),[N]);function q(e){"error"!==e?i&&(0,s.S9)(i):a&&(0,s.Iw)(a)}return(0,o.useEffect)((()=>{z()}),[p,t]),(0,o.useEffect)((()=>{if(C){const e=D.current;(0,u.ri)(e)&&e.focus()}}),[C]),(0,o.useEffect)((()=>{C&&(M(),R())}),[M,R,C]),(0,m.tZ)(x,{isDisabled:p,isEditing:C,className:Z,children:C?(0,m.BX)(h,{ref:L,isEmpty:j,"data-test-id":"editable-text-input",children:[(0,m.tZ)(y,{"aria-label":_,name:r,ref:D,value:E,onChange:function(e){k(e.target.value)},onFocus:e=>f&&e.target.select(),maxLength:l}),(0,m.tZ)(v,{children:E})]}):(0,m.BX)(b,{onClick:p?void 0:function(){w(!0)},ref:P,isDisabled:p,"data-test-id":"editable-text-label",children:[(0,m.tZ)(g,{children:E}),!p&&(0,m.tZ)(c.y,{})]})})}p.displayName="EditableText";const f=p,b=(0,r.Z)("div",{target:"e1nzw5k75"})("display:grid;grid-auto-flow:column;align-items:center;gap:",(0,l.Z)(1),";cursor:",(e=>e.isDisabled?"default":"pointer"),";"),g=(0,r.Z)(i.Z,{target:"e1nzw5k74"})("border-top:1px solid transparent;border-bottom:1px dotted ",(e=>e.theme.gray200),";"),h=(0,r.Z)("div",{target:"e1nzw5k73"})("display:inline-block;background:",(e=>e.theme.gray100),";border-radius:",(e=>e.theme.borderRadius),";margin:-",(0,l.Z)(.5)," -",(0,l.Z)(1),";padding:",(0,l.Z)(.5)," ",(0,l.Z)(1),";max-width:calc(100% + ",(0,l.Z)(2),");"),y=(0,r.Z)(a.Z,{target:"e1nzw5k72"})({name:"1v43sqt",styles:"border:none!important;background:transparent;height:auto;min-height:34px;padding:0;font-size:inherit;&,&:focus,&:active,&:hover{box-shadow:none;}"}),v=(0,r.Z)("div",{target:"e1nzw5k71"})("height:0;opacity:0;white-space:pre;padding:0 ",(0,l.Z)(1),";"),x=(0,r.Z)("div",{target:"e1nzw5k70"})("display:flex;",(e=>e.isDisabled&&`\n      ${g} {\n        border-bottom-color: transparent;\n      }\n    `),";")},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,n)=>{"use strict";n.d(t,{BT:()=>v,e0:()=>x});var r=n("../node_modules/react/index.js"),o=n("./app/utils/dates.tsx"),s=n("./app/utils/discover/eventView.tsx"),a=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),i=n("../node_modules/lodash/omit.js"),c=n.n(i),l=n("./app/utils/discover/genericDiscoverQuery.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{eventView:t,location:n}=e;return c()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function m(e){let{children:t,...n}=e;return(0,u.tZ)(l.ZP,{route:"metrics-compatibility-sums",getRequestPayload:d,...n,children:e=>{let{tableData:n,...r}=e;return t({tableData:n,...r})}})}function p(e){let{eventView:t,location:n}=e;return c()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function f(e){let{children:t,...n}=e;return(0,u.tZ)(l.ZP,{route:"metrics-compatibility",getRequestPayload:p,...n,children:e=>{let{tableData:n,...r}=e;return t({tableData:n,...r})}})}m.displayName="MetricsCompatibilityQuery",f.displayName="MetricsCompatibilitySumsQuery";var b=n("./app/utils/performance/contexts/utils.tsx");const[g,h,y]=(0,b.n)({name:"MetricsCardinalityContext",strict:!1}),v=e=>{if(!(0,a.gp)(e.organization))return(0,u.tZ)(g,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},n=s.ZP.fromLocation(e.location);n.fields=[{field:"tpm()"}];const i=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,o.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(n);return(0,u.tZ)(r.Fragment,{children:(0,u.tZ)(m,{eventView:i,...t,children:n=>(0,u.tZ)(f,{eventView:i,...t,children:t=>(0,u.tZ)(g,{value:{isLoading:n.isLoading||t.isLoading,outcome:n.isLoading||t.isLoading?void 0:Z(n.tableData&&t.tableData?{...n.tableData,...t.tableData}:null,!!n.error&&!!t.error)},children:e.children})})})})};v.displayName="MetricsCardinalityProvider",y.Consumer;const x=h;function Z(e,t){const n={forceTransactionsOnly:!0};if(!e)return n;const r=e.compatible_projects;return t?n:e?function(e){const t=_(e);return!e.dynamic_sampling_projects?.length||0===t.metricsCount}(e)||function(e){return!_(e).metricsCount}(e)?n:function(e){return _(e).nullCount>0}(e)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:r}:function(e){const t=_(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:r}:function(e){return _(e).unparamCount>0}(e)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:r,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:n}function _(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"../node_modules/lodash/maxBy.js":(e,t,n)=>{var r=n("../node_modules/lodash/_baseExtremum.js"),o=n("../node_modules/lodash/_baseGt.js"),s=n("../node_modules/lodash/_baseIteratee.js");e.exports=function(e,t){return e&&e.length?r(e,s(t,2),o):void 0}}}]);
//# sourceMappingURL=../sourcemaps/app_components_editableText_tsx-app_utils_performance_contexts_metricsCardinality_tsx-node_mo-486b2b.ffb9d9c4738cd54ec393b0a668d685cf.js.map