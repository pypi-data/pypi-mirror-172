"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetViewerModal_utils_tsx-app_views_dashboardsV2_widgetCard_widgetCar-9bf793"],{"./app/components/charts/simpleTableChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>f,p:()=>x});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/components/panels/panelTable.tsx"),n=s("./app/components/tooltip.tsx"),o=s("./app/components/truncate.tsx"),d=s("./app/styles/space.tsx"),l=s("./app/utils/discover/fieldRenderers.tsx"),p=s("./app/utils/discover/fields.tsx"),c=s("./app/utils/withOrganization.tsx"),u=s("./app/views/eventsV2/table/topResultsIndicator.tsx"),g=s("./app/views/eventsV2/utils.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{className:t,loading:s,eventView:i,fields:r,metadata:o,data:d,title:c,fieldHeaderMap:h,stickyHeaders:f,getCustomFieldRenderer:y,organization:v,topResultsIndicators:C,location:R,fieldAliases:_,loader:T}=e;const j=o??{},z=v.features.includes("discover-frontend-use-events-endpoint"),S=(0,g.Hg)(r.map(((e,t)=>({field:e,alias:_[t]}))),z);return(0,m.BX)(a.Fragment,{children:[c&&(0,m.tZ)("h4",{children:c}),(0,m.tZ)(Z,{className:t,isLoading:s,loader:T,headers:S.map(((e,t)=>{const s=(0,p.qG)(e.name,e.type,j),i=e.column.alias||(h?.[e.key]??e.name);return(0,m.tZ)(w,{align:s,children:(0,m.tZ)(n.Z,{title:i,children:(0,m.tZ)(b,{value:i,maxLength:30,expandable:!1})})},t)})),isEmpty:!d?.length,stickyHeaders:f,disablePadding:!0,children:d?.map(((e,t)=>function(e,t,s,a){return a.map(((a,r)=>{const n=y?.(a.key,s,v)??(0,l.Js)(a.key,s),o=s.units?.[a.key];return(0,m.BX)(x,{children:[C&&0===r&&(0,m.tZ)(u.Z,{count:C,index:e}),n(t,{organization:v,location:R,eventView:i,unit:o})]},`${e}-${r}:${a.name}`)}))}(t,e,j,S)))})]})}h.displayName="SimpleTableChart";const b=(0,i.Z)(o.Z,{target:"e3tr8vk3"})({name:"1bmnxg7",styles:"white-space:nowrap"}),Z=(0,i.Z)(r.Z,{target:"e3tr8vk2"})("border-radius:0;border-left:0;border-right:0;border-bottom:0;margin:0;",r.z,"{height:min-content;}"),w=(0,i.Z)("div",{target:"e3tr8vk1"})((e=>e.align?`text-align: ${e.align};`:"")," padding:",(0,d.Z)(1)," ",(0,d.Z)(3),";"),x=(0,i.Z)("div",{target:"e3tr8vk0"})("padding:",(0,d.Z)(1)," ",(0,d.Z)(3),";"),f=(0,c.Z)(h)},"./app/components/modals/widgetViewerModal/utils.tsx":(e,t,s)=>{let i;function a(e){return e.match(/\/widget\/[0-9]+\/$/)}s.d(t,{R:()=>i,X:()=>a}),function(e){e.SORT="sort",e.QUERY="query",e.LEGEND="legend",e.PAGE="page",e.CURSOR="cursor",e.WIDTH="width",e.START="viewerStart",e.END="viewerEnd"}(i||(i={}))},"./app/views/dashboardsV2/widgetCard/chart.tsx":(e,t,s)=>{s.d(t,{R:()=>E,Z:()=>O});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),n=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),o=s("../node_modules/lodash/isEqual.js"),d=s.n(o),l=s("../node_modules/lodash/omit.js"),p=s.n(l),c=s("./app/components/charts/areaChart.tsx"),u=s("./app/components/charts/barChart.tsx"),g=s("./app/components/charts/chartZoom.tsx"),m=s("./app/components/charts/errorPanel.tsx"),h=s("./app/components/charts/lineChart.tsx"),b=s("./app/components/charts/simpleTableChart.tsx"),Z=s("./app/components/charts/transitionChart.tsx"),w=s("./app/components/charts/transparentLoadingMask.tsx"),x=s("./app/components/charts/utils.tsx"),f=s("./app/components/charts/worldMapChart.tsx"),y=s("./app/components/loadingIndicator.tsx"),v=s("./app/components/placeholder.tsx"),C=s("./app/components/tooltip.tsx"),R=s("./app/icons/index.tsx"),_=s("./app/styles/space.tsx"),T=s("./app/utils/discover/charts.tsx"),j=s("./app/utils/discover/fieldRenderers.tsx"),z=s("./app/utils/discover/fields.tsx"),S=s("./app/utils/getDynamicText.tsx"),M=s("./app/views/dashboardsV2/utils.tsx"),F=s("./app/views/dashboardsV2/datasetConfig/base.tsx"),k=s("./app/views/dashboardsV2/types.tsx"),N=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const E=60;class V extends r.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{containerHeight:0})}shouldComponentUpdate(e,t){if(this.props.widget.displayType===k.FO.BIG_NUMBER&&e.widget.displayType===k.FO.BIG_NUMBER&&(this.props.windowWidth!==e.windowWidth||!d()(this.props.widget?.layout,e.widget?.layout)))return!0;const s={...p()(this.props,["windowWidth"]),widget:{...this.props.widget,title:""}};return e={...p()(e,["windowWidth"]),widget:{...e.widget,title:""}},!d()(s,e)||!d()(this.state,t)}tableResultComponent(e){let{loading:t,errorMessage:s,tableResults:i}=e;const{location:a,widget:r,organization:n,selection:o}=this.props;if(s)return(0,N.tZ)(A,{children:(0,N.tZ)(R.FC,{color:"gray500",size:"lg"})});if(void 0===i)return(0,N.tZ)(H,{});const d=(0,F.v)(r.widgetType);return i.map(((e,s)=>{const l=r.queries[s]?.fields?.map(z.hr)??[],p=r.queries[s]?.fieldAliases??[],c=(0,M.tT)(r.title,r.queries[0],o,r.displayType);return(0,N.tZ)(W,{eventView:c,fieldAliases:p,location:a,fields:l,title:i.length>1?e.title:"",loading:t,loader:(0,N.tZ)(H,{}),metadata:e.meta,data:e.data,organization:n,stickyHeaders:!0,getCustomFieldRenderer:d.getCustomFieldRenderer},`table:${e.title}`)}))}bigNumberComponent(e){let{loading:t,errorMessage:s,tableResults:i}=e;if(s)return(0,N.tZ)(A,{children:(0,N.tZ)(R.FC,{color:"gray500",size:"lg"})});if(void 0===i||t)return(0,N.tZ)($,{children:"—"});const{containerHeight:a}=this.state,{location:r,organization:n,widget:o,isMobile:d,expandNumbers:l}=this.props,p=!n.features.includes("discover-frontend-use-events-endpoint")&&o.widgetType!==k.l9.RELEASE;return i.map((e=>{const t={...e.meta},s=Object.keys(t)[0],i=!!l&&"integer"===t[s];if(i&&(t[s]="string"),!s||!e.data?.length)return(0,N.tZ)($,{children:"—"},`big_number:${e.title}`);const c=e.data[0],u=(0,j.fK)(s,t,p),g=t.units?.[s],m=u(i?{[s]:c[s].toLocaleString()}:c,{location:r,organization:n,unit:g}),h=!(o.id||o.tempId);if(!n.features.includes("dashboard-grid-layout")||h||d)return(0,N.tZ)($,{children:m},`big_number:${e.title}`);const b=l?`max(min(8vw, 90px), ${(0,_.Z)(4)})`:a-parseInt((0,_.Z)(1),10)-parseInt((0,_.Z)(3),10);return(0,N.tZ)($,{style:{fontSize:b,...l?{padding:`${(0,_.Z)(1)} ${(0,_.Z)(3)} 0 ${(0,_.Z)(3)}`}:{}},children:(0,N.tZ)(C.Z,{title:m,showOnlyOnOverflow:!0,children:m})},`big_number:${e.title}`)}))}chartComponent(e){const{widget:t}=this.props,s=t.queries[0]?.columns.length>0;switch(t.displayType){case"bar":return(0,N.tZ)(u.v,{...e,stacked:s});case"area":case"top_n":return(0,N.tZ)(c.T,{stacked:!0,...e});case"world_map":return(0,N.tZ)(f.y,{...e});default:return(0,N.tZ)(h.w,{...e})}}render(){const{theme:e,tableResults:t,timeseriesResults:s,errorMessage:i,loading:a,widget:r,organization:n,onZoom:o,legendOptions:d,expandNumbers:l,showSlider:p,noPadding:c,chartZoomOptions:u,timeseriesResultsTypes:m}=this.props;if("table"===r.displayType)return(0,S.Z)({value:(0,N.BX)(Z.Z,{loading:a,reloading:a,children:[(0,N.tZ)(L,{loading:a}),this.tableResultComponent({tableResults:t,loading:a,errorMessage:i})]}),fixed:(0,N.tZ)(v.Z,{height:"200px",testId:"skeleton-ui"})});if("big_number"===r.displayType)return(0,N.BX)(Z.Z,{loading:a,reloading:a,children:[(0,N.tZ)(L,{loading:a}),(0,N.tZ)(P,{ref:e=>{if(null!==e&&!l){const{height:t}=e.getBoundingClientRect();t!==this.state.containerHeight&&this.setState({containerHeight:t})}},children:this.bigNumberComponent({tableResults:t,loading:a,errorMessage:i})})]});if(i)return(0,N.tZ)(A,{children:(0,N.tZ)(R.FC,{color:"gray500",size:"lg"})});const{location:h,router:b,selection:w,onLegendSelectChanged:f}=this.props,{start:y,end:C,period:_,utc:j}=w.datetime,M=Boolean(n.features.includes("dashboard-grid-layout")&&(r.id||r.tempId));if("world_map"===r.displayType){const{data:e,title:s}=(0,x.JT)(t),i=[{seriesName:s,data:e}];return(0,N.BX)(Z.Z,{loading:a,reloading:a,children:[(0,N.tZ)(L,{loading:a}),(0,N.tZ)(B,{autoHeightResize:M,children:(0,S.Z)({value:this.chartComponent({series:i,autoHeightResize:M}),fixed:(0,N.tZ)(v.Z,{height:"200px",testId:"skeleton-ui"})})})]})}const F={left:0,top:0,selected:(0,x.RI)(h),formatter:e=>{const t=(0,z.hW)(e);if(null!==t){const s=(0,z.b8)(t);null!==s&&(e=s.toUpperCase())}return(0,z.by)(e)&&(e=(0,z.bQ)(e)),e},...d},k=r.queries[0]?.aggregates?.[0]??"count()",V=(0,z.GO)(k)?(0,z.vp)(k):k,O={autoHeightResize:M,grid:{left:0,right:4,top:"40px",bottom:p?E:0},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>{const s=t.split(":").pop()?.trim();return s?m?(0,T.CX)(e,m[s]):(0,T.CX)(e,(0,z.Px)(s)):(0,T.CX)(e,"number")}},yAxis:{axisLabel:{color:e.chartLabel,formatter:e=>{if(m){const t=1===new Set(Object.values(m)).size?m[V]:"number";return(0,T.x1)(e,t)}return(0,T.gu)(e,(0,z.Px)(V))}}}};return(0,N.tZ)(g.Z,{router:b,period:_,start:y,end:C,utc:j,showSlider:p,chartZoomOptions:u,children:t=>{if(i)return(0,N.tZ)(A,{children:(0,N.tZ)(R.FC,{color:"gray500",size:"lg"})});const r=new RegExp("(?:.* : Other$)|^Other$"),n=s?.some((e=>{let{seriesName:t}=e;return t&&t.match(r)})),d=s?e.charts.getColorPalette(s.length-(n?3:2)):[];n&&(d[d.length]=e.chartOther);const l=s?s.map(((e,t)=>{let s="";return void 0!==e.seriesName&&(s=(0,z.GO)(e.seriesName)?(0,z.vp)(e.seriesName):e.seriesName),{...e,seriesName:s,color:d[t]}})):[],p=l[0]?.data[0]?.name,u=l[0]?.data[l[0].data.length-1]?.name;return(0,N.BX)(Z.Z,{loading:a,reloading:a,children:[(0,N.tZ)(L,{loading:a}),(0,N.tZ)(B,{autoHeightResize:M,noPadding:c,children:(0,S.Z)({value:this.chartComponent({...t,...O,...o?{onDataZoom:(e,t)=>o({...e,seriesStart:p,seriesEnd:u},t)}:{},legend:F,series:l,onLegendSelectChanged:f}),fixed:(0,N.tZ)(v.Z,{height:"200px",testId:"skeleton-ui"})})})]})}})}}V.displayName="WidgetCardChart";const O=(0,n.b)(V),I=(0,a.Z)((e=>(0,N.tZ)(w.Z,{...e,maskBackgroundColor:"transparent"})),{target:"eb7j3e6"})({name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"}),L=e=>{let{loading:t}=e;return t?(0,N.tZ)(I,{visible:t,children:(0,N.tZ)(y.Z,{mini:!0})}):null};L.displayName="LoadingScreen";const H=(0,a.Z)((e=>{let{className:t}=e;return(0,N.tZ)(v.Z,{height:"200px",className:t})}),{target:"eb7j3e5"})("background-color:",(e=>e.theme.surface200),";"),P=(0,a.Z)("div",{target:"eb7j3e4"})({name:"af8mp8",styles:"height:100%;width:100%;overflow:hidden"}),$=(0,a.Z)("div",{target:"eb7j3e3"})("line-height:1;display:inline-flex;flex:1;width:100%;min-height:0;font-size:32px;color:",(e=>e.theme.headingColor),";padding:",(0,_.Z)(1)," ",(0,_.Z)(3)," ",(0,_.Z)(3)," ",(0,_.Z)(3),";*{text-align:left!important;}"),B=(0,a.Z)("div",{target:"eb7j3e2"})((e=>e.autoHeightResize&&"height: 100%;")," padding:",(e=>e.noPadding?"0":`0 ${(0,_.Z)(3)} ${(0,_.Z)(3)}`),";"),W=(0,a.Z)(b.Z,{target:"eb7j3e1"})("margin-top:",(0,_.Z)(1.5),";border-bottom-left-radius:",(e=>e.theme.borderRadius),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";font-size:",(e=>e.theme.fontSizeMedium),";box-shadow:none;"),A=(0,a.Z)(m.Z,{target:"eb7j3e0"})("padding:",(0,_.Z)(2),";")},"./app/views/dashboardsV2/widgetCard/issueWidgetQueries.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var i=s("../node_modules/react/index.js"),a=s("./app/stores/memberListStore.tsx"),r=s("./app/utils/getDynamicText.tsx"),n=s("./app/views/dashboardsV2/datasetConfig/issues.tsx"),o=s("./app/views/dashboardsV2/widgetCard/genericWidgetQueries.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){let{children:t,api:s,organization:l,selection:p,widget:c,cursor:u,limit:g,dashboardFilters:m,onDataFetched:h}=e;const[b,Z]=(0,i.useState)(!1);(0,i.useEffect)((()=>{Z(a.Z.isLoaded());const e=a.Z.listen((()=>{Z(a.Z.isLoaded())}),void 0);return()=>e()}),[]);const w=n.f;return(0,r.Z)({value:(0,d.tZ)(o.Z,{config:w,api:s,organization:l,selection:p,widget:c,cursor:u,limit:g,dashboardFilters:m,onDataFetched:h,afterFetchTableData:(e,t)=>({totalIssuesCount:t?.getResponseHeader("X-Hits")??void 0}),children:e=>{let{loading:s,...i}=e;return t({loading:s||!b,...i})}}),fixed:(0,d.tZ)("div",{})})}},"./app/views/dashboardsV2/widgetCard/widgetCardChartContainer.tsx":(e,t,s)=>{s.d(t,{b:()=>T,Z:()=>j});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),n=s("./app/components/charts/transparentLoadingMask.tsx"),o=s("./app/components/loadingIndicator.tsx"),d=s("./app/views/dashboardsV2/types.tsx"),l=s("./app/views/dashboardsV2/widgetCard/chart.tsx"),p=s("./app/components/charts/errorPanel.tsx"),c=s("./app/components/charts/simpleTableChart.tsx"),u=s("./app/components/placeholder.tsx"),g=s("./app/icons/index.tsx"),m=s("./app/styles/space.tsx"),h=s("./app/utils.tsx"),b=s("./app/views/dashboardsV2/utils.tsx"),Z=s("./app/views/dashboardsV2/datasetConfig/base.tsx"),w=s("./app/views/dashboardsV2/widgetBuilder/issueWidget/fields.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){let{organization:t,selection:s,widget:i,errorMessage:a,loading:r,transformedResults:n,location:o}=e;const l=(0,Z.v)(d.l9.ISSUE);if(a)return(0,x.tZ)(p.Z,{children:(0,x.tZ)(g.FC,{color:"gray500",size:"lg"})});if(r)return(0,x.tZ)(y,{height:"200px"});const c=i.queries[0],u=(0,h.ri)(c.fields)?c.fields:[...c.columns,...c.aggregates],m=c.fieldAliases??[],f=(0,b.tT)(i.title,i.queries[0],s,i.displayType);return(0,x.tZ)(v,{location:o,title:"",eventView:f,fields:u,fieldAliases:m,loading:r,metadata:w.$L,data:n,organization:t,getCustomFieldRenderer:l.getCustomFieldRenderer,fieldHeaderMap:l.fieldHeaderMap,stickyHeaders:!0})}f.displayName="IssueWidgetCard";const y=(0,i.Z)(u.Z,{target:"e11eoa721"})("background-color:",(e=>e.theme.surface200),";"),v=(0,i.Z)(c.Z,{target:"e11eoa720"})("margin-top:",(0,m.Z)(1.5),";border-bottom-left-radius:",(e=>e.theme.borderRadius),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";font-size:",(e=>e.theme.fontSizeMedium),";box-shadow:none;");var C=s("./app/views/dashboardsV2/widgetCard/issueWidgetQueries.tsx"),R=s("./app/views/dashboardsV2/widgetCard/releaseWidgetQueries.tsx"),_=s("./app/views/dashboardsV2/widgetCard/widgetQueries.tsx");function T(e){let{location:t,router:s,api:i,organization:r,selection:n,widget:o,dashboardFilters:p,isMobile:c,renderErrorMessage:u,tableItemLimit:g,windowWidth:m,onZoom:h,onLegendSelectChanged:b,legendOptions:Z,expandNumbers:w,onDataFetched:y,showSlider:v,noPadding:T,chartZoomOptions:j}=e;return o.widgetType===d.l9.ISSUE?(0,x.tZ)(C.Z,{api:i,organization:r,widget:o,selection:n,limit:g,onDataFetched:y,dashboardFilters:p,children:e=>{let{tableResults:s,errorMessage:i,loading:d}=e;return(0,x.BX)(a.Fragment,{children:["function"==typeof u?u(i):null,(0,x.tZ)(S,{loading:d}),(0,x.tZ)(f,{transformedResults:s?.[0].data??[],loading:d,errorMessage:i,widget:o,organization:r,location:t,selection:n})]})}}):o.widgetType===d.l9.RELEASE?(0,x.tZ)(R.ZP,{api:i,organization:r,widget:o,selection:n,limit:o.limit??g,onDataFetched:y,dashboardFilters:p,children:e=>{let{tableResults:i,timeseriesResults:d,errorMessage:p,loading:g}=e;return(0,x.BX)(a.Fragment,{children:["function"==typeof u?u(p):null,(0,x.tZ)(l.Z,{timeseriesResults:d,tableResults:i,errorMessage:p,loading:g,location:t,widget:o,selection:n,router:s,organization:r,isMobile:c,windowWidth:m,expandNumbers:w,onZoom:h,showSlider:v,noPadding:T,chartZoomOptions:j})]})}}):(0,x.tZ)(_.ZP,{api:i,organization:r,widget:o,selection:n,limit:g,onDataFetched:y,dashboardFilters:p,children:e=>{let{tableResults:i,timeseriesResults:d,errorMessage:p,loading:g,timeseriesResultsTypes:f}=e;return(0,x.BX)(a.Fragment,{children:["function"==typeof u?u(p):null,(0,x.tZ)(l.Z,{timeseriesResults:d,tableResults:i,errorMessage:p,loading:g,location:t,widget:o,selection:n,router:s,organization:r,isMobile:c,windowWidth:m,onZoom:h,onLegendSelectChanged:b,legendOptions:Z,expandNumbers:w,showSlider:v,noPadding:T,chartZoomOptions:j,timeseriesResultsTypes:f})]})}})}T.displayName="WidgetCardChartContainer";const j=(0,r.withRouter)(T),z=(0,i.Z)((e=>(0,x.tZ)(n.Z,{...e,maskBackgroundColor:"transparent"})),{target:"e14ay5ol0"})({name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"}),S=e=>{let{loading:t}=e;return t?(0,x.tZ)(z,{visible:t,children:(0,x.tZ)(o.Z,{mini:!0})}):null};S.displayName="LoadingScreen"},"./app/views/performance/traceDetails/utils.tsx":(e,t,s)=>{s.d(t,{Rg:()=>n,YA:()=>r,uM:()=>o});var i=s("./app/constants/pageFilters.tsx"),a=s("./app/utils/performance/quickTrace/utils.tsx");function r(e,t,s,a){const{start:r,end:n,statsPeriod:o}=s;return{pathname:`/organizations/${e.slug}/performance/trace/${t}/`,query:{...a,statsPeriod:o,[i.V.PAGE_START]:r,[i.V.PAGE_END]:n}}}function n(e){const t={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return e.reduce(((e,t)=>(0,a.S2)(t,((e,t)=>{for(const s of t.errors??[])e.errors.add(s.event_id);return e.transactions.add(t.event_id),e.projects.add(t.project_slug),e.startTimestamp=Math.min(e.startTimestamp,t.start_timestamp),e.endTimestamp=Math.max(e.endTimestamp,t.timestamp),e.maxGeneration=Math.max(e.maxGeneration,t.generation),e}),e)),t)}function o(e){return null===e.parent_span_id}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetViewerModal_utils_tsx-app_views_dashboardsV2_widgetCard_widgetCar-9bf793.ea5ccdbb3a3ff7a9b9a0e2f36449a565.js.map