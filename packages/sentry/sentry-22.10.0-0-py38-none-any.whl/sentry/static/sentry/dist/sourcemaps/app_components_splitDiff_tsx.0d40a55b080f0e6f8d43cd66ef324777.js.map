{"version":3,"file":"chunks/app_components_splitDiff_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"sZAGA,MAAMA,EAAY,CAChBC,MAAOC,EAAAA,GACPC,MAAOC,EAAAA,GACPC,MAAOC,EAAAA,IAUHC,EAAY,IAAsD,IAArD,UAACC,EAAD,KAAYC,EAAO,QAAnB,KAA4BC,EAA5B,OAAkCC,GAAmB,EACtE,MAAMC,EAASZ,EAAUS,GAEnBI,EAAYH,EAAKI,MAAM,MACvBC,EAAcJ,EAAOG,MAAM,OAC1BE,GACLH,EAAUI,OAASF,EAAYE,OAC3B,CAACJ,EAAWE,GACZ,CAACA,EAAaF,GACdK,EAAUF,EAAYG,KAAI,CAACC,EAAOC,IACtCT,EAAOC,EAAUQ,IAAU,GAAIN,EAAYM,IAAU,GAAI,CAACC,gBAAgB,MAG5E,OACE,QAACC,EAAD,CAAYf,UAAWA,EAAW,eAAa,aAA/C,UACE,QAACgB,EAAD,UACGN,EAAQC,KAAI,CAACM,EAAMC,KAClB,MAAMC,EAAiBF,EAAKG,MAAKC,GAAUA,EAAOC,QAC5CC,EAAmBN,EAAKG,MAAKC,GAAUA,EAAOG,UAEpD,OACE,yBACE,QAACC,EAAD,CAAMC,UAAWH,EAAjB,UACE,QAACI,EAAD,UACGV,EACEW,QAAOP,IAAWA,EAAOC,QACzBX,KAAI,CAACU,EAAQQ,KACZ,QAACC,EAAD,CAAcJ,UAAWL,EAAOG,QAAhC,SACGH,EAAOU,OADCF,UAOnB,QAACG,EAAD,KAEA,QAACP,EAAD,CAAMQ,QAASd,EAAf,UACE,QAACQ,EAAD,UACGV,EACEW,QAAOP,IAAWA,EAAOG,UACzBb,KAAI,CAACU,EAAQQ,KACZ,QAACC,EAAD,CAAcG,QAASZ,EAAOC,MAA9B,SACGD,EAAOU,OADCF,WApBZX,EADX,OAPR,EAbInB,EAAAA,YAAAA,YAuDN,MAAMgB,GAAa,OAAO,QAAP,sBAAH,kFAMVC,GAAY,OAAO,QAAP,sBAAH,gBACEkB,GAAKA,EAAEC,MAAMC,KAAKC,YADpB,eAEAH,GAAKA,EAAEC,MAAMG,eAFb,KAKTb,GAAO,OAAO,KAAP,sBAAH,uBAENS,GAAKA,EAAER,WAAc,qBAAoBQ,EAAEC,MAAMI,KAAKC,cAFhD,KAGNN,GAAKA,EAAED,SAAY,qBAAoBC,EAAEC,MAAMI,KAAKE,YAH9C,KAMJT,GAAM,OAAO,KAAP,sBAAH,sCAIHL,GAAO,OAAO,MAAP,sBAAH,sDAKJG,GAAO,OAAO,OAAP,sBAAH,8CAGNI,GAAKA,EAAER,WAAc,qBAAoBQ,EAAEC,MAAMI,KAAKf,WAHhD,KAINU,GAAKA,EAAED,SAAY,qBAAoBC,EAAEC,MAAMI,KAAKjB,SAJ9C,KAOV,G","sources":["webpack:///./app/components/splitDiff.tsx"],"sourcesContent":["import styled from '@emotion/styled';\nimport {Change, diffChars, diffLines, diffWords} from 'diff';\n\nconst diffFnMap = {\n  chars: diffChars,\n  words: diffWords,\n  lines: diffLines,\n} as const;\n\ntype Props = {\n  base: string;\n  target: string;\n  className?: string;\n  type?: keyof typeof diffFnMap;\n};\n\nconst SplitDiff = ({className, type = 'lines', base, target}: Props) => {\n  const diffFn = diffFnMap[type];\n\n  const baseLines = base.split('\\n');\n  const targetLines = target.split('\\n');\n  const [largerArray] =\n    baseLines.length > targetLines.length\n      ? [baseLines, targetLines]\n      : [targetLines, baseLines];\n  const results = largerArray.map((_line, index) =>\n    diffFn(baseLines[index] || '', targetLines[index] || '', {newlineIsToken: true})\n  );\n\n  return (\n    <SplitTable className={className} data-test-id=\"split-diff\">\n      <SplitBody>\n        {results.map((line, j) => {\n          const highlightAdded = line.find(result => result.added);\n          const highlightRemoved = line.find(result => result.removed);\n\n          return (\n            <tr key={j}>\n              <Cell isRemoved={highlightRemoved}>\n                <Line>\n                  {line\n                    .filter(result => !result.added)\n                    .map((result, i) => (\n                      <Word key={i} isRemoved={result.removed}>\n                        {result.value}\n                      </Word>\n                    ))}\n                </Line>\n              </Cell>\n\n              <Gap />\n\n              <Cell isAdded={highlightAdded}>\n                <Line>\n                  {line\n                    .filter(result => !result.removed)\n                    .map((result, i) => (\n                      <Word key={i} isAdded={result.added}>\n                        {result.value}\n                      </Word>\n                    ))}\n                </Line>\n              </Cell>\n            </tr>\n          );\n        })}\n      </SplitBody>\n    </SplitTable>\n  );\n};\n\nconst SplitTable = styled('table')`\n  table-layout: fixed;\n  border-collapse: collapse;\n  width: 100%;\n`;\n\nconst SplitBody = styled('tbody')`\n  font-family: ${p => p.theme.text.familyMono};\n  font-size: ${p => p.theme.fontSizeSmall};\n`;\n\nconst Cell = styled('td')<{isAdded?: Change; isRemoved?: Change}>`\n  vertical-align: top;\n  ${p => p.isRemoved && `background-color: ${p.theme.diff.removedRow}`};\n  ${p => p.isAdded && `background-color: ${p.theme.diff.addedRow}`};\n`;\n\nconst Gap = styled('td')`\n  width: 20px;\n`;\n\nconst Line = styled('div')`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Word = styled('span')<{isAdded?: boolean; isRemoved?: boolean}>`\n  white-space: pre-wrap;\n  word-break: break-all;\n  ${p => p.isRemoved && `background-color: ${p.theme.diff.removed}`};\n  ${p => p.isAdded && `background-color: ${p.theme.diff.added}`};\n`;\n\nexport default SplitDiff;\n"],"names":["diffFnMap","chars","diffChars","words","diffWords","lines","diffLines","SplitDiff","className","type","base","target","diffFn","baseLines","split","targetLines","largerArray","length","results","map","_line","index","newlineIsToken","SplitTable","SplitBody","line","j","highlightAdded","find","result","added","highlightRemoved","removed","Cell","isRemoved","Line","filter","i","Word","value","Gap","isAdded","p","theme","text","familyMono","fontSizeSmall","diff","removedRow","addedRow"],"sourceRoot":""}