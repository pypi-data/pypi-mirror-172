{"version":3,"file":"chunks/app_components_platformPicker_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/links/listLink.tsx","webpack:///./app/components/platformPicker.tsx"],"sourcesContent":["// eslint-disable-next-line no-restricted-imports\nimport {Link as RouterLink, withRouter, WithRouterProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport classNames from 'classnames';\nimport {LocationDescriptor} from 'history';\nimport * as qs from 'query-string';\n\ntype LinkProps = Omit<React.ComponentProps<typeof RouterLink>, 'to'>;\n\ntype Props = WithRouterProps &\n  LinkProps & {\n    /**\n     * Link target. We don't want to expose the ToLocationFunction on this component.\n     */\n    to: LocationDescriptor;\n    /**\n     * The class to apply when the link is 'active'\n     */\n    activeClassName?: string;\n    disabled?: boolean;\n    index?: boolean;\n    /**\n     * Should be should be supplied by the parent component\n     */\n    isActive?: (location: LocationDescriptor, indexOnly?: boolean) => boolean;\n    query?: string;\n  };\n\nfunction ListLink({\n  children,\n  className,\n  isActive,\n  query,\n  router,\n  to,\n  activeClassName = 'active',\n  index = false,\n  disabled = false,\n  ...props\n}: Props) {\n  const queryData = query ? qs.parse(query) : undefined;\n  const target: LocationDescriptor =\n    typeof to === 'string' ? {pathname: to, query: queryData} : to;\n\n  const active = isActive?.(target, index) ?? router.isActive(target, index);\n\n  return (\n    <StyledLi\n      className={classNames({[activeClassName]: active}, className)}\n      disabled={disabled}\n    >\n      <RouterLink {...props} onlyActiveOnIndex={index} to={disabled ? '' : to}>\n        {children}\n      </RouterLink>\n    </StyledLi>\n  );\n}\n\nexport default withRouter(ListLink);\n\nconst StyledLi = styled('li', {\n  shouldForwardProp: prop => prop !== 'disabled',\n})<{disabled?: boolean}>`\n  ${p =>\n    p.disabled &&\n    `\n   a {\n    color:${p.theme.disabled} !important;\n    pointer-events: none;\n    :hover {\n      color: ${p.theme.disabled}  !important;\n    }\n   }\n`}\n`;\n","import {Component, Fragment} from 'react';\nimport styled from '@emotion/styled';\nimport debounce from 'lodash/debounce';\nimport {PlatformIcon} from 'platformicons';\n\nimport Button from 'sentry/components/button';\nimport EmptyMessage from 'sentry/components/emptyMessage';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport ListLink from 'sentry/components/links/listLink';\nimport NavTabs from 'sentry/components/navTabs';\nimport SearchBar from 'sentry/components/searchBar';\nimport {DEFAULT_DEBOUNCE_DURATION} from 'sentry/constants';\nimport categoryList, {filterAliases, PlatformKey} from 'sentry/data/platformCategories';\nimport platforms from 'sentry/data/platforms';\nimport {IconClose, IconProject} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, PlatformIntegration} from 'sentry/types';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\n\nconst PLATFORM_CATEGORIES = [...categoryList, {id: 'all', name: t('All')}] as const;\n\nconst PlatformList = styled('div')`\n  display: grid;\n  gap: ${space(1)};\n  grid-template-columns: repeat(auto-fill, 112px);\n  margin-bottom: ${space(2)};\n`;\n\ntype Category = typeof PLATFORM_CATEGORIES[number]['id'];\n\ninterface PlatformPickerProps {\n  setPlatform: (key: PlatformKey | null) => void;\n  defaultCategory?: Category;\n  listClassName?: string;\n  listProps?: React.HTMLAttributes<HTMLDivElement>;\n  noAutoFilter?: boolean;\n  organization?: Organization;\n  platform?: string | null;\n  showOther?: boolean;\n  source?: string;\n}\n\ntype State = {\n  category: Category;\n  filter: string;\n};\n\nclass PlatformPicker extends Component<PlatformPickerProps, State> {\n  static defaultProps = {\n    showOther: true,\n  };\n\n  state: State = {\n    category: this.props.defaultCategory ?? PLATFORM_CATEGORIES[0].id,\n    filter: this.props.noAutoFilter ? '' : (this.props.platform || '').split('-')[0],\n  };\n\n  get platformList() {\n    const {category} = this.state;\n    const currentCategory = categoryList.find(({id}) => id === category);\n\n    const filter = this.state.filter.toLowerCase();\n\n    const subsetMatch = (platform: PlatformIntegration) =>\n      platform.id.includes(filter) ||\n      platform.name.toLowerCase().includes(filter) ||\n      filterAliases[platform.id as PlatformKey]?.some(alias => alias.includes(filter));\n\n    const categoryMatch = (platform: PlatformIntegration) =>\n      category === 'all' ||\n      (currentCategory?.platforms as undefined | string[])?.includes(platform.id);\n\n    const filtered = platforms\n      .filter(this.state.filter ? subsetMatch : categoryMatch)\n      .sort((a, b) => a.id.localeCompare(b.id));\n\n    return this.props.showOther ? filtered : filtered.filter(({id}) => id !== 'other');\n  }\n\n  logSearch = debounce(() => {\n    if (this.state.filter) {\n      trackAdvancedAnalyticsEvent('growth.platformpicker_search', {\n        search: this.state.filter.toLowerCase(),\n        num_results: this.platformList.length,\n        source: this.props.source,\n        organization: this.props.organization ?? null,\n      });\n    }\n  }, DEFAULT_DEBOUNCE_DURATION);\n\n  render() {\n    const platformList = this.platformList;\n    const {setPlatform, listProps, listClassName} = this.props;\n    const {filter, category} = this.state;\n\n    return (\n      <Fragment>\n        <NavContainer>\n          <CategoryNav>\n            {PLATFORM_CATEGORIES.map(({id, name}) => (\n              <ListLink\n                key={id}\n                onClick={(e: React.MouseEvent) => {\n                  trackAdvancedAnalyticsEvent('growth.platformpicker_category', {\n                    category: id,\n                    source: this.props.source,\n                    organization: this.props.organization ?? null,\n                  });\n                  this.setState({category: id, filter: ''});\n                  e.preventDefault();\n                }}\n                to=\"\"\n                isActive={() => id === (filter ? 'all' : category)}\n              >\n                {name}\n              </ListLink>\n            ))}\n          </CategoryNav>\n          <StyledSearchBar\n            size=\"sm\"\n            query={filter}\n            placeholder={t('Filter Platforms')}\n            onChange={val => this.setState({filter: val}, this.logSearch)}\n          />\n        </NavContainer>\n        <PlatformList className={listClassName} {...listProps}>\n          {platformList.map(platform => (\n            <PlatformCard\n              data-test-id={`platform-${platform.id}`}\n              key={platform.id}\n              platform={platform}\n              selected={this.props.platform === platform.id}\n              onClear={(e: React.MouseEvent) => {\n                setPlatform(null);\n                e.stopPropagation();\n              }}\n              onClick={() => {\n                trackAdvancedAnalyticsEvent('growth.select_platform', {\n                  platform_id: platform.id,\n                  source: this.props.source,\n                  organization: this.props.organization ?? null,\n                });\n                setPlatform(platform.id as PlatformKey);\n              }}\n            />\n          ))}\n        </PlatformList>\n        {platformList.length === 0 && (\n          <EmptyMessage\n            icon={<IconProject size=\"xl\" />}\n            title={t(\"We don't have an SDK for that yet!\")}\n          >\n            {tct(\n              `Not finding your platform? You can still create your project,\n              but looks like we don't have an official SDK for your platform\n              yet. However, there's a rich ecosystem of community supported\n              SDKs (including Perl, CFML, Clojure, and ActionScript). Try\n              [search:searching for Sentry clients] or contacting support.`,\n              {\n                search: (\n                  <ExternalLink href=\"https://github.com/search?q=-org%3Agetsentry+topic%3Asentry&type=Repositories\" />\n                ),\n              }\n            )}\n          </EmptyMessage>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nconst NavContainer = styled('div')`\n  margin-bottom: ${space(2)};\n  display: grid;\n  gap: ${space(2)};\n  grid-template-columns: 1fr minmax(0, 300px);\n  align-items: start;\n  border-bottom: 1px solid ${p => p.theme.border};\n`;\n\nconst StyledSearchBar = styled(SearchBar)`\n  min-width: 6rem;\n  max-width: 12rem;\n  margin-top: -${space(0.25)};\n  margin-left: auto;\n  flex-shrink: 0;\n  flex-basis: 0;\n  flex-grow: 1;\n`;\n\nconst CategoryNav = styled(NavTabs)`\n  margin: 0;\n  margin-top: 4px;\n  white-space: nowrap;\n\n  > li {\n    float: none;\n    display: inline-block;\n  }\n`;\n\nconst StyledPlatformIcon = styled(PlatformIcon)`\n  margin: ${space(2)};\n`;\n\nconst ClearButton = styled(Button)`\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  min-height: 0;\n  height: 22px;\n  width: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background: ${p => p.theme.background};\n  color: ${p => p.theme.textColor};\n`;\n\nClearButton.defaultProps = {\n  icon: <IconClose isCircled size=\"xs\" />,\n  borderless: true,\n  size: 'xs',\n};\n\nconst PlatformCard = styled(({platform, selected, onClear, ...props}) => (\n  <div {...props}>\n    <StyledPlatformIcon\n      platform={platform.id}\n      size={56}\n      radius={5}\n      withLanguageIcon\n      format=\"lg\"\n    />\n\n    <h3>{platform.name}</h3>\n    {selected && <ClearButton onClick={onClear} aria-label={t('Clear')} />}\n  </div>\n))`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 0 14px;\n  border-radius: 4px;\n  cursor: pointer;\n  background: ${p => p.selected && p.theme.alert.info.backgroundLight};\n\n  &:hover {\n    background: ${p => p.theme.alert.muted.backgroundLight};\n  }\n\n  h3 {\n    flex-grow: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    color: ${p => (p.selected ? p.theme.textColor : p.theme.subText)};\n    text-align: center;\n    font-size: ${p => p.theme.fontSizeExtraSmall};\n    text-transform: uppercase;\n    margin: 0;\n    padding: 0 ${space(0.5)};\n    line-height: 1.2;\n  }\n`;\n\nexport default PlatformPicker;\n"],"names":["ListLink","children","className","isActive","query","router","to","activeClassName","index","disabled","props","queryData","qs","undefined","target","pathname","active","StyledLi","classNames","onlyActiveOnIndex","withRouter","shouldForwardProp","prop","p","theme","PLATFORM_CATEGORIES","categoryList","id","name","t","PlatformList","space","PlatformPicker","Component","category","this","defaultCategory","filter","noAutoFilter","platform","split","debounce","state","trackAdvancedAnalyticsEvent","search","toLowerCase","num_results","platformList","length","source","organization","DEFAULT_DEBOUNCE_DURATION","currentCategory","filtered","platforms","includes","filterAliases","some","alias","sort","a","b","localeCompare","showOther","render","setPlatform","listProps","listClassName","Fragment","NavContainer","CategoryNav","map","onClick","e","setState","preventDefault","StyledSearchBar","size","placeholder","onChange","val","logSearch","PlatformCard","selected","onClear","stopPropagation","platform_id","icon","title","tct","href","border","SearchBar","NavTabs","StyledPlatformIcon","PlatformIcon","ClearButton","Button","background","textColor","defaultProps","isCircled","borderless","radius","withLanguageIcon","format","alert","info","backgroundLight","muted","subText","fontSizeExtraSmall"],"sourceRoot":""}