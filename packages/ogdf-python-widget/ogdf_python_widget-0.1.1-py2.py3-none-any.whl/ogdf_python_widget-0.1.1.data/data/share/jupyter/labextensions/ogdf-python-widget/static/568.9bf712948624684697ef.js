(self.webpackChunkogdf_python_widget=self.webpackChunkogdf_python_widget||[]).push([[568],{495:(t,e,n)=>{"use strict";n.r(e),n.d(e,{constructClusters:()=>o,constructForceLink:()=>l,constructLink:()=>s,constructNode:()=>r,constructVirtualLink:()=>d});let i=n(226);function r(t,e,n,i,r){let s=e.data([t]).enter().append((function(t){return 0===t.shape?document.createElementNS("http://www.w3.org/2000/svg","rect"):document.createElementNS("http://www.w3.org/2000/svg","circle")})).attr("class","node").attr("width",(function(t){return t.nodeWidth})).attr("height",(function(t){return t.nodeHeight})).attr("x",(function(t){return t.x-t.nodeWidth/2})).attr("y",(function(t){return t.y-t.nodeHeight/2})).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("id",(function(t){return t.id})).attr("r",(function(t){return t.nodeHeight/2})).attr("fill",(function(t){return i.getColorStringFromJson(t.fillColor)})).attr("stroke",(function(t){return i.getColorStringFromJson(t.strokeColor)})).attr("stroke-width",(function(t){return t.strokeWidth})).on("click",(function(t,e){r||i.isNodeMovementEnabled||i.send({code:"nodeClicked",id:e.id,altKey:t.altKey,ctrlKey:t.ctrlKey})})),o=n.data([t]).enter().append("text").attr("class","nodeLabel").attr("text-anchor","middle").attr("dominant-baseline","central").attr("fill","black").attr("stroke-width",1).attr("stroke","white").attr("paint-order","stroke").attr("id",(function(t){return t.id})).text((function(t){return t.name})).style("font-size","1em").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).on("click",(function(t,e){r||i.isNodeMovementEnabled||i.send({code:"nodeClicked",id:e.id,altKey:t.altKey,ctrlKey:t.ctrlKey})}));i.isNodeMovementEnabled&&(s.call(i.node_drag_handler),o.call(i.node_drag_handler))}function s(t,e,n,i,r,s,o){e.data([t]).enter().append("path").attr("class","line").attr("id",(function(t){return t.id})).attr("marker-end",(function(t){return t.arrow&&0===t.t_shape&&t.source!==t.target?"url(#endSquare)":t.arrow&&0!==t.t_shape&&t.source!==t.target?"url(#endCircle)":null})).attr("d",(function(t){return r.getPathForLine(t.sx,t.sy,t.bends,t.tx,t.ty,t.t_shape,t.source,t.target,t)})).attr("stroke",(function(t){return r.getColorStringFromJson(t.strokeColor)})).attr("stroke-width",(function(t){return t.strokeWidth})).attr("fill","none"),n.data([t]).enter().append("text").attr("class","linkLabel").attr("text-anchor","middle").attr("dominant-baseline","central").attr("fill","black").attr("stroke-width",1).attr("stroke","white").attr("paint-order","stroke").attr("id",(function(t){return t.id})).text((function(t){return t.label})).style("font-size","0.5em").attr("transform",(function(t){return"translate("+t.label_x+","+t.label_y+")"})),o||i.data([t]).enter().append("path").attr("class","line").attr("id",(function(t){return t.id})).attr("d",(function(t){return r.getPathForLine(t.sx,t.sy,t.bends,t.tx,t.ty,t.t_shape,t.source,t.target,t)})).attr("stroke","transparent").attr("stroke-width",(function(t){return Math.max(t.strokeWidth,s)})).attr("fill","none").on("click",(function(t,e){r.send({code:"linkClicked",id:e.id,altKey:t.altKey,ctrlKey:t.ctrlKey})}))}function o(t,e,n=!0){let r=e.clusters[t];for(let t=0;t<r.children.length;t++)o(r.children[t],e,n);n&&e.recalculateClusterBoundingBox(r),e.calculateClusterSize(r),i.select(e.svg).selectAll(".cluster").filter((function(t){return t.id===r.id})).empty()?e.constructCluster(r,e.cluster_holder,e):e.updateCluster(r,!1)}function l(t,e,n,i){e.data([t]).enter().append("path").attr("class","line").attr("id",(function(t){return t.id})).attr("marker-end",(function(t){return t.arrow&&0===t.t_shape&&t.target!==t.source?"url(#endSquare)":t.arrow&&0!==t.t_shape&&t.target!==t.source?"url(#endCircle)":null})).attr("d",(function(t){return n.getPathForLine(t.sx,t.sy,t.bends,t.tx,t.ty,t.t_shape,t.source,t.target,t)})).attr("stroke",(function(t){return n.getColorStringFromJson(t.strokeColor)})).attr("stroke-width",(function(t){return t.strokeWidth})).attr("fill","none").on("click",(function(t,e){i||n.send({code:"linkClicked",id:e.id,altKey:t.altKey,ctrlKey:t.ctrlKey})}))}function d(t,e,n){e.data([t]).enter().append("line").style("stroke-dasharray","3, 3").attr("x1",(function(t){let e=n.links[t.sourceId];return void 0===e.curveX?(e.sx+e.tx)/2:e.curveX})).attr("y1",(function(t){let e=n.links[t.sourceId];return void 0===e.curveY?(e.sy+e.ty)/2:e.curveY})).attr("x2",(function(t){let e=n.links[t.targetId];return void 0===e.curveX?(e.sx+e.tx)/2:e.curveX})).attr("y2",(function(t){let e=n.links[t.targetId];return void 0===e.curveY?(e.sy+e.ty)/2:e.curveY})).attr("stroke","gray").attr("stroke-width",1).attr("fill","none").attr("class","virtualLink")}},568:(t,e,n)=>{t.exports=n(374),t.exports.version=n(147).version},374:(t,e,n)=>{let r=n(337),s=n(431),o=n(226),l=n(495);n(840);let d=r.DOMWidgetModel.extend({defaults:s.extend(r.DOMWidgetModel.prototype.defaults(),{_model_name:"WidgetModel",_view_name:"WidgetView",_model_module:"ogdf-python-widget",_view_module:"ogdf-python-widget",_model_module_version:"0.1.0",_view_module_version:"0.1.0",width:960,height:540,x_pos:0,y_pos:0,zoom:1,click_thickness:10,animation_duration:1e3,force_config:null,rescale_on_resize:!0})}),a=r.DOMWidgetView.extend({initialize:function(t){a.__super__.initialize.call(this,t),this.isNodeMovementEnabled=this.model.get("node_movement_enabled"),this.isTransformCallbackAllowed=!0,this.forceDirected=!1,this.clickThickness=this.model.get("click_thickness"),this.animationDuration=this.model.get("animation_duration"),this.gridSize=this.model.get("grid_size"),this.nodes=[],this.links=[],this.clusters=[],this.virtualLinks=[],this.width=this.model.get("width"),this.height=this.model.get("height"),this.model.on("msg:custom",this.handle_msg.bind(this)),this.model.on("change:x_pos",this.transformCallbackCheck,this),this.model.on("change:y_pos",this.transformCallbackCheck,this),this.model.on("change:zoom",this.transformCallbackCheck,this),this.model.on("change:width",this.svgSizeChanged,this),this.model.on("change:height",this.svgSizeChanged,this),this.model.on("change:click_thickness",this.clickThicknessChanged,this),this.model.on("change:animation_duration",this.animationDurationChanged,this),this.model.on("change:grid_size",this.gridSizeChanged,this),this.model.on("change:force_config",this.forceConfigChanged,this),this.model.on("change:node_movement_enabled",this.nodeMovementChanged,this),this.ticksSinceSync=0,this.send({code:"widgetReady"})},handle_msg:function(t){"clearGraph"===t.code?this.clearGraph():"initGraph"===t.code?(this.links=t.links,this.nodes=t.nodes,this.clusters=t.clusters,this.rootClusterId=t.rootClusterId,this.isClusterGraph="-1"!==this.rootClusterId,this.isSPQRTree=t.SPQRtree,this.isSPQRTree&&(this.virtualLinks=t.virtualLinks),this.render(),this.forceConfigChanged()):"nodeAdded"===t.code?this.addNode(t.data):"linkAdded"===t.code?this.addLink(t.data):"addClusterById"===t.code?(this.addCluster(t.data),console.log(this.clusters)):"deleteNodeById"===t.code?this.deleteNodeById(t.data):"deleteLinkById"===t.code?this.deleteLinkById(t.data):"deleteClusterById"===t.code?(this.deleteClusterById(t.data),console.log(this.clusters)):"updateNode"===t.code?this.updateNode(t.data,t.animated):"updateLink"===t.code?this.updateLink(t.data,t.animated):"moveLink"===t.code?this.moveLinkBends(t.data):"removeAllBendMovers"===t.code?this.removeAllBendMovers():"removeBendMoversFor"===t.code?this.removeBendMoversForLink(t.data):"moveCluster"===t.code?this.moveCluster(t.data):"removeAllClusterMovers"===t.code?this.removeAllClusterMovers():"downloadSvg"===t.code?this.downloadSvg(t.fileName):"exportSPQR"===t.code?this.exportSPQRTree(t.fileName):"test"===t.code?console.log("test"):console.log("msg cannot be read: "+t)},transformCallbackCheck:function(){this.isTransformCallbackAllowed&&this.readjustZoomLevel(o.zoomIdentity.translate(this.model.get("x_pos"),this.model.get("y_pos")).scale(this.model.get("zoom")))},svgSizeChanged:function(){this.width=this.model.get("width"),this.height=this.model.get("height"),o.select(this.svg).attr("width",this.model.get("width")).attr("height",this.model.get("height")),this.model.get("rescale_on_resize")&&this.readjustZoomLevel(this.getInitialTransform(15))},clickThicknessChanged:function(){this.clickThickness=this.model.get("click_thickness");let t=this;o.select(this.svg).selectAll(".line_click_holder > .line").attr("stroke-width",(function(e){return Math.max(e.strokeWidth,t.clickThickness)}))},animationDurationChanged:function(){this.animationDuration=this.model.get("animation_duration")},gridSizeChanged:function(){this.gridSize=this.model.get("grid_size")},forceConfigChanged:function(){let t=this.model.get("force_config");t.stop||null==t.stop?this.stopForceLayout():this.startForceLayout(t)},nodeMovementChanged:function(){this.isNodeMovementEnabled=this.model.get("node_movement_enabled"),this.isNodeMovementEnabled?(o.select(this.svg).selectAll(".node").call(this.node_drag_handler),o.select(this.svg).selectAll(".nodeLabel").call(this.node_drag_handler)):(o.select(this.svg).selectAll(".node").on("mousedown.drag",null),o.select(this.svg).selectAll(".nodeLabel").on("mousedown.drag",null))},startForceLayout:function(t){let e=this;this.forceDirected=!0,o.select(this.svg).selectAll(".node").remove(),o.select(this.svg).selectAll("text").remove(),o.select(this.svg).selectAll(".line").remove();let n=[],i=[];if(e.isClusterGraph){let t=Object.values(this.clusters);for(let e=0;e<t.length;e++){n.push({id:String(-parseInt(t[e].id)-1),name:"test",x:0,y:0,shape:0,fillColor:{r:0,g:0,b:0,a:100},strokeColor:{r:0,g:0,b:0,a:100},strokeWidth:1,nodeWidth:30,nodeHeight:30});for(let n=0;n<t[e].nodes.length;n++)i.push({strongerLink:!0,id:String(1e9*(e+1)+n),label:"",source:String(-parseInt(t[e].id)-1),target:t[e].nodes[n],t_shape:0,strokeColor:{r:0,g:0,b:0,a:100},strokeWidth:1,sx:0,sy:0,tx:0,ty:0,arrow:!0,bends:[]})}}let r=Object.values(this.links);for(let t=0;t<r.length;t++)l.constructForceLink(r[t],this.line_holder,this,!1);let s=Object.values(this.nodes);for(let t=0;t<s.length;t++)l.constructNode(s[t],this.node_holder,this.text_holder,this,!1);setTimeout((function(){e.rescaleAllText()}),10),this.simulation=o.forceSimulation().nodes(s.concat(n)).on("end",(function(){e.syncBackend()}));let d=o.forceLink(r.concat(i)).id((function(t){return t.id})).strength((function(t){return e.isSPQRTree&&t.virtualLink?.15:e.isClusterGraph?t.strongerLink?.6:t.source.clusterId===t.target.clusterId?.2:.1:.2})),a=o.forceManyBody().strength((function(n){return e.isClusterGraph&&n.id<0?10*t.chargeForce:t.chargeForce})),c=o.forceCenter(t.forceCenterX,t.forceCenterY);this.simulation.force("charge_force",a).force("center_force",c).force("links",d),this.simulation.on("tick",(function(){o.select(e.svg).selectAll(".node").attr("x",(function(t){return t.x-t.nodeWidth/2})).attr("y",(function(t){return t.y-t.nodeHeight/2})).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),o.select(e.svg).selectAll(".nodeLabel").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})),o.select(e.svg).selectAll(".line").attr("d",(function(t){return t.sx=t.source.x,t.sy=t.source.y,t.tx=t.target.x,t.ty=t.target.y,e.getPathForLine(t.source.x,t.source.y,[],t.target.x,t.target.y,t.t_shape,t.source.id,t.target.id,t)})),o.select(e.svg).selectAll(".virtualLink").attr("x1",(function(t){let n=e.links[t.sourceId];return void 0===n.curveX?(n.sx+n.tx)/2:n.curveX})).attr("y1",(function(t){let n=e.links[t.sourceId];return void 0===n.curveY?(n.sy+n.ty)/2:n.curveY})).attr("x2",(function(t){let n=e.links[t.targetId];return void 0===n.curveX?(n.sx+n.tx)/2:n.curveX})).attr("y2",(function(t){let n=e.links[t.targetId];return void 0===n.curveY?(n.sy+n.ty)/2:n.curveY})),e.ticksSinceSync%5==0&&(e.syncBackend(),e.ticksSinceSync=0,e.isClusterGraph&&(l.constructClusters(e.rootClusterId,e),e.updateClustersInOGDF()))})),t.fixStartPosition&&o.select(this.svg).selectAll(".node").attr("x",(function(t){t.fx=t.x,t.fy=t.y}))},stopForceLayout:function(){if(this.forceDirected&&(this.forceDirected=!1,null!=this.simulation&&(this.simulation.stop(),this.simulation=null),this.isSPQRTree)){o.select(this.svg).selectAll(".line").remove();let t=Object.values(this.links);for(let e=0;e<t.length;e++)t[e].source=t[e].source.id,t[e].target=t[e].target.id,l.constructLink(t[e],this.line_holder,this.line_text_holder,this.line_click_holder,this,this.clickThickness,!1)}},syncBackend:function(){this.isSPQRTree||this.send({code:"positionUpdate",nodes:this.nodes})},getInitialTransform:function(t){let e=Object.values(this.nodes),n=this.getBoundingBox(e,Object.values(this.links)),i=n.maxX-n.minX+2*t,r=n.maxY-n.minY+2*t;if(this.isClusterGraph){let t=this.clusters[this.rootClusterId];i=Math.max(i,t.x2-t.x),r=Math.max(r,t.y2-t.y)}let s=Math.min(this.width/i,this.height/r),l=this.width/2-(n.minX+i/2-t)*s,d=this.height/2-(n.minY+r/2-t)*s;return 1===e.length&&(s=1,l=this.width/2-e[0].x,d=this.height/2-e[0].y),o.zoomIdentity.translate(l,d).scale(s)},readjustZoomLevel:function(t){const e=this,n=o.select(this.svg),i=o.zoom();n.call(i.transform,t),n.call(i.on("zoom",(function({transform:t}){e.g.attr("transform",t)})).on("end",(function({transform:t}){e.updateZoomLevelInModel(t)}))),n.call(i),null!=this.g&&(this.g.attr("transform",t),this.updateZoomLevelInModel(t))},updateZoomLevelInModel:function(t){this.isTransformCallbackAllowed=!1,this.model.set("x_pos",t.x),this.model.set("y_pos",t.y),this.model.set("zoom",t.k),this.model.save_changes(),this.isTransformCallbackAllowed=!0},downloadSvg:function(t){let e=this.svg.outerHTML;e.match(/^<svg[^>]+xmlns="http:\/\/www\.w3\.org\/2000\/svg"/)||(e=e.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),e.match(/^<svg[^>]+"http:\/\/www\.w3\.org\/1999\/xlink"/)||(e=e.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"'));const n=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=t+".svg",r.click()},exportSPQRTree:function(t){const e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({nodes:this.nodes,links:this.links,virtualLinks:this.virtualLinks})),n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t+".json"),document.body.appendChild(n),n.click(),n.remove()},moveCluster:function(t){let e=this,n=this.clusters[t],i=[{id:n.id,x:(n.x+n.x2)/2,y:(n.y+n.y2)/2,strokeWidth:1}],r=this.clusterMover_holder.data(i).enter().append("circle").attr("class","clusterMover").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("id",(function(t){return t.id})).attr("r",15).attr("fill","yellow").attr("stroke","black").attr("stroke-width",(function(t){return t.strokeWidth}));const s=o.drag().on("start",(function(t,n){o.select(e.svg).selectAll(".clusterMover").filter((function(t){return t.id===n.id})).attr("stroke-width",(function(t){return t.strokeWidth+1})),n.lastX=t.x,n.lastY=t.y})).on("drag",(function(t,n){const i=n.id,r=e.clusters[i];o.select(e.svg).selectAll(".clusterMover").filter((function(t){return t.id===i})).attr("cx",t.x).attr("cy",t.y),r.nodesBoundingBox.minX=r.nodesBoundingBox.minX-(n.lastX-t.x),r.nodesBoundingBox.maxX=r.nodesBoundingBox.maxX-(n.lastX-t.x),r.nodesBoundingBox.minY=r.nodesBoundingBox.minY-(n.lastY-t.y),r.nodesBoundingBox.maxY=r.nodesBoundingBox.maxY-(n.lastY-t.y),l.constructClusters(e.rootClusterId,e,!1);for(let i=0;i<r.nodes.length;i++){let s=e.nodes[r.nodes[i]];e.moveNodeAndLinks(s.id,s.x-(n.lastX-t.x),s.y-(n.lastY-t.y),s)}n.lastX=t.x,n.lastY=t.y})).on("end",(function(t,n){const i=e.clusters[n.id];o.select(e.svg).selectAll(".clusterMover").attr("stroke-width",(function(t){return t.strokeWidth})),n.x=t.x,n.y=t.y,e.updateClustersInOGDF();for(let t=0;t<i.nodes.length;t++){let n=e.nodes[i.nodes[t]];e.send({code:"nodeMoved",id:n.id,x:n.x,y:n.y})}}));r.call(s)},moveLinkBends:function(t){let e=this,n=[];for(let e=0;e<t.bends.length;e++)n.push({id:t.id,x:t.bends[e][0],y:t.bends[e][1],bendIndex:e,strokeWidth:1});let i=this.bendMover_holder.data(n).enter().append("circle").attr("class","bendMover").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("id",(function(t){return t.id})).attr("r",7).attr("fill","yellow").attr("stroke","black").attr("stroke-width",(function(t){return t.strokeWidth}));const r=o.drag().on("start",(function(t,n){o.select(e.svg).selectAll(".bendMover").filter((function(t){return t.id===n.id&&t.bendIndex===n.bendIndex})).attr("stroke-width",(function(t){return t.strokeWidth+1}))})).on("drag",(function(t,n){const i=n.id,r=n.bendIndex;o.select(e.svg).selectAll(".bendMover").filter((function(t){return t.id===i&&t.bendIndex===r})).attr("cx",t.x).attr("cy",t.y),o.select(e.svg).selectAll(".line").filter((function(t){return t.id===i})).attr("d",(function(n){return n.bends[r][0]=t.x,n.bends[r][1]=t.y,e.getPathForLine(n.sx,n.sy,n.bends,n.tx,n.ty,n.t_shape,n.source,n.target,n)})),0===r&&o.select(e.svg).selectAll(".linkLabel").filter((function(t){return t.id===i})).attr("transform",(function(){return"translate("+t.x+","+t.y+")"}))})).on("end",(function(t,n){o.select(e.svg).selectAll(".bendMover").attr("stroke-width",(function(t){return t.strokeWidth})),n.x!==t.x||n.y!==t.y?(n.x=Math.round(t.x),n.y=Math.round(t.y),e.send({code:"bendMoved",linkId:this.id,bendIndex:n.bendIndex,x:n.x,y:n.y})):e.send({code:"bendClicked",linkId:this.id,bendIndex:n.bendIndex,altKey:t.sourceEvent.altKey})}));i.call(r)},addNode:function(t){if(this.forceDirected&&this.stopForceLayout(),this.nodes[t.id]=t,l.constructNode(t,this.node_holder,this.text_holder,this,!1),this.isClusterGraph){const e=this.clusters[t.clusterId];e.nodes.push(t.id),this.recalculateClusterBoundingBox(e),l.constructClusters(this.rootClusterId,this,!1),this.updateClustersInOGDF()}this.forceConfigChanged()},addLink:function(t){this.forceDirected&&this.stopForceLayout(),this.links[t.id]=t,l.constructLink(t,this.line_holder,this.line_text_holder,this.line_click_holder,this,this.clickThickness,!1),this.forceConfigChanged()},addCluster:function(t){this.clusters[t.id]=t,this.clusters[t.parentId].children.push(t.id);for(let e=0;e<t.nodes.length;e++){let n=t.nodes[e],i=this.clusters[this.nodes[n].clusterId];i.nodes.splice(i.nodes.indexOf(n),1),this.nodes[n].clusterId=t.id}l.constructClusters(this.rootClusterId,this),this.updateClustersInOGDF()},deleteNodeById:function(t){if(this.forceDirected&&this.stopForceLayout(),this.isClusterGraph){const e=this.clusters[this.nodes[t].clusterId];e.nodes.splice(e.nodes.indexOf(t),1),this.recalculateClusterBoundingBox(e),l.constructClusters(this.rootClusterId,this,!1),this.updateClustersInOGDF()}delete this.nodes[t],o.select(this.svg).selectAll(".node").filter((function(e){return e.id===t})).remove(),o.select(this.svg).selectAll(".nodeLabel").filter((function(e){return e.id===t})).remove(),this.forceConfigChanged()},deleteLinkById:function(t){this.forceDirected&&this.stopForceLayout(),delete this.links[t];for(let e=this.virtualLinks.length-1;e>=0;e--)this.virtualLinks[e].sourceId!==t&&this.virtualLinks[e].targetId!==t||this.virtualLinks.splice(e,1);this.removeBendMoversForLink(t),o.select(this.svg).selectAll(".line").filter((function(e){return e.id===t})).remove(),o.select(this.svg).selectAll(".linkLabel").filter((function(e){return e.id===t})).remove(),this.isSPQRTree&&o.select(widgetView.svg).selectAll(".virtualLink").filter((function(t){return t.sourceId===movedLinkIds[i]||t.targetId===movedLinkIds[i]})).remove(),this.forceConfigChanged()},deleteClusterById:function(t){if(this.rootClusterId===t)return void console.error("You cannot delete the root cluster!");let e=this.clusters[t],n=this.clusters[e.parentId];const i=n.children.indexOf(t);i>-1&&n.children.splice(i,1);for(let t=0;t<e.nodes.length;t++)this.nodes[e.nodes[t]].clusterId=n.id;n.children=n.children.concat(e.children),n.nodes=n.nodes.concat(e.nodes),n.nodesBoundingBox.minX=Math.min(n.nodesBoundingBox.minX,e.nodesBoundingBox.minX),n.nodesBoundingBox.maxX=Math.max(n.nodesBoundingBox.maxX,e.nodesBoundingBox.maxX),n.nodesBoundingBox.minY=Math.min(n.nodesBoundingBox.minY,e.nodesBoundingBox.minY),n.nodesBoundingBox.maxY=Math.max(n.nodesBoundingBox.maxY,e.nodesBoundingBox.maxY),this.calculateClusterSize(this.clusters[e.parentId]);for(let t=0;t<e.children.length;t++)this.clusters[e.children[t]].parentId=e.parentId;delete this.clusters[t],o.select(this.svg).selectAll(".cluster").filter((function(e){return e.id===t})).remove(),l.constructClusters(this.rootClusterId,this,!1),this.updateClustersInOGDF()},updateNode:function(t,e){let n=this,i=o.select(this.svg).selectAll(".node").filter((function(e){return e.id===t.id})),r=o.select(this.svg).selectAll(".nodeLabel").filter((function(e){return e.id===t.id}));if(n.forceDirected&&n.simulation.alphaTarget(.3).restart(),i.transition().duration(e?this.animationDuration:1).attr("width",(function(e){return e.nodeWidth=t.nodeWidth,e.nodeWidth})).attr("height",(function(e){return e.nodeHeight=t.nodeHeight,e.nodeHeight})).attr("x",(function(e){if(n.forceDirected&&!n.isNodeMovementEnabled)e.fx=t.x;else if(n.forceDirected)return;return e.x=t.x,e.x-e.nodeWidth/2})).attr("y",(function(e){if(n.forceDirected&&!n.isNodeMovementEnabled)e.fy=t.y;else if(n.forceDirected)return;return e.y=t.y,e.y-e.nodeHeight/2})).attr("cx",(function(e){if(n.forceDirected&&!n.isNodeMovementEnabled)e.fx=t.x;else if(n.forceDirected)return;return e.x=t.x,e.x})).attr("cy",(function(e){if(n.forceDirected&&!n.isNodeMovementEnabled)e.fy=t.y;else if(n.forceDirected)return;return e.y=t.y,e.y})).attr("r",(function(e){return e.nodeHeight=t.nodeHeight,e.nodeHeight/2})).attr("fill",(function(e){return e.fillColor=t.fillColor,n.getColorStringFromJson(e.fillColor)})).attr("stroke",(function(e){return e.strokeColor=t.strokeColor,n.getColorStringFromJson(e.strokeColor)})).attr("stroke-width",(function(e){return e.strokeWidth=t.strokeWidth,e.strokeWidth})),this.isClusterGraph){const e=this.clusters[t.clusterId];this.recalculateClusterBoundingBox(e),l.constructClusters(this.rootClusterId,this,!1),this.updateClustersInOGDF()}n.forceDirected&&setTimeout((function(){n.simulation.alphaTarget(0)}),1e3);let s=!0;r.text((function(e){return e.name!==t.name?(e.name=t.name,e.labelWidth=0):s=!1,e.name})).style("font-size",(function(t){return s?"1em":t.fontSize+"em"})),s&&setTimeout((function(){n.rescaleTextById(t.id)}),10),r.transition().duration(e?this.animationDuration:1).attr("transform",(function(e){if(!n.forceDirected||!n.isNodeMovementEnabled)return e.x=t.x,e.y=t.y,"translate("+e.x+","+e.y+")"}))},addBendsToLink:function(t,e){let n=[[t.sx,t.sy]].concat(t.bends).concat([[t.tx,t.ty]]);for(;e>n.length-2;)for(let t=n.length-2;t>=0&&e>n.length-2;t--){let e=[(n[t][0]+n[t+1][0])/2,(n[t][1]+n[t+1][1])/2];n.splice(t+1,0,e)}return n.shift(),n.pop(),t.bends=n,t},updateLink:function(t,e){let n=!1;if(o.select(this.svg).selectAll(".bendMover").filter((function(e){return e.id===t.id&&(n=!0),e.id===t.id})).remove(),n&&this.moveLinkBends(t),!e)return this.deleteLinkById(t.id),void this.addLink(t);let i=this.links[t.id],r=null;null!==i&&i.bends.length!==t.bends.length&&(i.bends.length<t.bends.length?(this.deleteLinkById(t.id),this.addLink(this.addBendsToLink(JSON.parse(JSON.stringify(i)),t.bends.length))):r=this.addBendsToLink(JSON.parse(JSON.stringify(t)),i.bends.length));let s=this,l=o.select(this.svg).selectAll(".line_holder > .line").filter((function(e){return e.id===t.id})),d=o.select(this.svg).selectAll(".line_click_holder > .line").filter((function(e){return e.id===t.id})),a=o.select(this.svg).selectAll(".linkLabel").filter((function(e){return e.id===t.id}));l.transition().duration(this.animationDuration).attr("d",(function(e){let n=null==r?t:r;return e.source=n.source,e.target=n.target,e.sx=n.sx,e.sy=n.sy,e.bends=n.bends,e.tx=n.tx,e.ty=n.ty,s.getPathForLine(e.sx,e.sy,e.bends,e.tx,e.ty,e.t_shape,e.source,e.target,e)})).attr("stroke",(function(e){return e.strokeColor=t.strokeColor,s.getColorStringFromJson(e.strokeColor)})).attr("stroke-width",(function(e){return e.strokeWidth=t.strokeWidth,e.strokeWidth})),d.transition().duration(this.animationDuration).attr("d",(function(e){return e.source=t.source,e.target=t.target,e.sx=t.sx,e.sy=t.sy,e.bends=t.bends,e.tx=t.tx,e.ty=t.ty,s.getPathForLine(e.sx,e.sy,e.bends,e.tx,e.ty,e.t_shape,e.source,e.target,e)})).attr("stroke-width",(function(e){return e.strokeWidth=t.strokeWidth,Math.max(e.strokeWidth,s.clickThickness)})),a.transition().duration(this.animationDuration).text((function(e){return e.label=t.label,e.label})).attr("transform",(function(e){return e.label_x=t.label_x,e.label_y=t.label_y,"translate("+e.label_x+","+e.label_y+")"})),null!=r&&setTimeout((()=>{this.deleteLinkById(t.id),this.addLink(t)}),this.animationDuration)},updateCluster:function(t,e){let n=this,i=o.select(this.svg).selectAll(".cluster").filter((function(e){return e.id===t.id}));if(null==i)return void console.error("ClusterId: "+t.id+" could not be found.");const r=o.line();i.transition().duration(e?this.animationDuration:1).attr("d",(function(t){let e=[[t.x,t.y],[t.x2,t.y],[t.x2,t.y2],[t.x,t.y2],[t.x,t.y]];return r(e)})).attr("stroke",(function(t){return n.getColorStringFromJson(t.strokeColor)})).attr("stroke-width",(function(t){return t.strokeWidth})).attr("fill","none")},clearGraph:function(){this.nodes={},this.links={},this.clusters={},this.virtualLinks=[],o.select(this.svg).selectAll(".node").remove(),o.select(this.svg).selectAll("text").remove(),o.select(this.svg).selectAll(".line").remove(),o.select(this.svg).selectAll(".linkLabel").remove(),o.select(this.svg).selectAll(".virtualLink").remove(),o.select(this.svg).selectAll(".cluster").remove()},getBoundingBox:function(t,e){let n={minX:Number.MAX_VALUE,maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE};for(let e=0;e<t.length;e++)t[e].x<n.minX&&(n.minX=t[e].x),t[e].x>n.maxX&&(n.maxX=t[e].x),t[e].y<n.minY&&(n.minY=t[e].y),t[e].y>n.maxY&&(n.maxY=t[e].y);if(null!=e)for(let t=0;t<e.length;t++)for(let i=0;i<e[t].bends.length;i++){let r=e[t].bends[i];r[0]<n.minX&&(n.minX=r[0]),r[0]>n.maxX&&(n.maxX=r[0]),r[1]<n.minY&&(n.minY=r[1]),r[1]>n.maxY&&(n.maxY=r[1])}return n},removeAllBendMovers:function(){o.select(this.svg).selectAll(".bendMover").remove()},removeAllClusterMovers:function(){o.select(this.svg).selectAll(".clusterMover").remove()},moveNodeAndLinks:function(t,e,n,i){let r=this;o.select(r.svg).selectAll(".node").filter((function(e){return e.id===t})).attr("cx",(function(t){return t.x=e,e})).attr("cy",(function(t){return t.y=n,n})).attr("x",e-i.nodeWidth/2).attr("y",n-i.nodeHeight/2),o.select(r.svg).selectAll(".nodeLabel").filter((function(e){return e.id===t})).attr("transform",(function(){return"translate("+e+","+n+")"}));let s=[],l=[];o.select(r.svg).selectAll(".line").filter((function(e){return e.source===t||e.target===t})).attr("d",(function(i){return l.push(i.id),i.source===t&&(i.sx=e,i.sy=n),i.target===t&&(i.tx=e,i.ty=n),0===i.bends.length&&s.push(i.id),r.getPathForLine(i.sx,i.sy,i.bends,i.tx,i.ty,i.t_shape,i.source,i.target,i)}));for(let t=0;t<s.length;t++)o.select(r.svg).selectAll(".linkLabel").filter((function(e){return e.id===s[t]})).attr("transform",(function(t){return"translate("+(t.sx+t.tx)/2+","+(t.sy+t.ty)/2+")"}));if(r.isSPQRTree&&0!==l.length)for(let t=0;t<l.length;t++)o.select(r.svg).selectAll(".virtualLink").filter((function(e){return e.sourceId===l[t]||e.targetId===l[t]})).attr("x1",(function(t){let e=r.links[t.sourceId];return void 0===e.curveX?(e.sx+e.tx)/2:e.curveX})).attr("y1",(function(t){let e=r.links[t.sourceId];return void 0===e.curveY?(e.sy+e.ty)/2:e.curveY})).attr("x2",(function(t){let e=r.links[t.targetId];return void 0===e.curveX?(e.sx+e.tx)/2:e.curveX})).attr("y2",(function(t){let e=r.links[t.targetId];return void 0===e.curveY?(e.sy+e.ty)/2:e.curveY}))},removeBendMoversForLink:function(t){o.select(this.svg).selectAll(".bendMover").filter((function(e){return e.id===t})).remove()},render:function(){if(0===this.links.length&&0===this.nodes.length)return;if(0===this.el.childNodes.length){let t="G"+Math.random().toString(16).slice(2);this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("id",t),this.svg.setAttribute("width",this.width),this.svg.setAttribute("height",this.height),this.el.appendChild(this.svg)}this.draw_graph();let t=this;setTimeout((function(){t.rescaleAllText()}),10)},updateClustersInOGDF:function(){let t=Object.values(this.clusters);for(let e=0;e<t.length;e++){let n=t[e];this.send({code:"updateClusterPosition",id:n.id,x:n.x,y:n.y,width:n.x2-n.x,height:n.y2-n.y})}},recalculateClusterBoundingBox:function(t){let e=[];for(let n=0;n<t.nodes.length;n++)e.push(this.nodes[t.nodes[n]]);t.nodesBoundingBox=this.getBoundingBox(e)},calculateClusterSize:function(t){t.x=t.nodesBoundingBox.minX-10,t.y=t.nodesBoundingBox.minY-10,t.x2=t.nodesBoundingBox.maxX+10,t.y2=t.nodesBoundingBox.maxY+10;for(let e=0;e<t.children.length;e++)t.x=Math.min(t.x,this.clusters[t.children[e]].x),t.y=Math.min(t.y,this.clusters[t.children[e]].y),t.x2=Math.max(t.x2,this.clusters[t.children[e]].x2),t.y2=Math.max(t.y2,this.clusters[t.children[e]].y2);t.x=t.x-5,t.y=t.y-5,t.x2=t.x2+5,t.y2=t.y2+5},constructCluster:function(t,e,n){const i=o.line();e.data([t]).enter().append("path").attr("class","cluster").attr("id",(function(t){return t.id})).attr("d",(function(t){let e=[[t.x,t.y],[t.x2,t.y],[t.x2,t.y2],[t.x,t.y2],[t.x,t.y]];return i(e)})).attr("stroke",(function(t){return n.getColorStringFromJson(t.strokeColor)})).attr("stroke-width",(function(t){return t.strokeWidth})).attr("fill","none").on("click",(function(t,e){n.send({code:"clusterClicked",id:e.id,altKey:t.altKey,ctrlKey:t.ctrlKey})}))},getColorStringFromJson:t=>"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")",getSelfLoopPath:function(t,e,n,i){return"M"+t+","+e+"A30,20 -45,1,1 "+(n+1)+","+(i+1)},draw_graph(){let t=this;const e=o.select(this.svg);e.on("click",(function(e){let n;n=void 0===e.path?"svg"===e.originalTarget.nodeName:"svg"===e.path[0].nodeName,t.send({code:"svgClicked",x:e.offsetX,y:e.offsetY,altKey:e.altKey,ctrlKey:e.ctrlKey,backgroundClicked:n})}));let n=Object.values(this.nodes),i=Object.values(this.links),r=n.length>0?n[0].nodeWidth/2:0;o.select(this.svg).selectAll(".everything").remove(),this.g=e.append("g").attr("class","everything"),function(t){e.append("svg:defs").selectAll("marker").data(["endCircle"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",4*t/3+8).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").attr("fill","black").append("svg:path").attr("d","M0,-5L10,0L0,5"),e.append("svg:defs").selectAll("marker").data(["endSquare"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").attr("stroke","#000").attr("fill","#000").append("svg:path").attr("d","M0,-5L10,0L0,5").style("stroke-width","0.3px")}(r),this.cluster_holder=this.g.append("g").attr("class","cluster_holder").selectAll(".cluster"),null!=this.clusters&&this.isClusterGraph&&l.constructClusters(this.rootClusterId,this),this.updateClustersInOGDF(),this.line_holder=this.g.append("g").attr("class","line_holder").selectAll(".line"),this.line_click_holder=this.g.append("g").attr("class","line_click_holder").selectAll(".line"),this.line_text_holder=this.g.append("g").attr("class","line_text_holder").selectAll(".lineText");for(let e=0;e<i.length;e++)t.isSPQRTree&&i[e].virtualLink||l.constructLink(i[e],this.line_holder,this.line_text_holder,this.line_click_holder,t,this.clickThickness,!1);this.bendMover_holder=this.g.append("g").attr("class","bendMover_holder").selectAll("bendMover"),this.virtual_line_holder=this.g.append("g").attr("class","virtual_line_holder").selectAll(".virtualLink");for(let e=0;e<this.virtualLinks.length;e++)l.constructVirtualLink(this.virtualLinks[e],this.virtual_line_holder,t);t.node_drag_handler=o.drag().on("start",(function(e,n){const i=this.id;if(n.startX=n.x,n.startY=n.y,o.select(t.svg).selectAll(".node").filter((function(t){return t.id===i})).attr("stroke-width",(function(t){return t.strokeWidth+1})),t.forceDirected&&!e.active&&t.simulation.alphaTarget(.3).restart(),t.isClusterGraph){let e=t.clusters[n.clusterId],r=[];for(let n=0;n<e.nodes.length;n++)e.nodes[n]!==i&&r.push(t.nodes[e.nodes[n]]);e.bbWoutDragged=t.getBoundingBox(r)}})).on("drag",(function(e,n){let i=e.x,r=e.y;if(0!==t.gridSize&&(i=t.gridSize*Math.floor(e.x/t.gridSize+.5),r=t.gridSize*Math.floor(e.y/t.gridSize+.5)),t.forceDirected)return e.subject.fx=i,void(e.subject.fy=r);const s=this.id,l=o.line();if(t.moveNodeAndLinks(s,i,r,n),t.isClusterGraph){let i=t.clusters[n.clusterId];i.nodesBoundingBox.minX=Math.min(i.bbWoutDragged.minX,e.x),i.nodesBoundingBox.minY=Math.min(i.bbWoutDragged.minY,e.y),i.nodesBoundingBox.maxX=Math.max(i.bbWoutDragged.maxX,e.x),i.nodesBoundingBox.maxY=Math.max(i.bbWoutDragged.maxY,e.y);for(let e=i;null!==e&&(t.calculateClusterSize(e),o.select(t.svg).selectAll(".cluster").filter((function(t){return t.id===e.id})).attr("d",(function(t){let e=[[t.x,t.y],[t.x2,t.y],[t.x2,t.y2],[t.x,t.y2],[t.x,t.y]];return l(e)})),null!==e.parentId);e=t.clusters[e.parentId]);}})).on("end",(function(e,n){const i=this.id;o.select(t.svg).selectAll(".node").filter((function(t){return t.id===i})).attr("stroke-width",(function(t){return t.strokeWidth})),t.forceDirected&&!e.active&&t.simulation.alphaTarget(0),n.startX===e.x&&n.startY===e.y?(t.forceDirected&&(e.subject.fx=null,e.subject.fy=null),t.send({code:"nodeClicked",id:i,altKey:e.sourceEvent.altKey,ctrlKey:e.sourceEvent.ctrlKey})):(n.x=Math.round(e.x),n.y=Math.round(e.y),0!==t.gridSize&&(n.x=t.gridSize*Math.floor(e.x/t.gridSize+.5),n.y=t.gridSize*Math.floor(e.y/t.gridSize+.5)),t.isSPQRTree||t.send({code:"nodeMoved",id:this.id,x:n.x,y:n.y}),t.updateClustersInOGDF()),t.isClusterGraph&&delete t.clusters[n.clusterId].bbWoutDragged})),this.node_holder=this.g.append("g").attr("class","node_holder").selectAll(".node"),this.text_holder=this.g.append("g").attr("class","text_holder").selectAll(".nodeLabel");for(let e=0;e<n.length;e++)l.constructNode(n[e],this.node_holder,this.text_holder,t,!1);this.clusterMover_holder=this.g.append("g").attr("class","clusterMover_holder").selectAll("clusterMover"),this.readjustZoomLevel(this.getInitialTransform(r))},rescaleAllText(){o.select(this.svg).selectAll(".nodeLabel").style("font-size",this.adaptLabelFontSize)},rescaleTextById(t){o.select(this.svg).selectAll(".nodeLabel").filter((function(e){return e.id===t})).style("font-size",this.adaptLabelFontSize)},adaptLabelFontSize(t){let e=t.nodeWidth-2;return void 0!==t.labelWidth&&0!==t.labelWidth||(t.labelWidth=this.getComputedTextLength()),t.labelWidth<=e?(t.fontSize=1,"1em"):(t.fontSize=e/t.labelWidth-.01,t.fontSize+"em")},getPathForLine(t,e,n,i,r,s,l,d,a){if(l===d&&0===n.length)return this.getSelfLoopPath(t,e,i,r);let c=20;if(this.isSPQRTree&&a.isPnode&&a.isVlinkAttached){let n;for(let t=0;t<this.virtualLinks.length;t++)this.virtualLinks[t].sourceId===a.id&&(n=this.links[this.virtualLinks[t].targetId]),this.virtualLinks[t].targetId===a.id&&(n=this.links[this.virtualLinks[t].sourceId]);return(n.sx+n.tx)/2<(t+i)/2&&(c*=-1),this.draw_curve(t,e,i,r,c,a)}const u=o.line();let h=[[t,e]].concat(n);if(0===s){let s=t,o=e;0!==n.length&&(s=n[n.length-1][0],o=n[n.length-1][1]);let l=this.nodes[d],a=this.pointOnRect(s,o,i-l.nodeWidth/2,r-l.nodeHeight/2,i+l.nodeWidth/2,r+l.nodeHeight/2,!1);return u(h)+"L"+a.x+","+a.y}return h=h.concat([[i,r]]),u(h)},draw_curve(t,e,n,i,r,s){let o=(n+t)/2,l=(i+e)/2,d=n-t,a=i-e,c=Math.atan(a/(d+.1)),u=d<0?-1:1,h=r*u*Math.sin(c),f=r*u*Math.cos(c),g=o-h,m=l+f;return s.curveX=o-.5*h,s.curveY=l+.5*f,"M"+t+","+e+"Q"+g+","+m+" "+n+","+i},pointOnRect(t,e,n,i,r,s,o){if(n<=t&&t<=r&&i<=e&&e<=s)return console.log("Point "+[t,e]+"cannot be inside the rectangle: "+[n,i]+" - "+[r,s]+"."),{x:(n+r)/2,y:(i+s)/2};const l=(n+r)/2,d=(i+s)/2,a=(d-e)/(l-t);if(t<=l){const r=a*(n-t)+e;if(i<=r&&r<=s)return{x:n,y:r}}if(t>=l){const n=a*(r-t)+e;if(i<=n&&n<=s)return{x:r,y:n}}if(e<=d){const s=(i-e)/a+t;if(n<=s&&s<=r)return{x:s,y:i}}if(e>=d){const i=(s-e)/a+t;if(n<=i&&i<=r)return{x:i,y:s}}throw"Cannot find intersection for "+[t,e]+" inside rectangle "+[n,i]+" - "+[r,s]+"."}});t.exports={WidgetModel:d,WidgetView:a}},338:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(645),r=n.n(i)()((function(t){return t[1]}));r.push([t.id,"svg {\n    background: #edf0f5;\n}",""]);const s=r},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);i&&r[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),e.push(d))}},e}},840:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var i=n(379),r=n.n(i),s=n(338);r()(s.Z,{insert:"head",singleton:!1});const o=s.Z.locals||{}},379:(t,e,n)=>{"use strict";var i,r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function o(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},i=[],r=0;r<t.length;r++){var l=t[r],d=e.base?l[0]+e.base:l[0],a=n[d]||0,c="".concat(d," ").concat(a);n[d]=a+1;var u=o(c),h={css:l[1],media:l[2],sourceMap:l[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:c,updater:m(h,e),references:1}),i.push(c)}return i}function d(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var a,c=(a=[],function(t,e){return a[t]=e,a.filter(Boolean).join("\n")});function u(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=c(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function h(t,e,n){var i=n.css,r=n.media,s=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,g=0;function m(t,e){var n,i,r;if(e.singleton){var s=g++;n=f||(f=d(e)),i=u.bind(null,n,s,!1),r=u.bind(null,n,s,!0)}else n=d(e),i=h.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=o(n[i]);s[r].references--}for(var d=l(t,e),a=0;a<n.length;a++){var c=o(n[a]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}n=d}}}},147:t=>{"use strict";t.exports={version:"0.1.1"}}}]);