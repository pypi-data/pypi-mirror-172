
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Services &#8212; mode-ng 0.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="API Reference" href="../reference/index.html" />
    <link rel="prev" title="User Guide" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="services">
<span id="guide-services"></span><h1>Services<a class="headerlink" href="#services" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#basics" id="id1">Basics</a></p></li>
<li><p><a class="reference internal" href="#the-service-api" id="id2">The Service API</a></p></li>
<li><p><a class="reference internal" href="#defining-new-services" id="id3">Defining new services</a></p></li>
</ul>
</nav>
<section id="basics">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Basics</a><a class="headerlink" href="#basics" title="Permalink to this heading">¶</a></h2>
<p>The Service class manages the services and background tasks started
by the async program, so that we can implement graceful shutdown
and also helps us visualize the relationships between
services in a dependency graph.</p>
<p>Anything that can be started/stopped and restarted
should probably be a subclass of the <a class="reference internal" href="../reference/mode.html#mode.Service" title="mode.Service"><code class="xref py py-class docutils literal notranslate"><span class="pre">Service</span></code></a> class.</p>
</section>
<section id="the-service-api">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">The Service API</a><a class="headerlink" href="#the-service-api" title="Permalink to this heading">¶</a></h2>
<p>A service can be started, and it may start other services
and background tasks.  Most actions in a service are asynchronous, so needs
to be executed from within an async function.</p>
<p>This first section defines the public service API, as if used by the user,
the next section will define the methods service authors write to define new
services.</p>
<section id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mode.</span></span><span class="sig-name descname"><span class="pre">Service</span></span></dt>
<dd><dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">maybe_start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span></dt>
<dd><p>Start the service, if it has not already been started.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Stop the service.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">restart</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Restart this service.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wait_until_stopped</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Wait until the service is signalled to stop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Set the shutdown signal.</p>
<p class="rubric">Notes</p>
<p>If <a class="reference internal" href="../reference/mode.html#mode.Service.wait_for_shutdown" title="mode.Service.wait_for_shutdown"><code class="xref py py-attr docutils literal notranslate"><span class="pre">wait_for_shutdown</span></code></a> is set, stopping the service
will wait for this flag to be set.</p>
</dd></dl>

</dd></dl>

</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mode.</span></span><span class="sig-name descname"><span class="pre">Service</span></span></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">started</span></span></dt>
<dd><p>Return <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code> if the service was started.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">label</span></span></dt>
<dd><p>Label used for graphs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">shortlabel</span></span></dt>
<dd><p>Label used for logging.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">beacon</span></span></dt>
<dd><p>Beacon used to track services in a dependency graph.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="defining-new-services">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Defining new services</a><a class="headerlink" href="#defining-new-services" title="Permalink to this heading">¶</a></h2>
<section id="adding-child-services">
<h3>Adding child services<a class="headerlink" href="#adding-child-services" title="Permalink to this heading">¶</a></h3>
<p>Child services can be added in three ways,</p>
<ol class="arabic">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">add_dependency()</span></code> in <code class="docutils literal notranslate"><span class="pre">__post_init__</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyService</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_dependency</span><span class="p">(</span><span class="n">OtherService</span><span class="p">())</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">add_dependency()</span></code> in <code class="docutils literal notranslate"><span class="pre">on_start</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyService</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_dependency</span><span class="p">(</span><span class="n">OtherService</span><span class="p">())</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">on_init_dependencies()</span></code></p>
<blockquote>
<div><p>This is is a method that if customized should return an iterable
of service instances:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="kn">from</span> <span class="nn">mode</span> <span class="kn">import</span> <span class="n">Service</span><span class="p">,</span> <span class="n">ServiceT</span>

<span class="k">class</span> <span class="nc">MyService</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">on_init_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ServiceT</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">ServiceA</span><span class="p">(),</span> <span class="n">ServiceB</span><span class="p">()]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="ordering">
<h3>Ordering<a class="headerlink" href="#ordering" title="Permalink to this heading">¶</a></h3>
<p>Knowing exactly what is called, when it’s called and in what order
is important, and this table will help you understand that:</p>
<section id="order-at-start-await-service-start">
<h4>Order at start (<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">Service.start()</span></code>)<a class="headerlink" href="#order-at-start-await-service-start" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">on_first_start</span></code> callback is called.</p></li>
<li><p>Service logs: <code class="docutils literal notranslate"><span class="pre">&quot;[Service]</span> <span class="pre">Starting...&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">on_start</span></code> callback is called.</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">&#64;Service.task</span></code> background tasks are started (in definition order).</p></li>
<li><p>All child services added by <code class="docutils literal notranslate"><span class="pre">add_dependency()</span></code>, or
<code class="docutils literal notranslate"><span class="pre">on_init_dependencies())</span></code> are started.</p></li>
<li><p>Service logs: <code class="docutils literal notranslate"><span class="pre">&quot;[Service]</span> <span class="pre">Started&quot;</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">on_started</span></code> callback is called.</p></li>
</ol>
</section>
<section id="order-when-stopping-await-service-stop">
<h4>Order when stopping (<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">Service.stop()</span></code>)<a class="headerlink" href="#order-when-stopping-await-service-stop" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Service logs; <code class="docutils literal notranslate"><span class="pre">&quot;[Service]</span> <span class="pre">Stopping...&quot;</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">on_stop()</span></code> callback is called.</p></li>
<li><p>All child services are stopped, in reverse order.</p></li>
<li><p>All asyncio futures added by <code class="docutils literal notranslate"><span class="pre">add_future()</span></code> are cancelled
in reverse order.</p></li>
<li><p>Service logs: <code class="docutils literal notranslate"><span class="pre">&quot;[Service]</span> <span class="pre">Stopped&quot;</span></code>.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">Service.wait_for_shutdown</span> <span class="pre">=</span> <span class="pre">True</span></code>, it will wait for the
<code class="docutils literal notranslate"><span class="pre">Service.set_shutdown()</span></code> signal to be called.</p></li>
<li><p>All futures started by <code class="docutils literal notranslate"><span class="pre">add_future()</span></code> will be gathered (awaited).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">on_shutdown()</span></code> callback is called.</p></li>
<li><p>The service logs: <code class="docutils literal notranslate"><span class="pre">&quot;[Service]</span> <span class="pre">Shutdown</span> <span class="pre">complete!&quot;</span></code>.</p></li>
</ol>
</section>
<section id="order-when-restarting-await-service-restart">
<h4>Order when restarting (<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">Service.restart()</span></code>)<a class="headerlink" href="#order-when-restarting-await-service-restart" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>The service is stopped (<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">service.stop()</span></code>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__post_init__()</span></code> callback is called again.</p></li>
<li><p>The service is started (<code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">service.start()</span></code>).</p></li>
</ol>
</section>
</section>
<section id="callbacks">
<h3>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mode.</span></span><span class="sig-name descname"><span class="pre">Service</span></span></dt>
<dd><dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Service is starting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_first_start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Service started for the first time in this process.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_started</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Service has started.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Service is being stopped/restarted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Service is being stopped/restarted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_restart</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Service is being restarted.</p>
</dd></dl>

</dd></dl>

</section>
<section id="handling-errors">
<h3>Handling Errors<a class="headerlink" href="#handling-errors" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mode.</span></span><span class="sig-name descname"><span class="pre">Service</span></span></dt>
<dd><dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">crash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseException</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Crash the service and all child services.</p>
</dd></dl>

</dd></dl>

</section>
<section id="utilities">
<h3>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mode.</span></span><span class="sig-name descname"><span class="pre">Service</span></span></dt>
<dd><dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sleep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">timedelta</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Sleep for <code class="docutils literal notranslate"><span class="pre">n</span></code> seconds, or until service stopped.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">coros</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Future</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Awaitable</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Event</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">timedelta</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">WaitResult</span></span></span></dt>
<dd><p>Wait for coroutines to complete, or until the service stops.</p>
</dd></dl>

</dd></dl>

</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this heading">¶</a></h3>
<p>Your service may add logging to notify the user what is going on, and the
Service class includes some shortcuts to include the service name etc. in
logs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">self.log</span></code> delegate contains shortcuts for logging:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># examples/logging.py</span>

<span class="kn">from</span> <span class="nn">mode</span> <span class="kn">import</span> <span class="n">Service</span>


<span class="k">class</span> <span class="nc">MyService</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;This is a debug message&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;This is a info message&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;This is a warning message&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;This is a error message&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s1">&#39;This is a error message with traceback&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s1">&#39;This is a critical message&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;I can also include templates: </span><span class="si">%r</span><span class="s1"> </span><span class="si">%d</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                       <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">303</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The logs will be emitted by a logger with the same name as the module the
Service class is defined in.  It’s similar to this setup, that you can do
if you want to manually define the logger used by the service:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># examples/manual_service_logger.py</span>

<span class="kn">from</span> <span class="nn">mode</span> <span class="kn">import</span> <span class="n">Service</span><span class="p">,</span> <span class="n">get_logger</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MyService</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">mode-ng</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction to Mode</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Copyright</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">User Guide</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">User Guide</a></li>
      <li>Next: <a href="../reference/index.html" title="next chapter">API Reference</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Lanqing Huang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/userguide/services.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>