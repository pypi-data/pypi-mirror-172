
[project]
name = "trove-fm"
description = "Trove Farmer's Market is an online store and headless CMS."
dynamic = ["version"]
authors = [
    {name = "Brian Farrell", email = "brian.farrell@me.com"},
]
license = {text = "AGPLv3"}
readme = {file = "README.rst", content-type = "text/x-rst"}
requires-python = ">=3.9"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Framework :: FastAPI",
    "License :: OSI Approved :: GNU Affero General Public License v3",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Topic :: Internet :: WWW/HTTP :: Dynamic Content :: Content Management System",
    "Topic :: Office/Business",
    "Typing :: Typed"
]
keywords = ["commerce", "CMS", "headless", "store"]

dependencies = [
    ##### app #####
    # A task queue with focus on real-time processing, while also supporting task scheduling
    "celery[arangodb]==5.2.7",
    # Robust email address syntax and deliverability validation library.
    "email-validator==1.1.3",
    # Modern, fast (high-performance), web framework for building APIs based on standard Python type hints.
    "fastapi==0.75.2",
    # Simple lightweight mail system, sending emails and attachments
    "fastapi-mail==1.0.8",
    # A web based tool for monitoring and administrating Celery clusters
    "flower==1.0.0",
    # Sign and send data to untrusted environments
    "itsdangerous==2.1.2",
    # Stupidly simple Python logging
    "loguru==0.6.0",
    # Python port of Google's libphonenumber library
    "phonenumbers==8.12.48",
    # Streaming multipart parser for Python
    "python-multipart==0.0.5",
    # User Agent String parser
    "ua-parser==0.10.0",
    # The lightning-fast ASGI server.
    "uvicorn[standard]==0.17.6",

    ##### db #####
    # Database migration tool for SQLAlchemy.
    "alembic==1.7.7",
    # Asyncio PostgreSQL driver
    "asyncpg==0.25.0",
    # Async database support for Python.
    "databases[postgresql]==0.5.5",
    # Python-PostgreSQL Database Adapter
    "psycopg2==2.9.3",

    ##### auth #####
    # Comprehensive password hashing framework. BCrypt was developed to replace md5_crypt for BSD systems.
    "passlib[bcrypt]==1.7.4",
    # Python implementation of RFC 7519 (JSON Web Token).
    "PyJWT==2.3.0",
]

[project.optional-dependencies]
test = [
    # Programmatically send startup/shutdown lifespan events into ASGI applications.  Useful for testing.
    "asgi-lifespan==1.0.1",
    # Tool for measuring code coverage of Python programs
    "coverage[toml]==6.3.2",
    # Useful comparisons for unit testing
    "dirty-equals==0.4",
    # HTTPX is a fully featured HTTP client for Python 3, which provides sync and async APIs, HTTP/1.1 and HTTP/2.
    "httpx==0.22.0",
    # Static type checker for Python
    "mypy==0.942",
    # Simple powerful testing with Python
    "pytest==7.1.1",
    # Useful fixtures and markers to make asyncio testing easier.
    "pytest-asyncio==0.18.3",
    # Enhanced support when using pytest with coverage
    "pytest-cov==3.0.0",
]

doc = [
    # Tool to create intelligent and beautiful documentation
    "sphinx==4.5.0",
    # Napoleon is a pre-processor that parses NumPy and Google style docstrings and converts them to reStructuredText.
    "sphinxcontrib-napoleon==0.7",
    # Responsive Material Design theme for Sphinx documentation
    "sphinx-material==0.0.35",
]

[project.urls]
homepage = "https://trove-supply.com"
rest-api-docs-swagger = "https://trove-supply.com/docs/"
rest-api-docs-redoc = "https://trove-supply.com/redoc/"
repository = "https://gitlab.com/brianfarrell/trove-fm/"
documentation = "https://brianfarrell.gitlab.io/trove-fm/"

[build-system]
requires = ["build[virtualenv]>=0.7.0", "setuptools>=62.1.0", "setuptools-scm[toml]>=6.4", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools.packages.find]
include = ["trove_fm*"]

[tool.setuptools_scm]
# include arbitrary keyword arguments in that section to be supplied to get_version().
version_scheme = "python-simplified-semver"
write_to = "trove_fm/_version.py"

[tool.pytest.ini_options]
asyncio_mode = "strict"
testpaths = [ "trove_fm" ]
filterwarnings = [
    "ignore::DeprecationWarning"
]

[tool.coverage.run]
source = [ "trove_fm" ]
omit = [ "trove_fm/_version.py", "trove_fm/app/db/migrations/*", "trove_fm/app/db/tasks.py", "trove_fm/tests/*" ]

[tool.coverage.html]
directory = "reports/coverage/html"

[tool.coverage.xml]
output = "reports/coverage/coverage.xml"
