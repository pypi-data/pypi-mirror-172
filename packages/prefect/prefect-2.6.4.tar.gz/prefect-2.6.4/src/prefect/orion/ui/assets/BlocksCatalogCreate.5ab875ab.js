import{d as B,u as T,c as a,e as C,r as v,g as e,o as s,f as l,w as r,k as A,aJ as w,aK as D,aL as P,aM as $,aN as x,h as u,aG as N,aO as F,aD as K,a4 as i,t as R}from"./index.dae84138.js";import{u as V}from"./useRouteParam.f34f8f39.js";import{u as m}from"./useSubscriptionWithDependencies.be248e41.js";const M=B({__name:"BlocksCatalogCreate",setup(G){const n=T(),p=V("blockTypeSlug"),b=a(()=>p.value?[p.value]:null),f=m(N.getBlockTypeBySlug,b),o=a(()=>f.response),y=a(()=>o.value?[o.value.id]:null),_=m(F.getBlockSchemaForBlockType,y),t=a(()=>_.response);function d(k){K.createBlockDocument(k).then(({id:c})=>{i("Block created successfully","success"),n.push(R.block(c))}).catch(c=>{i("Failed to create block","error"),console.error(c)})}function h(){n.back()}const S=a(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return C(S),(k,c)=>{const g=v("p-layout-default");return e(o)?(s(),l(g,{key:0,class:"blocks-catalog-create"},{header:r(()=>[A(e(w),{"block-type":e(o)},null,8,["block-type"])]),default:r(()=>[e(o)?(s(),l(e(D),{key:0,"block-type":e(o)},{default:r(()=>[e(t)?(s(),l(e(P),$({key:0,key:e(t).id,"block-schema":e(t)},x({submit:d,cancel:h})),null,16,["block-schema"])):u("",!0)]),_:1},8,["block-type"])):u("",!0)]),_:1})):u("",!0)}}});export{M as default};
