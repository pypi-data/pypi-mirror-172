"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[512],{13113:function(e,n,r){r.r(n),r.d(n,{OverviewRoot:function(){return Ee},default:function(){return ke}});var t,o,s,i,a,l=r(325),d=r(27601),c=r(81745),u=r(2803),h=r(99500),p=r(47427),x=r(19065),g=r(73701),f=r(3159),j=r(32030),m=r(34595),v=r(7838),y=r(89646),w=r(31112),b=r(12745),S=r(88863),C=r(12436),E=r(19102),k=r(78093),A=r(39061),L=r(77523),O=r(76336),I=r(37099),N=r(33902),z=r(11831),T=r(54268),_=r(519),q=r(3580),F=r(65864),R=r(71824),P=r(36753),Z=r(16279),W=r(32289),G=function(e){var n=e.repos,r=l.useRef(null),t=l.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,N.l)(n)}))}),[n]),o=(0,R.N)("jobs-virtualized-expansion-state",t),s=o.expandedKeys,i=o.onToggle,a=o.onToggleAll,d=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.jobs;e.push({type:"header",repoAddress:r,jobCount:t.length});var o=(0,N.l)(r);s.includes(o)&&t.forEach((function(n){var t=n.isJob,o=n.name;e.push({type:"job",repoAddress:r,isJob:t,name:o})}))})),e}),[n,s]),c=(0,F.w)(n.map((function(e){return e.repoAddress.name}))),u=(0,_.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(j.x,{border:{side:"horizontal",width:1,color:v.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"34% 30% 20% 8% 8%",height:"32px",fontSize:"12px",color:v.w.Gray600},children:[(0,W.jsx)(q.qN,{children:"Job name"}),(0,W.jsx)(q.qN,{children:"Schedules/sensors"}),(0,W.jsx)(q.qN,{children:"Latest run"}),(0,W.jsx)(q.qN,{children:"Run history"}),(0,W.jsx)(q.qN,{children:"Actions"})]}),(0,W.jsx)("div",{style:{overflow:"hidden"},children:(0,W.jsx)(q.W2,{ref:r,children:(0,W.jsx)(q.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=d[n];return"header"===l.type?(0,W.jsx)(Z.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,onToggleAll:a,expanded:s.includes((0,N.l)(l.repoAddress)),showLocation:c.has(l.repoAddress.name),rightElement:(0,W.jsx)(z.u,{content:1===l.jobCount?"1 job":"".concat(l.jobCount," jobs"),placement:"top",children:(0,W.jsx)(T.V,{intent:"primary",children:l.jobCount})})},r):(0,W.jsx)(P.b,{name:l.name,isJob:l.isJob,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},M=r(79557),V=function(){(0,k.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(O.C5),s=o.allRepos,i=o.visibleRepos,a=s.length,d=(0,g.a)(H,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),c=d.data,u=d.loading,h=(0,E.C4)(d,E.dT),p=K(c),f=r.trim().toLocaleLowerCase(),C=f.length>0,A=l.useMemo((function(){var e=new Set(i.map((function(e){return(0,N.l)((0,I.k)(e.repository.name,e.repositoryLocation.name))})));return p.filter((function(n){var r=n.repoAddress;return e.has((0,N.l)(r))}))}),[p,i]),z=l.useMemo((function(){var e=f.toLocaleLowerCase();return A.map((function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.jobs.length>0}))}),[A,f]);return(0,W.jsxs)(j.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,W.jsx)(w.m,{title:(0,W.jsx)(b.X6,{children:"Overview"}),tabs:(0,W.jsx)(M.d,{tab:"jobs",refreshState:h})}),(0,W.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[a>1?(0,W.jsx)(L.C,{}):null,(0,W.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),u&&!a?(0,W.jsx)(j.x,{padding:64,children:(0,W.jsx)(m.$,{purpose:"page"})}):u&&!c?(0,W.jsx)(j.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,W.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,W.jsx)(m.$,{purpose:"body-text"}),(0,W.jsx)("div",{style:{color:v.w.Gray600},children:"Loading jobs\u2026"})]})}):z.length?(0,W.jsx)(G,{repos:z}):C?(0,W.jsx)(j.x,{padding:{top:20},children:(0,W.jsx)(y.t,{icon:"search",title:"No matching jobs",description:(0,W.jsxs)("div",{children:["No jobs matching ",(0,W.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,W.jsx)(j.x,{padding:{top:20},children:(0,W.jsx)(y.t,{icon:"search",title:"No jobs",description:"No jobs were found in this workspace"})})]})},K=function(e){return l.useMemo((function(){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("RepositoryLocation"===(null===s||void 0===s?void 0:s.__typename)){var i,a=(0,p.Z)(s.repositories);try{for(a.s();!(i=a.n()).done;){var l=i.value,d=l.name,c=l.pipelines,u=(0,I.k)(d,s.name),h=c.filter((function(e){var n=e.name;return!(0,A.pv)(n)})).map((function(e){return{isJob:e.isJob,name:e.name}}));h.length>0&&t.push({repoAddress:u,jobs:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return t}),[e])},H=(0,f.Ps)(t||(t=(0,h.Z)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),C.Bq),$=r(60736),J=r(75453),D=r(8358),U=r(78042),B=r(45352),Q=r(56313),X=r(89324),Y=r(31834),ee=function(e){var n=e.repos,r=l.useRef(null),t=l.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,N.l)(n)}))}),[n]),o=(0,R.N)("schedules-virtualized-expansion-state",t),s=o.expandedKeys,i=o.onToggle,a=o.onToggleAll,d=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.schedules;e.push({type:"header",repoAddress:r,scheduleCount:t.length});var o=(0,N.l)(r);s.includes(o)&&t.forEach((function(n){e.push({type:"schedule",repoAddress:r,name:n})}))})),e}),[n,s]),c=(0,F.w)(n.map((function(e){return e.repoAddress.name}))),u=(0,_.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(j.x,{border:{side:"horizontal",width:1,color:v.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"76px 28% 30% 10% 20% 10%",height:"32px",fontSize:"12px",color:v.w.Gray600},children:[(0,W.jsx)(q.qN,{}),(0,W.jsx)(q.qN,{children:"Schedule name"}),(0,W.jsx)(q.qN,{children:"Schedule"}),(0,W.jsx)(q.qN,{children:"Last tick"}),(0,W.jsx)(q.qN,{children:"Last run"}),(0,W.jsx)(q.qN,{children:"Actions"})]}),(0,W.jsx)("div",{style:{overflow:"hidden"},children:(0,W.jsx)(q.W2,{ref:r,children:(0,W.jsx)(q.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=d[n];return"header"===l.type?(0,W.jsx)(Z.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,onToggleAll:a,expanded:s.includes((0,N.l)(l.repoAddress)),showLocation:c.has(l.repoAddress.name),rightElement:(0,W.jsx)(z.u,{content:1===l.scheduleCount?"1 schedule":"".concat(l.scheduleCount," schedules"),placement:"top",children:(0,W.jsx)(T.V,{intent:"primary",children:l.scheduleCount})})},r):(0,W.jsx)(Y.i,{name:l.name,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},ne=function(){(0,k.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(O.C5).allRepos.length,s=(0,g.a)(se,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),i=s.data,a=s.loading,d=(0,E.C4)(s,E.dT),c=oe(i),u=r.trim().toLocaleLowerCase(),h=u.length>0,p=l.useMemo((function(){var e=u.toLocaleLowerCase();return c.map((function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.schedules.length>0}))}),[c,u]);return(0,W.jsxs)(j.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,W.jsx)(w.m,{title:(0,W.jsx)(b.X6,{children:"Overview"}),tabs:(0,W.jsx)(M.d,{tab:"schedules",refreshState:d})}),(0,W.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o>0?(0,W.jsx)(L.C,{}):null,(0,W.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by schedule name\u2026",style:{width:"340px"}})]}),a&&!o?(0,W.jsx)(j.x,{padding:64,children:(0,W.jsx)(m.$,{purpose:"page"})}):(0,W.jsxs)(W.Fragment,{children:["InstigationStates"===(null===i||void 0===i?void 0:i.unloadableInstigationStatesOrError.__typename)?(0,W.jsx)(re,{count:i.unloadableInstigationStatesOrError.results.length}):null,(0,W.jsx)(j.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:v.w.KeylineGray},children:(0,W.jsx)(X.K,{daemonHealth:null===i||void 0===i?void 0:i.instance.daemonHealth})}),a&&!i?(0,W.jsx)(j.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,W.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,W.jsx)(m.$,{purpose:"body-text"}),(0,W.jsx)("div",{style:{color:v.w.Gray600},children:"Loading schedules\u2026"})]})}):p.length?(0,W.jsx)(ee,{repos:p}):h?(0,W.jsx)(j.x,{padding:{top:20},children:(0,W.jsx)(y.t,{icon:"search",title:"No matching schedules",description:(0,W.jsxs)("div",{children:["No schedules matching ",(0,W.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,W.jsx)(j.x,{padding:{top:20},children:(0,W.jsx)(y.t,{icon:"search",title:"No schedules",description:"No schedules were found in this workspace"})})]})]})},re=function(e){var n=e.count,r=l.useState(!1),t=(0,x.Z)(r,2),o=t[0],s=t[1];if(!n)return null;var i=1===n?"1 unloadable schedule":"".concat(n," unloadable schedules");return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:v.w.KeylineGray},children:(0,W.jsx)($.b,{intent:"warning",title:i,description:(0,W.jsxs)(j.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,W.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a different workspace or from a schedule or repository that no longer exists in code. You can turn them off, but you cannot turn them back on."}),(0,W.jsx)(J.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,W.jsxs)(D.Vq,{isOpen:o,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,W.jsx)(j.x,{padding:{bottom:8},children:(0,W.jsx)(te,{})}),(0,W.jsx)(D.cN,{children:(0,W.jsx)(J.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},te=function(){var e=(0,g.a)(ie).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,W.jsx)(Q.Y,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,W.jsx)(C.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,W.jsx)(m.$,{purpose:"section"})},oe=function(e){return l.useMemo((function(){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("RepositoryLocation"===(null===s||void 0===s?void 0:s.__typename)){var i,a=(0,p.Z)(s.repositories);try{for(a.s();!(i=a.n()).done;){var l=i.value,d=l.name,c=l.schedules,u=(0,I.k)(d,s.name),h=c.map((function(e){return e.name}));h.length>0&&t.push({repoAddress:u,schedules:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return t}),[e])},se=(0,f.Ps)(o||(o=(0,h.Z)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n"])),C.Bq,U.O),ie=(0,f.Ps)(s||(s=(0,h.Z)(["\n  query UnloadableSchedulesQuery {\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),B.ai,C.Bq),ae=r(57466),le=r(19377),de=function(e){var n=e.repos,r=l.useRef(null),t=l.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,N.l)(n)}))}),[n]),o=(0,R.N)("sensors-virtualized-expansion-state",t),s=o.expandedKeys,i=o.onToggle,a=o.onToggleAll,d=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.sensors;e.push({type:"header",repoAddress:r,sensorCount:t.length});var o=(0,N.l)(r);s.includes(o)&&t.forEach((function(n){e.push({type:"sensor",repoAddress:r,name:n})}))})),e}),[n,s]),c=(0,F.w)(n.map((function(e){return e.repoAddress.name}))),u=(0,_.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(j.x,{border:{side:"horizontal",width:1,color:v.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"76px 38% 30% 10% 20%",height:"32px",fontSize:"12px",color:v.w.Gray600},children:[(0,W.jsx)(q.qN,{}),(0,W.jsx)(q.qN,{children:"Sensor name"}),(0,W.jsx)(q.qN,{children:"Frequency"}),(0,W.jsx)(q.qN,{children:"Last tick"}),(0,W.jsx)(q.qN,{children:"Last run"})]}),(0,W.jsx)("div",{style:{overflow:"hidden"},children:(0,W.jsx)(q.W2,{ref:r,children:(0,W.jsx)(q.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=d[n];return"header"===l.type?(0,W.jsx)(Z.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,onToggleAll:a,expanded:s.includes((0,N.l)(l.repoAddress)),showLocation:c.has(l.repoAddress.name),rightElement:(0,W.jsx)(z.u,{content:1===l.sensorCount?"1 sensor":"".concat(l.sensorCount," sensors"),placement:"top",children:(0,W.jsx)(T.V,{intent:"primary",children:l.sensorCount})})},r):(0,W.jsx)(le.R,{name:l.name,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},ce=function(){(0,k.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(O.C5).allRepos.length,s=(0,g.a)(xe,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),i=s.data,a=s.loading,d=(0,E.C4)(s,E.dT),c=pe(i),u=r.trim().toLocaleLowerCase(),h=u.length>0,p=l.useMemo((function(){var e=u.toLocaleLowerCase();return c.map((function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.sensors.length>0}))}),[c,u]);return(0,W.jsxs)(j.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,W.jsx)(w.m,{title:(0,W.jsx)(b.X6,{children:"Overview"}),tabs:(0,W.jsx)(M.d,{tab:"sensors",refreshState:d})}),(0,W.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o>0?(0,W.jsx)(L.C,{}):null,(0,W.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by sensor name\u2026",style:{width:"340px"}})]}),a&&!o?(0,W.jsx)(j.x,{padding:64,children:(0,W.jsx)(m.$,{purpose:"page"})}):(0,W.jsxs)(W.Fragment,{children:["InstigationStates"===(null===i||void 0===i?void 0:i.unloadableInstigationStatesOrError.__typename)?(0,W.jsx)(ue,{count:i.unloadableInstigationStatesOrError.results.length}):null,(0,W.jsx)(ae.F,{daemonHealth:null===i||void 0===i?void 0:i.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:v.w.KeylineGray}}),a&&!i?(0,W.jsx)(j.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,W.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,W.jsx)(m.$,{purpose:"body-text"}),(0,W.jsx)("div",{style:{color:v.w.Gray600},children:"Loading sensors\u2026"})]})}):p.length?(0,W.jsx)(de,{repos:p}):h?(0,W.jsx)(j.x,{padding:{top:20},children:(0,W.jsx)(y.t,{icon:"search",title:"No matching sensors",description:(0,W.jsxs)("div",{children:["No sensors matching ",(0,W.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,W.jsx)(j.x,{padding:{top:20},children:(0,W.jsx)(y.t,{icon:"search",title:"No sensors",description:"No sensors were found in this workspace"})})]})]})},ue=function(e){var n=e.count,r=l.useState(!1),t=(0,x.Z)(r,2),o=t[0],s=t[1];if(!n)return null;var i=1===n?"1 unloadable sensor":"".concat(n," unloadable sensors");return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:v.w.KeylineGray},children:(0,W.jsx)($.b,{intent:"warning",title:i,description:(0,W.jsxs)(j.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,W.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a different workspace or from a sensor or repository that no longer exists in code. You can turn them off, but you cannot turn them back on."}),(0,W.jsx)(J.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,W.jsxs)(D.Vq,{isOpen:o,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,W.jsx)(j.x,{padding:{bottom:8},children:(0,W.jsx)(he,{})}),(0,W.jsx)(D.cN,{children:(0,W.jsx)(J.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},he=function(){var e=(0,g.a)(ge).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,W.jsx)(Q.e,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,W.jsx)(C.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,W.jsx)(m.$,{purpose:"section"})},pe=function(e){return l.useMemo((function(){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("RepositoryLocation"===(null===s||void 0===s?void 0:s.__typename)){var i,a=(0,p.Z)(s.repositories);try{for(a.s();!(i=a.n()).done;){var l=i.value,d=l.name,c=l.sensors,u=(0,I.k)(d,s.name),h=c.map((function(e){return e.name}));h.length>0&&t.push({repoAddress:u,sensors:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return t}),[e])},xe=(0,f.Ps)(i||(i=(0,h.Z)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n"])),C.Bq,U.O),ge=(0,f.Ps)(a||(a=(0,h.Z)(["\n  query UnloadableSensorsQuery {\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),B.ai,C.Bq),fe=r(30804),je=r(87011),me=r(82348),ve=r(86771),ye=r(73478),we=r(12188),be=36e5,Se=function(e){switch(e){case"1":return be;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},Ce=function(){(0,k.Px)(),(0,me.j)("Runs");var e=l.useContext(O.C5),n=e.allRepos,r=e.visibleRepos,t=l.useState(""),o=(0,x.Z)(t,2),s=o[0],i=o[1],a=(0,ye.S)("12"),d=(0,x.Z)(a,2),c=d[0],u=d[1],h=l.useState((function(){return Date.now()})),p=(0,x.Z)(h,2),g=p[0],f=p[1],m=l.useState((function(){return 0})),v=(0,x.Z)(m,2),y=v[0],C=v[1];l.useEffect((function(){f(Date.now());var e=setInterval((function(){f(Date.now())}),6e4);return function(){clearInterval(e)}}),[c]);var E=l.useCallback((function(){C((function(e){return e-Se(c)}))}),[c]),A=l.useCallback((function(){C((function(e){return e+Se(c)}))}),[c]),N=l.useCallback((function(){C(0)}),[]),z=l.useMemo((function(){return[g-Number(c)*be+y,g+36e5+y]}),[c,g,y]),T=l.useMemo((function(){var e=s.toLocaleLowerCase().trim(),n=r.flatMap((function(n){var r=(0,I.k)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter((function(n){return n.name.toLocaleLowerCase().includes(e)})).map((function(e){return(0,we.G)(r,e.name)}))}));return new Set(n)}),[r,s]);return(0,W.jsxs)(fe.T,{children:[(0,W.jsx)(w.m,{title:(0,W.jsx)(b.X6,{children:"Overview"}),tabs:(0,W.jsx)(M.d,{tab:"timeline"})}),(0,W.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,W.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[n.length>1&&(0,W.jsx)(L.C,{}),(0,W.jsx)(S.oi,{icon:"search",value:s,onChange:function(e){return i(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"200px"}})]}),(0,W.jsxs)(j.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,W.jsx)(je.h,{activeItems:new Set([c]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return u(e)}}),(0,W.jsxs)(j.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,W.jsx)(J.zx,{onClick:E,children:"\u2190"}),(0,W.jsx)(J.zx,{onClick:N,children:"Now"}),(0,W.jsx)(J.zx,{onClick:A,children:"\u2192"})]})]})]}),(0,W.jsx)(ve.C,{range:z,visibleJobKeys:T})]})},Ee=function(){return(0,c.gV)().flagNewWorkspace?(0,W.jsxs)(d.rs,{children:[(0,W.jsx)(d.AW,{path:"/overview/timeline",children:(0,W.jsx)(Ce,{})}),(0,W.jsx)(d.AW,{path:"/overview/jobs",children:(0,W.jsx)(V,{})}),(0,W.jsx)(d.AW,{path:"/overview/schedules",children:(0,W.jsx)(ne,{})}),(0,W.jsx)(d.AW,{path:"/overview/sensors",children:(0,W.jsx)(ce,{})}),(0,W.jsx)(d.AW,{path:"/overview/backfills",children:(0,W.jsx)(u.A,{})}),(0,W.jsx)(d.AW,{path:"*",render:function(){return(0,W.jsx)(d.l_,{to:"/overview/timeline"})}})]}):(0,W.jsx)(d.l_,{to:"/instance/overview"})},ke=Ee}}]);
//# sourceMappingURL=512.89736b1e.chunk.js.map