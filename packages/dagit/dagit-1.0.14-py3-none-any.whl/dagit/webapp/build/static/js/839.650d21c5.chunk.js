"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[839],{2803:function(e,n,t){t.d(n,{A:function(){return S}});var i,r,o=t(99500),a=t(95764),s=t(73701),l=t(3159),c=t(31112),u=t(12745),d=t(32030),h=t(89646),f=t(60736),p=t(47387),m=t(325),x=t(81745),g=t(12436),v=t(19102),y=t(78093),w=t(82348),j=t(79557),b=t(77892),k=t(50741),T=t(2789),C=t(78042),N=t(25171),_=t(64480),Z=t(32289),S=function(){(0,y.Px)();var e=(0,x.gV)().flagNewWorkspace,n=m.useContext(N.N).pageTitle,t=(0,s.a)(P),i=(0,b.l)({query:R,variables:{},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),r=i.queryResult,o=i.paginationProps,l=(0,v.C4)(r,v.dT);return(0,w.j)("Backfills"),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.m,{title:(0,Z.jsx)(u.X6,{children:e?"Overview":n}),tabs:e?(0,Z.jsx)(j.d,{tab:"backfills",refreshState:l}):(0,Z.jsx)(_.Z,{tab:"backfills",refreshState:l})}),(0,Z.jsx)(k.g,{queryResult:r,allowStaleData:!0,children:function(e){var n,i=e.partitionBackfillsOrError;if("PythonError"===i.__typename)return(0,Z.jsx)(g.T9,{error:i});if(!i.results.length)return(0,Z.jsx)(d.x,{padding:{vertical:64},children:(0,Z.jsx)(h.t,{icon:"no-results",title:"No backfills found",description:(0,Z.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var s=((null===(n=t.data)||void 0===n?void 0:n.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),l=s.length&&s.every((function(e){return e}));return(0,Z.jsxs)("div",{children:[l?null:(0,Z.jsx)(d.x,{padding:{horizontal:24,vertical:16},children:(0,Z.jsx)(f.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,Z.jsxs)("div",{children:["See the"," ",(0,Z.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,Z.jsx)(T.G,{backfills:i.results.slice(0,10),refetch:r.refetch}),i.results.length>0?(0,Z.jsx)("div",{style:{marginTop:"16px"},children:(0,Z.jsx)(p.b$,(0,a.Z)({},o))}):null]})}})]})},P=(0,l.Ps)(i||(i=(0,o.Z)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),C.O),R=(0,l.Ps)(r||(r=(0,o.Z)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          backfillStatus\n          numRequested\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),T.b,g.Bq)},64480:function(e,n,t){t.d(n,{Z:function(){return p}});var i=t(32030),r=t(31269),o=t(325),a=t(81745),s=t(19102),l=t(81300),c=t(52140),u=t(37286),d=t(25171),h=t(40515),f=t(32289),p=function(e){var n=e.refreshState,t=e.tab,p=o.useContext(d.N).healthTitle,m=(0,a.gV)().flagNewWorkspace,x=(0,h._)();return(0,f.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,f.jsxs)(r.mQ,{selectedTabId:t,children:[m?null:(0,f.jsx)(u.f,{id:"overview",title:"Overview",to:"/instance/overview"}),m?(0,f.jsx)(u.f,{id:"code-locations",title:"Code locations",to:"/instance/code-locations",icon:(0,f.jsx)(c.S,{placeholder:!1})}):null,(0,f.jsx)(u.f,{id:"health",title:p,to:"/instance/health",icon:(0,f.jsx)(l.N,{})}),m?null:(0,f.jsx)(u.f,{id:"schedules",title:"Schedules",to:"/instance/schedules"}),m?null:(0,f.jsx)(u.f,{id:"sensors",title:"Sensors",to:"/instance/sensors"}),m?null:(0,f.jsx)(u.f,{id:"backfills",title:"Backfills",to:"/instance/backfills"}),x?(0,f.jsx)(u.f,{id:"config",title:"Configuration",to:"/instance/config"}):null]}),n?(0,f.jsx)(i.x,{padding:{bottom:8},children:(0,f.jsx)(s.xi,{refreshState:n})}):null]})}},29440:function(e,n,t){t.d(n,{E:function(){return p},q:function(){return m}});var i,r=t(99500),o=t(59019),a=t(3159),s=t(12745),l=t(7838),c=t(325),u=t(68156),d=t(5484),h=t(32289),f={showTimezone:!0,showSeconds:!0},p=function(e){var n=e.schedules,t=c.useMemo((function(){return n.map((function(e){var n=e.executionTimezone,t=e.futureTicks;return e.scheduleState.status===d.yn.RUNNING?{executionTimezone:n,earliest:Math.min.apply(Math,(0,o.Z)(t.results.map((function(e){return e.timestamp}))))}:null})).reduce((function(e,n){return!e||null!==n&&void 0!==n&&n.earliest&&n.earliest<(null===e||void 0===e?void 0:e.earliest)?n:e}),null)}),[n]);return t?(0,h.jsxs)(s.aU,{color:l.w.Gray500,children:["Next tick:"," ",(0,h.jsx)(u.v,{timestamp:t.earliest,timezone:t.executionTimezone,timeFormat:f})]}):null},m=(0,a.Ps)(i||(i=(0,r.Z)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 10) {\n      results {\n        timestamp\n      }\n    }\n  }\n"])))},77523:function(e,n,t){t.d(n,{C:function(){return h}});var i=t(19065),r=t(8358),o=t(32030),a=t(75453),s=t(30284),l=t(325),c=t(93141),u=t(76336),d=t(32289),h=function(){var e=l.useContext(u.C5),n=e.allRepos,t=e.visibleRepos,h=e.toggleVisible,f=l.useState(!1),p=(0,i.Z)(f,2),m=p[0],x=p[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:m,style:{width:"auto"},onClose:function(){return x(!1)},children:[(0,d.jsx)(r.fK,{icon:"repo",label:"Repositories"}),(0,d.jsx)(c.e,{options:n,onBrowse:function(){return x(!1)},onToggle:h,selected:t}),(0,d.jsx)(r.cN,{children:(0,d.jsx)(o.x,{padding:{top:8},children:(0,d.jsx)(a.zx,{intent:"none",onClick:function(){return x(!1)},children:"Done"})})})]}),(0,d.jsx)(a.zx,{intent:"none",icon:(0,d.jsx)(s.JO,{name:"folder"}),rightIcon:(0,d.jsx)(s.JO,{name:"expand_more"}),onClick:function(){return x(!0)},children:"".concat(t.length," of ").concat(n.length," Repositories")})]})}},40515:function(e,n,t){t.d(n,{_:function(){return s}});var i,r=t(99500),o=t(73701),a=t(3159),s=function(){var e=(0,o.a)(l).data;return!(null===e||void 0===e||!e.instance.hasInfo)},l=(0,a.Ps)(i||(i=(0,r.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      hasInfo\n    }\n  }\n"])))},79557:function(e,n,t){t.d(n,{d:function(){return l}});var i=t(32030),r=t(31269),o=(t(325),t(19102)),a=t(37286),s=t(32289),l=function(e){var n=e.refreshState,t=e.tab;return(0,s.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,s.jsxs)(r.mQ,{selectedTabId:t,children:[(0,s.jsx)(a.f,{id:"timeline",title:"Timeline",to:"/overview/timeline"}),(0,s.jsx)(a.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,s.jsx)(a.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,s.jsx)(a.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),(0,s.jsx)(a.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,s.jsx)(i.x,{padding:{bottom:8},children:(0,s.jsx)(o.xi,{refreshState:n})}):null]})}},86771:function(e,n,t){t.d(n,{C:function(){return le}});var i=t(325),r=t(16798),o=t(59019),a=t(95764),s=t(19065),l=t(922),c=t(32030),u=t(7838),d=t(11831),h=t(54268),f=t(8546),p=t(30284),m=t(85899),x=t(762),g=t(34595),v=t(12745),y=t(55690),w=t.n(y),j=t(74549),b=t(37971),k=t(7489),T=t(68156),C=t(65864),N=t(71824),_=t(33902),Z=t(36114),S=t(35815),P=t(59549),R=t(34653),I=t(32460),E=t(18499),M=function(e){switch(e){case"queued":case"scheduled":return u.w.Blue200;case"inProgress":return u.w.Blue500;case"failed":return u.w.Red500;case"succeeded":return u.w.Green500}},O=function(e){var n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach((function(e){var t=e.status;"SCHEDULED"===t?n.scheduled++:R.sy.has(t)?n.queued++:R.Ys.has(t)?n.inProgress++:R.hd.has(t)?n.failed++:R._m.has(t)&&n.succeeded++}));var t=Object.keys(n).filter((function(e){return n[e]>0}));if(1===t.length){var i=(0,s.Z)(t,1)[0];return M(i)}for(var r=e.length,o=[n.failed>0?{status:"failed",pct:100*n.failed/r}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/r}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/r}:null,n.queued>0?{status:"queued",pct:100*n.queued/r}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/r}:null].filter(Boolean),a="",l=0,c=0,u=0;u<o.length;u++){var d=o[u];if(d){var h=d.status,f=d.pct;c=l,l+=f;var p=M(h);0===u?a+="".concat(p," ").concat(f.toFixed(1),"%, "):u===o.length-1?a+="".concat(p," ").concat(c.toFixed(1),"%"):a+="".concat(p," ").concat(c.toFixed(1),"% ").concat(l.toFixed(1),"%, ")}}return"linear-gradient(to right, ".concat(a,")")},L=t(32289),F=32,D=function(e){var n=e.loading,t=void 0!==n&&n,l=e.jobs,d=e.range,h=i.useState(null),f=(0,s.Z)(h,2),p=f[0],m=f[1],x=Date.now(),g=(0,s.Z)(d,2),v=(g[0],x<=g[1]),y=l.reduce((function(e,n){var t=n.repoAddress,i=(0,_.l)(t),s=e[i]||[];return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},i,[].concat((0,o.Z)(s),[n])))}),{}),w=Object.keys(y),j=(0,N.N)("timeline-expansion-state",w),b=j.expandedKeys,k=j.onToggle,T=j.onToggleAll,P=i.useRef(null),R=i.useCallback((function(e){var n;e?(P.current=new ResizeObserver((function(e){var n=e[0];m(n.contentRect.width)})),P.current.observe(e)):null===(n=P.current)||void 0===n||n.disconnect()}),[]);if(!p)return(0,L.jsx)(X,{$height:130,ref:R,children:(0,L.jsx)("div",{})});var I=Object.keys(y).sort((function(e,n){return e.toLocaleLowerCase().localeCompare(n.toLocaleLowerCase())})),E=64,M=I.filter((function(e){return b.includes(e)})).reduce((function(e,n){return e+y[n].length}),0),O=I.length*S.l+F*M,D=(0,C.w)(I.map((function(e){var n;return(null===(n=(0,Z.g)(e))||void 0===n?void 0:n.name)||""}))),B=I.length>0,K=64+(B?O:66);return(0,L.jsxs)(X,{$height:K,ref:R,children:[(0,L.jsx)(c.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",height:64},border:{side:"top",width:1,color:u.w.KeylineGray},children:"Jobs"}),(0,L.jsx)($,{interval:36e5,range:d,height:B?O:0}),I.length?I.map((function(e){var n,t=null===(n=(0,Z.g)(e))||void 0===n?void 0:n.name,i=y[e],r=E,o=b.includes(e);return E=r+S.l+(o?i.length*F:0),(0,L.jsx)(G,{expanded:o,range:d,top:r,repoKey:e,isDuplicateRepoName:!(!t||!D.has(t)),jobs:y[e],onToggle:k,onToggleAll:T,width:p},e)})):(0,L.jsx)(Y,{loading:t,includesTicks:v})]})},G=function(e){var n=e.expanded,t=e.onToggle,r=e.onToggleAll,o=e.repoKey,a=e.isDuplicateRepoName,s=e.jobs,l=e.range,c=e.top,u=e.width,d=(0,Z.g)(o),h=(null===d||void 0===d?void 0:d.name)||"Unknown repo",f=(null===d||void 0===d?void 0:d.location)||"Unknown location",p=i.useCallback((function(e){e.getModifierState("Shift")?r(!n):d&&t(d)}),[n,t,r,d]);return(0,L.jsxs)("div",{children:[(0,L.jsx)(z,{$top:c,children:(0,L.jsx)(S.L,{expanded:n,repoName:h,repoLocation:f,onClick:p,showLocation:a,rightElement:(0,L.jsx)(B,{jobs:s})})}),n?s.map((function(e,n){return(0,L.jsx)(Q,{job:e,top:c+S.l+n*F,range:l,width:u},e.key)})):null]})},B=i.memo((function(e){var n=e.jobs,t=i.useMemo((function(){var e=0,t=0,i=0;return n.forEach((function(n){n.runs.forEach((function(n){var r=n.status;"SCHEDULED"!==r&&(R.Ys.has(r)?e++:R.hd.has(r)?t++:R._m.has(r)&&i++)}))})),{inProgressCount:e,failedCount:t,succeededCount:i}}),[n]),r=t.inProgressCount,o=t.failedCount,a=t.succeededCount,s=1===r?"1 run in progress":"".concat(r," runs in progress"),l=1===a?"1 run succeeded":"".concat(a," runs succeeded"),u=1===o?"1 run failed":"".concat(o," runs failed");return(0,L.jsxs)(c.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[r>0?(0,L.jsx)(d.u,{content:(0,L.jsx)(K,{children:s}),placement:"top",children:(0,L.jsx)(h.V,{intent:"primary",children:r})}):null,a>0?(0,L.jsx)(d.u,{content:(0,L.jsx)(K,{children:l}),placement:"top",children:(0,L.jsx)(h.V,{intent:"success",children:a})}):null,o>0?(0,L.jsx)(d.u,{content:(0,L.jsx)(K,{children:u}),placement:"top",children:(0,L.jsx)(h.V,{intent:"danger",children:o})}):null]})})),K=l.ZP.span.withConfig({displayName:"RunTimeline__StatusSpan",componentId:"sc-1k6kbha-0"})(["white-space:nowrap;"]),z=l.ZP.div.withConfig({displayName:"RunTimeline__SectionHeaderContainer",componentId:"sc-1k6kbha-1"})(["position:absolute;top:0;left:0;right:0;",""],(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")})),$=function(e){var n=e.interval,t=e.range,r=e.height,a=(0,s.Z)(t,2),l=a[0],d=a[1],h=navigator.language,f=i.useContext(b.j),p=(0,s.Z)(f,1)[0],m="Automatic"===p?(0,k.cw)():p,x=i.useMemo((function(){return new Intl.DateTimeFormat(h,{month:"numeric",day:"numeric",year:"numeric",timeZone:m})}),[h,m]),g=i.useMemo((function(){return new Intl.DateTimeFormat(h,{hour:"numeric",timeZone:m})}),[h,m]),v=i.useMemo((function(){for(var e=d-l,n=[],t=w().tz(l,m).startOf("day");t.valueOf()<d;){var i=t.valueOf();t.add(1,"day");var r=t.valueOf();n.push({dayStart:i,dayEnd:r})}return n.map((function(n){var t=n.dayStart,i=n.dayEnd,r=new Date(t),o=t-l,a=o+(i-t),s=Math.max(0,o/e*100),c=Math.min(100,a/e*100);return{label:x.format(r),key:r.toString(),left:s,width:c-s}}))}),[x,d,l,m]),y=i.useMemo((function(){var e=d-l,t=l-l%n,i=Math.ceil(e/n)+1;return(0,o.Z)(new Array(i)).map((function(i,r){var o=t+r*n,a=new Date(o);return{label:g.format(a).replace(" ",""),key:a.toString(),left:(o-l)/e*100}})).filter((function(e){return e.left>0}))}),[d,l,n,g]),j=Date.now(),T="".concat(((j-l)/(d-l)*100).toPrecision(3),"%");return(0,L.jsxs)(q,{style:{height:"".concat(r,"px")},children:[(0,L.jsx)(A,{children:v.map((function(e){return(0,L.jsx)(U,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,L.jsx)(c.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key)}))}),(0,L.jsx)(A,{children:y.map((function(e){return(0,L.jsx)(H,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)}))}),(0,L.jsxs)(J,{children:[(0,L.jsx)(W,{style:{left:0,backgroundColor:u.w.Gray200}}),y.map((function(e){return(0,L.jsx)(W,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)})),j>=l&&j<=d?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(V,{style:{left:T},children:"Now"}),(0,L.jsx)(W,{style:{left:T,backgroundColor:u.w.Blue500,zIndex:1}})]}):null]})]})},q=l.ZP.div.withConfig({displayName:"RunTimeline__DividerContainer",componentId:"sc-1k6kbha-2"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],320,f.b.monospace,u.w.Gray800),A=l.ZP.div.withConfig({displayName:"RunTimeline__DividerLabels",componentId:"sc-1k6kbha-3"})(["display:flex;align-items:center;box-shadow:inset 1px 0 0 ",",inset 0 1px 0 ",",inset -1px 0 0 ",";height:","px;position:relative;user-select:none;font-size:12px;width:100%;overflow:hidden;"],u.w.KeylineGray,u.w.KeylineGray,u.w.KeylineGray,32),U=l.ZP.div.withConfig({displayName:"RunTimeline__DateLabel",componentId:"sc-1k6kbha-4"})(["position:absolute;padding:8px 0;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],u.w.KeylineGray),H=l.ZP.div.withConfig({displayName:"RunTimeline__TimeLabel",componentId:"sc-1k6kbha-5"})(["position:absolute;padding:8px;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],u.w.KeylineGray),J=l.ZP.div.withConfig({displayName:"RunTimeline__DividerLines",componentId:"sc-1k6kbha-6"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],u.w.KeylineGray,u.w.KeylineGray),W=l.ZP.div.withConfig({displayName:"RunTimeline__DividerLine",componentId:"sc-1k6kbha-7"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],u.w.KeylineGray),V=l.ZP.div.withConfig({displayName:"RunTimeline__NowMarker",componentId:"sc-1k6kbha-8"})(["background-color:",";border-radius:1px;color:",";cursor:default;font-size:12px;line-height:12px;margin-left:-12px;padding:1px 4px;position:absolute;top:-14px;user-select:none;"],u.w.Blue500,u.w.White),Q=function(e){var n=e.job,t=e.top,r=e.range,o=e.width,a=(0,s.Z)(r,2),l=a[0],d=a[1],h=o-320,f=n.runs,g=i.useMemo((function(){return(0,E.i)({runs:f,start:l,end:d,width:h,minChunkWidth:2,minMultipleWidth:12})}),[f,l,d,h]);return n.runs.length?(0,L.jsxs)(ee,{$top:t,children:[(0,L.jsxs)(ne,{children:[(0,L.jsx)(p.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,L.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,L.jsx)("span",{style:{color:u.w.Gray900},children:(0,L.jsx)(m.g,{text:n.jobName})}):(0,L.jsx)(j.rU,{to:n.path,children:(0,L.jsx)(m.g,{text:n.jobName})})})]}),(0,L.jsx)(te,{children:g.map((function(e){var t=e.left,i=e.width,r=e.runs.length;return(0,L.jsx)(ie,{$background:O(e.runs),$multiple:r>1,style:{left:"".concat(t,"px"),width:"".concat(i,"px")},children:(0,L.jsx)(x.J,{content:(0,L.jsx)(oe,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,L.jsx)(c.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:r>1?(0,L.jsx)(re,{children:e.runs.length}):null})})},e.runs[0].id)}))})]}):null},Y=function(e){var n=e.loading,t=e.includesTicks;return(0,L.jsx)(c.x,{background:u.w.White,padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:{side:"horizontal",width:1,color:u.w.KeylineGray},children:n?(0,L.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,L.jsx)(g.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):t?(0,L.jsx)("span",{children:"No runs or scheduled ticks in this time period."}):(0,L.jsx)("span",{children:"No runs in this time period."})})},X=l.ZP.div.withConfig({displayName:"RunTimeline__Timeline",componentId:"sc-1k6kbha-9"})([""," position:relative;"],(function(e){var n=e.$height;return"height: ".concat(n,"px;")})),ee=l.ZP.div.withConfig({displayName:"RunTimeline__Row",componentId:"sc-1k6kbha-10"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;height:","px;padding:1px 0;position:absolute;left:0;top:0;",":first-child,:hover{box-shadow:inset 0 1px 0 ",",inset 0 -1px 0 ",";}:hover{background-color:",";}"],u.w.KeylineGray,33,(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")}),u.w.KeylineGray,u.w.KeylineGray,u.w.Gray10),ne=l.ZP.div.withConfig({displayName:"RunTimeline__JobName",componentId:"sc-1k6kbha-11"})(["align-items:center;display:flex;font-size:13px;justify-content:flex-start;gap:8px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],320),te=l.ZP.div.withConfig({displayName:"RunTimeline__RunChunks",componentId:"sc-1k6kbha-12"})(["flex:1;position:relative;height:","px;"],F),ie=l.ZP.div.withConfig({displayName:"RunTimeline__RunChunk",componentId:"sc-1k6kbha-13"})(["align-items:center;background:",";border-radius:2px;height:","px;position:absolute;top:2px;",";transition:background-color 300ms linear,width 300ms ease-in-out;.chunk-popover-target{display:block;height:100%;width:100%;}"],(function(e){return e.$background}),28,(function(e){return e.$multiple?"min-width: ".concat(12,"px"):null})),re=l.ZP.div.withConfig({displayName:"RunTimeline__BatchCount",componentId:"sc-1k6kbha-14"})(["color:",";cursor:default;font-family:",";font-size:14px;font-weight:600;user-select:none;"],u.w.White,f.b.monospace),oe=function(e){var n=e.job,t=e.batch,i=t.runs.slice(0,50),r=t.runs.length-i.length;return(0,L.jsxs)(c.x,{style:{width:"260px"},children:[(0,L.jsx)(c.x,{padding:12,border:{side:"bottom",width:1,color:u.w.KeylineGray},children:(0,L.jsx)(ae,{children:n.jobName})}),(0,L.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:i.map((function(e,n){return(0,L.jsxs)(c.x,{border:n>0?{side:"top",width:1,color:u.w.KeylineGray}:null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,L.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,L.jsx)(P.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,L.jsx)(j.rU,{to:"/instance/runs/".concat(e.id),children:(0,L.jsx)(v.fv,{children:e.id.slice(0,8)})})]}),(0,L.jsx)(v.fv,{children:"SCHEDULED"===e.status?(0,L.jsx)(T.v,{timestamp:e.startTime/1e3}):(0,L.jsx)(I.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)}))}),r>0?(0,L.jsx)(c.x,{padding:12,border:{side:"top",width:1,color:u.w.KeylineGray},children:(0,L.jsxs)(j.rU,{to:"".concat(n.path,"runs"),children:["+ ",r," more"]})}):null]})},ae=l.ZP.strong.withConfig({displayName:"RunTimeline__HoverContentJobName",componentId:"sc-1k6kbha-15"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),se=t(12188),le=function(e){var n=e.range,t=e.visibleJobKeys,r=e.runsFilter,o=void 0===r?{}:r,a=(0,se.Z)(n,o),s=a.jobs,l=a.loading,c=i.useMemo((function(){return s.filter((function(e){var n=e.key;return t.has(n)}))}),[s,t]);return(0,L.jsx)(D,{loading:l,range:n,jobs:c})}},18499:function(e,n,t){t.d(n,{a:function(){return r},i:function(){return o}});var i=t(59019),r=function(e,n){return!(e.end<n.start||n.end<e.start)},o=function(e){for(var n=e.runs,t=e.start,r=e.end,o=e.width,s=e.minChunkWidth,l=e.minMultipleWidth,c=r-t,u=(Date.now()-t)/(r-t)*o,d=n.map((function(e){var n=e.startTime,i=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:i,left:Math.max(0,Math.floor((n-t)/c*o)),width:Math.max(s,Math.min(Math.ceil((i-n)/c*o),Math.ceil((i-t)/c*o)))}})).sort((function(e,n){return n.left-e.left})),h=[];d.length;){var f=d.shift(),p=d[0];if(f)if(p&&a(f,p,l,u)){d.shift(),f.runs=[].concat((0,i.Z)(f.runs),(0,i.Z)(p.runs)),f.startTime=Math.min(f.startTime,p.startTime),f.endTime=Math.max(f.endTime,p.endTime);var m=Math.max(f.left+l,f.left+f.width,p.left+p.width),x=Math.min(f.left,p.left);f.width=m-x,f.left=x,d.unshift(f)}else h.push(f)}return h},a=function(e,n,t,i){var o=e.left,a=e.left+Math.max(e.width,t),s=n.left,l=n.left+Math.max(n.width,t),c=Math.min(e.left,n.left),u=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return r({start:o,end:a},{start:s,end:l})&&(c>i||u<i)}},73478:function(e,n,t){t.d(n,{S:function(){return a}});var i=t(19065),r=t(325),o=t(76314),a=function(e){var n=r.useCallback((function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}}),[e]),t=(0,o.U)("dagit.run-timeline-hour-window",n),a=(0,i.Z)(t,2),s=a[0],l=a[1],c=r.useCallback((function(n){l(n||e)}),[e,l]);return r.useMemo((function(){return[s,c]}),[s,c])}},12188:function(e,n,t){t.d(n,{Z:function(){return b},G:function(){return k}});var i,r=t(99500),o=t(16798),a=t(47427),s=t(59019),l=t(95764),c=t(19065),u=t(73701),d=t(3159),h=t(325),f=t(39061),p=t(29440),m=t(5484),x=t(37099),g=t(33902),v=t(25582),y=t(34653),w=t(55752),j=t(18499),b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)(e,2),i=t[0],r=t[1],d=(0,u.a)(T,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:(0,l.Z)((0,l.Z)({},n),{},{statuses:[m.VO.CANCELING,m.VO.STARTED],createdBefore:r/1e3}),terminatedFilter:(0,l.Z)((0,l.Z)({},n),{},{statuses:Array.from(y.cv),createdBefore:r/1e3,updatedAfter:i/1e3})}}),p=d.data,g=d.previousData,w=d.loading,b=p||g||{},C=b.unterminated,N=b.terminated,_=b.workspaceOrError,Z=h.useMemo((function(){var e={},n=Date.now();return[].concat((0,s.Z)("Runs"===(null===C||void 0===C?void 0:C.__typename)?C.results:[]),(0,s.Z)("Runs"===(null===N||void 0===N?void 0:N.__typename)?N.results:[])).forEach((function(t){if(t.startTime&&t.repositoryOrigin&&(0,j.a)({start:i,end:r},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var o=k({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[o]=[].concat((0,s.Z)(e[o]||[]),[{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}})),e}),[r,C,N,i]),S=h.useMemo((function(){if(!_||"Workspace"!==_.__typename)return[];var e,n=[],t=(0,a.Z)(_.locationEntries);try{for(t.s();!(e=t.n()).done;){var c,u=e.value;if("WorkspaceLocationEntry"===u.__typename&&"RepositoryLocation"===(null===(c=u.locationOrLoadError)||void 0===c?void 0:c.__typename)){var d,h=(0,a.Z)(u.locationOrLoadError.repositories);try{for(h.s();!(d=h.n()).done;){var p,g=d.value,y=(0,x.k)(g.name,u.locationOrLoadError.name),w=(0,a.Z)(g.pipelines);try{var b=function(){var e,t=p.value,o=(g.schedules||[]).filter((function(e){return e.pipelineName===t.name})),l=[],c=(0,a.Z)(o);try{var u=function(){var n=e.value;n.scheduleState.status===m.yn.RUNNING&&n.futureTicks.results.forEach((function(e){var t=e.timestamp,o=1e3*t;(0,j.a)({start:i,end:r},{start:o,end:o})&&l.push({id:"".concat(n.pipelineName,"-future-run-").concat(t),status:"SCHEDULED",startTime:o,endTime:o+5e3})}))};for(c.s();!(e=c.n()).done;)u()}catch(b){c.e(b)}finally{c.f()}var d=(0,f.pv)(t.name),h=k(y,t.name),x=d?"Ad hoc materializations":t.name,w=Z[h]||[];(l.length||w.length)&&n.push({key:h,jobName:x,jobType:d?"asset":"job",repoAddress:y,path:(0,v.jT)({repoName:y.name,repoLocation:y.location,pipelineName:t.name,isJob:t.isJob}),runs:[].concat((0,s.Z)(w),l)})};for(w.s();!(p=w.n()).done;)b()}catch(C){w.e(C)}finally{w.f()}}}catch(C){h.e(C)}finally{h.f()}}}}catch(C){t.e(C)}finally{t.f()}var T=n.reduce((function(e,n){var t=n.runs.map((function(e){return e.startTime}));return(0,l.Z)((0,l.Z)({},e),{},(0,o.Z)({},n.key,Math.min.apply(Math,(0,s.Z)(t))))}),{});return n.sort((function(e,n){return T[e.key]-T[n.key]}))}),[_,Z,i,r]);return{jobs:S,loading:w&&!p}},k=function(e,n){return"".concat(n,"-").concat((0,g.l)(e))},T=(0,d.Ps)(i||(i=(0,r.Z)(["\n  query RunTimelineQuery($inProgressFilter: RunsFilter!, $terminatedFilter: RunsFilter!) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),w.$X,p.q)},65864:function(e,n,t){t.d(n,{w:function(){return i}});var i=function(e){var n=new Set,t=new Set;return e.forEach((function(e){n.has(e)?t.add(e):n.add(e)})),t}},71824:function(e,n,t){t.d(n,{N:function(){return c}});var i=t(19065),r=t(325),o=t(52848),a=t(76314),s=t(33902),l=function(e){return Array.isArray(e)?e:[]},c=function(e,n){var t=r.useContext(o.I).basePath,c=(0,a.U)("".concat(t,":dagit.").concat(e),l),u=(0,i.Z)(c,2),d=u[0],h=u[1],f=r.useCallback((function(e){var n=(0,s.l)(e);h((function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)}))}),[h]),p=r.useCallback((function(e){h(e?n:[])}),[n,h]);return r.useMemo((function(){return{expandedKeys:d,onToggle:f,onToggleAll:p}}),[d,f,p])}}}]);
//# sourceMappingURL=839.650d21c5.chunk.js.map